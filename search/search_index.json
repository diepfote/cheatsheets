{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Cheatsheets Files in this repo are meant to be viewed by the cheat alias at https://github.com/diepfote/scripts/blob/b840b338b0993ad853e88a70ea9ada75ae3f1925/source-me/posix-compliant-shells.sh#L122 LICENSE only applies to my own content (if it's a html page or PDF it's almost certainly nicked from somewhere else.)","title":"Cheatsheets"},{"location":"#cheatsheets","text":"Files in this repo are meant to be viewed by the cheat alias at https://github.com/diepfote/scripts/blob/b840b338b0993ad853e88a70ea9ada75ae3f1925/source-me/posix-compliant-shells.sh#L122 LICENSE only applies to my own content (if it's a html page or PDF it's almost certainly nicked from somewhere else.)","title":"Cheatsheets"},{"location":"Makefile/","text":"make Rule semantic target \u2026 : prerequisites \u2026 recipe \u2026 \u2026 target is usually a file (expection --> phony target) prerequisites are files used as inputs to create the target","title":"make"},{"location":"Makefile/#make","text":"","title":"make"},{"location":"Makefile/#rule-semantic","text":"target \u2026 : prerequisites \u2026 recipe \u2026 \u2026 target is usually a file (expection --> phony target) prerequisites are files used as inputs to create the target","title":"Rule semantic"},{"location":"ansible/","text":"Ansible Cli docs ansible-doc <module>","title":"Ansible"},{"location":"ansible/#ansible","text":"","title":"Ansible"},{"location":"ansible/#cli-docs","text":"ansible-doc <module>","title":"Cli docs"},{"location":"chrome-chrome/","text":"Chrome/Chromium Delete cookies for specific sites chrome://settings/content/all?search=cookies","title":"Chrome/Chromium"},{"location":"chrome-chrome/#chromechromium","text":"","title":"Chrome/Chromium"},{"location":"chrome-chrome/#delete-cookies-for-specific-sites","text":"chrome://settings/content/all?search=cookies","title":"Delete cookies for specific sites"},{"location":"dd/","text":"dd generate file of arbitrary size arbitrary_size=4G dd if=/dev/urandom of=/tmp/arbitrary-file.img count=0 bs=1 seek=\"$arbitrary_size\"","title":"dd"},{"location":"dd/#dd","text":"","title":"dd"},{"location":"dd/#generate-file-of-arbitrary-size","text":"arbitrary_size=4G dd if=/dev/urandom of=/tmp/arbitrary-file.img count=0 bs=1 seek=\"$arbitrary_size\"","title":"generate file of arbitrary size"},{"location":"docker/","text":"Docker Download amd64 image on arm device Download x86_64 image on aarch64 device docker pull --platform=linux/amd64 <image> docker pull --platform linux/amd64 <image>","title":"Docker"},{"location":"docker/#docker","text":"","title":"Docker"},{"location":"docker/#download-amd64-image-on-arm-device","text":"Download x86_64 image on aarch64 device docker pull --platform=linux/amd64 <image> docker pull --platform linux/amd64 <image>","title":"Download amd64 image on arm device"},{"location":"dvdbackup/","text":"DVD backup | dvdbackup All information taken from https://wiki.archlinux.org/title/Dvdbackup . backup entire dvd (creates folder) mkdir /tmp/test-dvd dvdbackup -i /dev/sr0 -o /tmp/test-dvd -M create iso from backup $ mkisofs -dvd-video -udf -o ~/Videos/movies_and_series/some.iso /tmp/test-dvd/Some\\ Movie\\ Name Setting input-charset to 'UTF-8' from locale. The pad was 9 for file VIDEO_TS.BUP 0.15% done, estimate finish Tue Jun 28 21:27:56 2022 0.30% done, estimate finish Tue Jun 28 21:27:56 2022 ... # dirty cleanup $ rm -r /tmp/test-dvd/*","title":"DVD backup | dvdbackup"},{"location":"dvdbackup/#dvd-backup-dvdbackup","text":"All information taken from https://wiki.archlinux.org/title/Dvdbackup .","title":"DVD backup | dvdbackup"},{"location":"dvdbackup/#backup-entire-dvd-creates-folder","text":"mkdir /tmp/test-dvd dvdbackup -i /dev/sr0 -o /tmp/test-dvd -M","title":"backup entire dvd (creates folder)"},{"location":"dvdbackup/#create-iso-from-backup","text":"$ mkisofs -dvd-video -udf -o ~/Videos/movies_and_series/some.iso /tmp/test-dvd/Some\\ Movie\\ Name Setting input-charset to 'UTF-8' from locale. The pad was 9 for file VIDEO_TS.BUP 0.15% done, estimate finish Tue Jun 28 21:27:56 2022 0.30% done, estimate finish Tue Jun 28 21:27:56 2022 ... # dirty cleanup $ rm -r /tmp/test-dvd/*","title":"create iso from backup"},{"location":"execute-on-file-change/","text":"Execute on file change inotifywait -> Linux entr -> cross-platform fswatch -> cross-platform","title":"Execute on file change"},{"location":"execute-on-file-change/#execute-on-file-change","text":"inotifywait -> Linux entr -> cross-platform fswatch -> cross-platform","title":"Execute on file change"},{"location":"ffmpeg/","text":"FFmpeg Video cropping snatched from https://stackoverflow.com/a/52675535 ffmpeg -i 'file.mov' -filter:v 'crop=iw:ih-40' 'file-cropped.mp4' ffmpeg -y -hide_banner -i \"test.avi\" -filter:v \"crop=iw-400:ih-40,scale=960:720\" -pix_fmt yuv420p output_video.mp4 Quick explanation (literal quote from https://stackoverflow.com/a/52675535 ): crop=iw-400:ih-40 Cropping 400 from the input width (iw) (2x200 left/right) Cropping 40 from the input height (ih) (2x20 top/bottom) You can cut a little more off if you want a 'crisper' edge. scale=960:720 Scaling the video slightly to bring it back to your original 720p, the 960 is to keep it at a nice 4x3 ratio. This scaling is not needed, your preference. Speed up video / Slow down video snatched from/more information at https://trac.ffmpeg.org/wiki/How%20to%20speed%20up%20/%20slow%20down%20a%20video # export raw stream without timestamp information ffmpeg -i input.mp4 -map 0:v -c:v copy -bsf:v h264_mp4toannexb raw.h264 # set timestamp info (set input framerate to 65) and limit output framerate to 30 ffmpeg -fflags +genpts -r 65 -i raw.h264 -c:v copy -fpsmax 30 output.mp4 Concatenate files / merge files snatched from https://trac.ffmpeg.org/wiki/Concatenate list.txt file '/path/to/file1.wav' file '/path/to/file2.wav' file '/path/to/file3.wav' ffmpeg -f concat -safe 0 -i list.txt -c copy output.wav Generate GIF snatched from https://www.bannerbear.com/blog/how-to-make-a-gif-from-a-video-using-ffmpeg/ ffmpeg -ss 23.0 -t 1.8 -i input.mp4 output_trimmed.gif","title":"FFmpeg"},{"location":"ffmpeg/#ffmpeg","text":"","title":"FFmpeg"},{"location":"ffmpeg/#video-cropping","text":"snatched from https://stackoverflow.com/a/52675535 ffmpeg -i 'file.mov' -filter:v 'crop=iw:ih-40' 'file-cropped.mp4' ffmpeg -y -hide_banner -i \"test.avi\" -filter:v \"crop=iw-400:ih-40,scale=960:720\" -pix_fmt yuv420p output_video.mp4 Quick explanation (literal quote from https://stackoverflow.com/a/52675535 ): crop=iw-400:ih-40 Cropping 400 from the input width (iw) (2x200 left/right) Cropping 40 from the input height (ih) (2x20 top/bottom) You can cut a little more off if you want a 'crisper' edge. scale=960:720 Scaling the video slightly to bring it back to your original 720p, the 960 is to keep it at a nice 4x3 ratio. This scaling is not needed, your preference.","title":"Video cropping"},{"location":"ffmpeg/#speed-up-video-slow-down-video","text":"snatched from/more information at https://trac.ffmpeg.org/wiki/How%20to%20speed%20up%20/%20slow%20down%20a%20video # export raw stream without timestamp information ffmpeg -i input.mp4 -map 0:v -c:v copy -bsf:v h264_mp4toannexb raw.h264 # set timestamp info (set input framerate to 65) and limit output framerate to 30 ffmpeg -fflags +genpts -r 65 -i raw.h264 -c:v copy -fpsmax 30 output.mp4","title":"Speed up video / Slow down video"},{"location":"ffmpeg/#concatenate-files-merge-files","text":"snatched from https://trac.ffmpeg.org/wiki/Concatenate list.txt file '/path/to/file1.wav' file '/path/to/file2.wav' file '/path/to/file3.wav' ffmpeg -f concat -safe 0 -i list.txt -c copy output.wav","title":"Concatenate files / merge files"},{"location":"ffmpeg/#generate-gif","text":"snatched from https://www.bannerbear.com/blog/how-to-make-a-gif-from-a-video-using-ffmpeg/ ffmpeg -ss 23.0 -t 1.8 -i input.mp4 output_trimmed.gif","title":"Generate GIF"},{"location":"find/","text":"Find prune folders and subfolders/do not show folders and subfolders $ find \"$HOME/Movies/\" -path \"$HOME/Movies/watched/*\" -prune -o -path \"$HOME/Movies/audio-only/*\" -o -path \"$HOME/Movies/TV\" -prune -o -type f -print | grep -E 'watched|TV|audio-only' # 2023-07-25 /Users/florian.sorko/Movies/Maybe at some Point/totalbiscuit/Legacy of the Void/TB plays Protoss in LOTV - Daily Adept Nerfathon (October 11, 2015).mp4 any of the given filenames find \\( -name .envrc -o -name .custom-envrc \\) ... find ~/ -type f ! -executable \\( -name '*vaultfile' -o -name '*ansible*vault' \\) -exec sh -c 'bat \"$0\"' {} \\; # find all .txt and .log files in the current directory and its subdirectories, # but exclude files containing \"temp\" or \"backup\" in their names # snatched from https://www.perplexity.ai/search/find-command-specify-multiple-ELFJQESZRrCW6Ynp8OnwQg#0 find . \\( -name \"*.txt\" -o -name \"*.log\" \\) ! -name \"*temp*\" ! -name \"*backup*\" multiple directories find <dir1> <dir2> ... sort by size & filter file-extensions find . -path ./.git -prune -o -type f -exec sh -c 'ls -s \"$0\"' {} \\; | sort -n -r | grep -vE 'png|html|svg|jpg|pptx|pdf|xcf|zip' sort by last modified find slides/out -printf \"%T@ %Tc %p\\n\" 2>&1 | sort -n | grep html | cut -d ' ' -f7 Find images by creation date Use exiftool instead of find -newer ... -! o newer ... exiftool -r -if '$CreateDate =~ /^2024:06:15 14:04/' -filename -createdate 2024-07-*","title":"Find"},{"location":"find/#find","text":"","title":"Find"},{"location":"find/#prune-folders-and-subfoldersdo-not-show-folders-and-subfolders","text":"$ find \"$HOME/Movies/\" -path \"$HOME/Movies/watched/*\" -prune -o -path \"$HOME/Movies/audio-only/*\" -o -path \"$HOME/Movies/TV\" -prune -o -type f -print | grep -E 'watched|TV|audio-only' # 2023-07-25 /Users/florian.sorko/Movies/Maybe at some Point/totalbiscuit/Legacy of the Void/TB plays Protoss in LOTV - Daily Adept Nerfathon (October 11, 2015).mp4","title":"prune folders and subfolders/do not show folders and subfolders"},{"location":"find/#any-of-the-given-filenames","text":"find \\( -name .envrc -o -name .custom-envrc \\) ... find ~/ -type f ! -executable \\( -name '*vaultfile' -o -name '*ansible*vault' \\) -exec sh -c 'bat \"$0\"' {} \\; # find all .txt and .log files in the current directory and its subdirectories, # but exclude files containing \"temp\" or \"backup\" in their names # snatched from https://www.perplexity.ai/search/find-command-specify-multiple-ELFJQESZRrCW6Ynp8OnwQg#0 find . \\( -name \"*.txt\" -o -name \"*.log\" \\) ! -name \"*temp*\" ! -name \"*backup*\"","title":"any of the given filenames"},{"location":"find/#multiple-directories","text":"find <dir1> <dir2> ...","title":"multiple directories"},{"location":"find/#sort-by-size-filter-file-extensions","text":"find . -path ./.git -prune -o -type f -exec sh -c 'ls -s \"$0\"' {} \\; | sort -n -r | grep -vE 'png|html|svg|jpg|pptx|pdf|xcf|zip'","title":"sort by size &amp; filter file-extensions"},{"location":"find/#sort-by-last-modified","text":"find slides/out -printf \"%T@ %Tc %p\\n\" 2>&1 | sort -n | grep html | cut -d ' ' -f7","title":"sort by last modified"},{"location":"find/#find-images-by-creation-date","text":"Use exiftool instead of find -newer ... -! o newer ... exiftool -r -if '$CreateDate =~ /^2024:06:15 14:04/' -filename -createdate 2024-07-*","title":"Find images by creation date"},{"location":"firefox/","text":"Firefox Duplicate Tab Alt-Shift-D or Option-Shift-D Special search modes in address bar ^ ... match browsing history \\* ... match bookmarks % ... match currently open tabs \\# ... match page titles @ ... match web addresses","title":"Firefox"},{"location":"firefox/#firefox","text":"","title":"Firefox"},{"location":"firefox/#duplicate-tab","text":"Alt-Shift-D or Option-Shift-D","title":"Duplicate Tab"},{"location":"firefox/#special-search-modes-in-address-bar","text":"^ ... match browsing history \\* ... match bookmarks % ... match currently open tabs \\# ... match page titles @ ... match web addresses","title":"Special search modes in address bar"},{"location":"freebsd/","text":"FreeBSD How to list available disk in freebsd geom disk list How to change the keyboad layout on freebsd kbdcontrol -l de For more information check the man page or https://man.freebsd.org/cgi/man.cgi?kbdcontrol Depenguinator - a minimal boot environment to start a BSD install - mfsbsd Note: Remember to run bsdinstall to start the installation process. Note: root password is mfsroot More information at https://mfsbsd.vx.sk/","title":"FreeBSD"},{"location":"freebsd/#freebsd","text":"","title":"FreeBSD"},{"location":"freebsd/#how-to-list-available-disk-in-freebsd","text":"geom disk list","title":"How to list available disk in freebsd"},{"location":"freebsd/#how-to-change-the-keyboad-layout-on-freebsd","text":"kbdcontrol -l de For more information check the man page or https://man.freebsd.org/cgi/man.cgi?kbdcontrol","title":"How to change the keyboad layout on freebsd"},{"location":"freebsd/#depenguinator-a-minimal-boot-environment-to-start-a-bsd-install-mfsbsd","text":"Note: Remember to run bsdinstall to start the installation process. Note: root password is mfsroot More information at https://mfsbsd.vx.sk/","title":"Depenguinator - a minimal boot environment to start a BSD install - mfsbsd"},{"location":"fzf/","text":"FZF Preview files in current dir highlighted based on file extension fzf --height 100% --preview='file={}; bat -l \"${file##*.}\" --color=always {}' fzf --height 100% --preview='file={}; bat -l \"$(echo \"$file\" | sed \"s#.*\\.##g\")\" --color=always {}'","title":"FZF"},{"location":"fzf/#fzf","text":"","title":"FZF"},{"location":"fzf/#preview-files-in-current-dir","text":"highlighted based on file extension fzf --height 100% --preview='file={}; bat -l \"${file##*.}\" --color=always {}' fzf --height 100% --preview='file={}; bat -l \"$(echo \"$file\" | sed \"s#.*\\.##g\")\" --color=always {}'","title":"Preview files in current dir"},{"location":"gedit/","text":"Gedit Multi Line Edit shortcuts <CTRL>+<SHIFT>+C ... enable multi line mode <CTRL>+<y> ... set multi line cursor The new plugin introduces a new \u2018mode\u2019 in which you can do multi editing. You enter this mode by Ctrl+Shift+C, and once enabled you can start inserting edit points manually by pressing Ctrl+E at any point in the document. Additionally, you can use Ctrl+Home and Ctrl+End to respectively insert edit points at the beginning or end of the line automatically","title":"Gedit"},{"location":"gedit/#gedit","text":"","title":"Gedit"},{"location":"gedit/#multi-line-edit-shortcuts","text":"<CTRL>+<SHIFT>+C ... enable multi line mode <CTRL>+<y> ... set multi line cursor The new plugin introduces a new \u2018mode\u2019 in which you can do multi editing. You enter this mode by Ctrl+Shift+C, and once enabled you can start inserting edit points manually by pressing Ctrl+E at any point in the document. Additionally, you can use Ctrl+Home and Ctrl+End to respectively insert edit points at the beginning or end of the line automatically","title":"Multi Line Edit shortcuts"},{"location":"gif/","text":"Gif How to generate a gif from video snatched from https://superuser.com/a/556031 ffmpeg -i filename..mov \\ -to 00:00:28 \\ -vf \"fps=10\" \\ -loop 0 \\ -pix_fmt rgb24 output.gif","title":"Gif"},{"location":"gif/#gif","text":"","title":"Gif"},{"location":"gif/#how-to-generate-a-gif-from-video","text":"snatched from https://superuser.com/a/556031 ffmpeg -i filename..mov \\ -to 00:00:28 \\ -vf \"fps=10\" \\ -loop 0 \\ -pix_fmt rgb24 output.gif","title":"How to generate a gif from video"},{"location":"gnome/","text":"Gnome set idle delay gsettings set org.gnome.desktop.session idle-delay <value>","title":"Gnome"},{"location":"gnome/#gnome","text":"","title":"Gnome"},{"location":"gnome/#set-idle-delay","text":"gsettings set org.gnome.desktop.session idle-delay <value>","title":"set idle delay"},{"location":"gpg/","text":"GPG default key or name to sign with snatched from https://stackoverflow.com/questions/11292196/gnupg-how-to-encrypt-decrypt-files-using-a-certain-key/11293559#11293559 gpg --encrypt --local-user <id> gpg unattended key generation snatched from https://security.stackexchange.com/q/213709 https://gist.github.com/vrillusions/5484422 $ cat /tmp/non-interactive-gpg-key %echo Generating a OpenPGP key %no-protection Key-Type: eddsa Key-Curve: Ed25519 Key-Usage: cert ---------------------- either Subkey-Type: ecdh Subkey-Curve: Curve25519 Subkey-Usage: encrypt ---------------------- or Subkey-Type: eddsa Subkey-Curve: Ed25519 Subkey-Usage: sign Name-Real: Name_test Name-Email: email_test@xxx.com Name-Comment: Unattended Testing Expire-Date: 0 %commit $ gpg --batch --gen-key /tmp/non-interactive-gpg-key gpg: Generating a OpenPGP key gpg: key BLUB marked as ultimately trusted gpg: revocation certificate stored as '/Users/blub/.gnupg/openpgp-revocs.d/ASDFASDF.rev'","title":"GPG"},{"location":"gpg/#gpg","text":"","title":"GPG"},{"location":"gpg/#default-key-or-name-to-sign-with","text":"snatched from https://stackoverflow.com/questions/11292196/gnupg-how-to-encrypt-decrypt-files-using-a-certain-key/11293559#11293559 gpg --encrypt --local-user <id>","title":"default key or name to sign with"},{"location":"gpg/#gpg-unattended-key-generation","text":"snatched from https://security.stackexchange.com/q/213709 https://gist.github.com/vrillusions/5484422 $ cat /tmp/non-interactive-gpg-key %echo Generating a OpenPGP key %no-protection Key-Type: eddsa Key-Curve: Ed25519 Key-Usage: cert ---------------------- either Subkey-Type: ecdh Subkey-Curve: Curve25519 Subkey-Usage: encrypt ---------------------- or Subkey-Type: eddsa Subkey-Curve: Ed25519 Subkey-Usage: sign Name-Real: Name_test Name-Email: email_test@xxx.com Name-Comment: Unattended Testing Expire-Date: 0 %commit $ gpg --batch --gen-key /tmp/non-interactive-gpg-key gpg: Generating a OpenPGP key gpg: key BLUB marked as ultimately trusted gpg: revocation certificate stored as '/Users/blub/.gnupg/openpgp-revocs.d/ASDFASDF.rev'","title":"gpg unattended key generation"},{"location":"illumos/","text":"Illumos How to list available disks on Illumos diskinfo","title":"Illumos"},{"location":"illumos/#illumos","text":"","title":"Illumos"},{"location":"illumos/#how-to-list-available-disks-on-illumos","text":"diskinfo","title":"How to list available disks on Illumos"},{"location":"less/","text":"less ESC-u Undo search highlighting. Turn off highlighting of strings matching the current search pattern. If highlighting is already off because of a previous ESC-u command, turn highlighting back on. Any search command will also turn highlighting back on. (High- lighting can also be disabled by toggling the -G option; in that case search commands do not turn highlighting back on.) &pattern Display only lines which match the pattern; lines which do not match the pattern are not displayed. If pattern is empty (if you type & immediately followed by ENTER), any filtering is turned off, and all lines are displayed. While filtering is in effect, an ampersand is displayed at the beginning of the prompt, as a reminder that some lines in the file may be hidden. Certain characters are special as in the / command: ^N or ! Display only lines which do NOT match the pattern. ^R Don't interpret regular expression metacharacters; that is, do a simple textual comparison. :e [filename] Examine a new file. If the filename is missing, the \"current\" file (see the :n and :p commands below) from the list of files in the command line is re-examined. A percent sign (%) in the filename is replaced by the name of the current file. A pound sign (#) is replaced by the name of the previously examined file. However, two consecutive percent signs are simply replaced with a single percent sign. This allows you to enter a filename that contains a percent sign in the name. Similarly, two consecutive pound signs are replaced with a single pound sign. The filename is inserted into the command line list of files so that it can be seen by subsequent :n and :p commands. If the filename consists of several files, they are all inserted into the list of files and the first one is examined. If the filename contains one or more spaces, the entire filename should be enclosed in double quotes (also see the -\" option). ^X^V or E Same as :e. Warning: some systems use ^V as a special literalization character. On such systems, you may not be able to use ^V. :n Examine the next file (from the list of files given in the command line). If a number N is specified, the N-th next file is exam- ined. :p Examine the previous file in the command line list. If a number N is specified, the N-th previous file is examined. :x Examine the first file in the command line list. If a number N is specified, the N-th file in the list is examined. :d Remove the current file from the list of files. t Go to the next tag, if there were more than one matches for the current tag. See the -t option for more details about tags. T Go to the previous tag, if there were more than one matches for the current tag.","title":"less"},{"location":"less/#less","text":"ESC-u Undo search highlighting. Turn off highlighting of strings matching the current search pattern. If highlighting is already off because of a previous ESC-u command, turn highlighting back on. Any search command will also turn highlighting back on. (High- lighting can also be disabled by toggling the -G option; in that case search commands do not turn highlighting back on.) &pattern Display only lines which match the pattern; lines which do not match the pattern are not displayed. If pattern is empty (if you type & immediately followed by ENTER), any filtering is turned off, and all lines are displayed. While filtering is in effect, an ampersand is displayed at the beginning of the prompt, as a reminder that some lines in the file may be hidden. Certain characters are special as in the / command: ^N or ! Display only lines which do NOT match the pattern. ^R Don't interpret regular expression metacharacters; that is, do a simple textual comparison. :e [filename] Examine a new file. If the filename is missing, the \"current\" file (see the :n and :p commands below) from the list of files in the command line is re-examined. A percent sign (%) in the filename is replaced by the name of the current file. A pound sign (#) is replaced by the name of the previously examined file. However, two consecutive percent signs are simply replaced with a single percent sign. This allows you to enter a filename that contains a percent sign in the name. Similarly, two consecutive pound signs are replaced with a single pound sign. The filename is inserted into the command line list of files so that it can be seen by subsequent :n and :p commands. If the filename consists of several files, they are all inserted into the list of files and the first one is examined. If the filename contains one or more spaces, the entire filename should be enclosed in double quotes (also see the -\" option). ^X^V or E Same as :e. Warning: some systems use ^V as a special literalization character. On such systems, you may not be able to use ^V. :n Examine the next file (from the list of files given in the command line). If a number N is specified, the N-th next file is exam- ined. :p Examine the previous file in the command line list. If a number N is specified, the N-th previous file is examined. :x Examine the first file in the command line list. If a number N is specified, the N-th file in the list is examined. :d Remove the current file from the list of files. t Go to the next tag, if there were more than one matches for the current tag. See the -t option for more details about tags. T Go to the previous tag, if there were more than one matches for the current tag.","title":"less"},{"location":"markdown/","text":"Markdown Generate Table of Contents build-container-image helper to build the image build-container-image markdown-toc -- To run it check the README here Markdownlint - Lint markdown A dependency for coc-markdownlint . You can install the cli package or use the docker image: docker run -v \"$PWD\":/workdir ghcr.io/igorshubovych/markdownlint-cli:latest \"**/*.md\"","title":"Markdown"},{"location":"markdown/#markdown","text":"","title":"Markdown"},{"location":"markdown/#generate-table-of-contents","text":"build-container-image helper to build the image build-container-image markdown-toc -- To run it check the README here","title":"Generate Table of Contents"},{"location":"markdown/#markdownlint-lint-markdown","text":"A dependency for coc-markdownlint . You can install the cli package or use the docker image: docker run -v \"$PWD\":/workdir ghcr.io/igorshubovych/markdownlint-cli:latest \"**/*.md\"","title":"Markdownlint - Lint markdown"},{"location":"mdbook/","text":"mdbook to pdf 1) installation https://crates.io/crates/mdbook-pdf cargo install mdbook-pdf 2) add the following to the bottom of book.toml : [output.pdf] 3) re-run mdbook build mdbook build to epub 1) installation https://crates.io/crates/mdbook-epub cargo install mdbook-epub 2) standaleone run mdbook-epub --standalone ./path/to/book/dir","title":"Mdbook"},{"location":"mdbook/#mdbook","text":"","title":"mdbook"},{"location":"mdbook/#to-pdf","text":"1) installation https://crates.io/crates/mdbook-pdf cargo install mdbook-pdf 2) add the following to the bottom of book.toml : [output.pdf] 3) re-run mdbook build mdbook build","title":"to pdf"},{"location":"mdbook/#to-epub","text":"1) installation https://crates.io/crates/mdbook-epub cargo install mdbook-epub 2) standaleone run mdbook-epub --standalone ./path/to/book/dir","title":"to epub"},{"location":"mpv/","text":"MPV - media player Shortcuts display time (toggle) ... Shift-o","title":"MPV - media player"},{"location":"mpv/#mpv-media-player","text":"","title":"MPV - media player"},{"location":"mpv/#shortcuts","text":"display time (toggle) ... Shift-o","title":"Shortcuts"},{"location":"neomutt/","text":"Neomutt attach multiple files In the attach view press <?> for help and search for tag (by default bound to ). If bound to t , press on every file you want to attach. An <*> will appear next to the entry. Press once satisfied -> will attach all selected.","title":"Neomutt"},{"location":"neomutt/#neomutt","text":"","title":"Neomutt"},{"location":"neomutt/#attach-multiple-files","text":"In the attach view press <?> for help and search for tag (by default bound to ). If bound to t , press on every file you want to attach. An <*> will appear next to the entry. Press once satisfied -> will attach all selected.","title":"attach multiple files"},{"location":"pdf/","text":"PDF Extract page range pdftk <source-file> cat <start>-<end> output <dst-file> count number of pages in pdf files in current dir snatched parts from https://apple.stackexchange.com/a/198860 exiftool *.pdf | awk -F\": \" '/Page Count/{print $2}' | tr '\\n' + | sed 's#+$#\\n#' | bc","title":"PDF"},{"location":"pdf/#pdf","text":"","title":"PDF"},{"location":"pdf/#extract-page-range","text":"pdftk <source-file> cat <start>-<end> output <dst-file>","title":"Extract page range"},{"location":"pdf/#count-number-of-pages-in-pdf-files-in-current-dir","text":"snatched parts from https://apple.stackexchange.com/a/198860 exiftool *.pdf | awk -F\": \" '/Page Count/{print $2}' | tr '\\n' + | sed 's#+$#\\n#' | bc","title":"count number of pages in pdf files in current dir"},{"location":"ps/","text":"PS command show command line column only $ ps -eo args | grep -v grep | grep -E '^nvim' nvim /Users/florian/Desktop/expressions.txt nvim playbooks/training-2021-12-09.yaml","title":"PS command"},{"location":"ps/#ps-command","text":"","title":"PS command"},{"location":"ps/#show-command-line-column-only","text":"$ ps -eo args | grep -v grep | grep -E '^nvim' nvim /Users/florian/Desktop/expressions.txt nvim playbooks/training-2021-12-09.yaml","title":"show command line column only"},{"location":"pueue/","text":"Pueue https://github.com/Nukesor/pueue Filtering Failure Default pueue status -g now -- columns=id,status,command status=failed JSON pueue status -g now -j | jq '.tasks[] | select(.status.Done? and (.status.Done.result | type) == \"object\" and (.status.Done.result | has(\"Failed\"))) | .id' Success Default pueue status -g now -- columns=id,status,command status=failed JSON pueue status -g now -j | jq '.tasks[] | select(.status.Done? and (.status.Done.result | type) == \"string\" and (.status.Done.result == \"Success\")) | .id' Queued Default pueue status -g now -- columns=id,status,command status=queued JSON pueue status -j | jq '.tasks[] | select(.status | has(\"Queued\")) | .id' Running Default pueue status -g now -- columns=id,status,command status=running JSON pueue status -j | jq '.tasks[] | select(.status | has(\"Running\")) | .id' PQ Helpers Filtering Find tasks that resulted in an increase in file size pq log -g now --lines 1000 |& grep -E 'Task [0-9]+|\u2248' | grep -B 1 -F '0.' Show filename for tasks that resulted in an increase in file size pq log -g now --lines 1000 |& grep -E 'Task [0-9]+|\u2248' | grep -B 1 -F '0.' | grep Task | awk -F : '{ print $1 }' | awk '{ print $3 }' | xargs -n 1 pq log --lines 1 Get files a pq helper operated on, that resulted in a certain ratio $ while read -r f; do unescaped=\"$(echo -n \"$f\" | python -c 'import shlex; _in=input(); print(shlex.split(_in)[0])')\"; ls -alh \"Favorite Tools.bck/$unescaped\" \"Favorite Tools/$unescaped\"; done < <(pq log -g now --lines 1000 |& grep -E 'Task [0-9]+|\u2248' | grep -B 1 -E '1\\.(0|1|2)' | grep Task | awk -F : '{ print $1 }' | awk '{ print $3 }' | xargs -n 1 pq log --lines 1 |& grep Command | sed \"s#.*32 ##\") -rw-r--r-- 1 florian.sorko staff 27M Feb 2 06:06 'Favorite Tools.bck/./065 Tested Favorite Tools\uff1a Hot Wire Foam Carving Set!.mp4' -rw-r--r-- 1 florian.sorko staff 24M Feb 2 06:37 'Favorite Tools/./065 Tested Favorite Tools\uff1a Hot Wire Foam Carving Set!.mp4' ... Run a command once the queue is empty while true; do queued=\"$(pueue status -j | jq '.tasks[] | select(.status | has(\"Queued\")) | .id' | wc -l)\"; echo \"$(dt): Queued tasks: $queued\"; if [ \"$queued\" -gt 0 ]; then sleep 200; else break; fi; done ; rsync --dry-run xyz","title":"Pueue"},{"location":"pueue/#pueue","text":"https://github.com/Nukesor/pueue","title":"Pueue"},{"location":"pueue/#filtering","text":"","title":"Filtering"},{"location":"pueue/#failure","text":"Default pueue status -g now -- columns=id,status,command status=failed JSON pueue status -g now -j | jq '.tasks[] | select(.status.Done? and (.status.Done.result | type) == \"object\" and (.status.Done.result | has(\"Failed\"))) | .id'","title":"Failure"},{"location":"pueue/#success","text":"Default pueue status -g now -- columns=id,status,command status=failed JSON pueue status -g now -j | jq '.tasks[] | select(.status.Done? and (.status.Done.result | type) == \"string\" and (.status.Done.result == \"Success\")) | .id'","title":"Success"},{"location":"pueue/#queued","text":"Default pueue status -g now -- columns=id,status,command status=queued JSON pueue status -j | jq '.tasks[] | select(.status | has(\"Queued\")) | .id'","title":"Queued"},{"location":"pueue/#running","text":"Default pueue status -g now -- columns=id,status,command status=running JSON pueue status -j | jq '.tasks[] | select(.status | has(\"Running\")) | .id'","title":"Running"},{"location":"pueue/#pq-helpers","text":"","title":"PQ Helpers"},{"location":"pueue/#filtering_1","text":"Find tasks that resulted in an increase in file size pq log -g now --lines 1000 |& grep -E 'Task [0-9]+|\u2248' | grep -B 1 -F '0.' Show filename for tasks that resulted in an increase in file size pq log -g now --lines 1000 |& grep -E 'Task [0-9]+|\u2248' | grep -B 1 -F '0.' | grep Task | awk -F : '{ print $1 }' | awk '{ print $3 }' | xargs -n 1 pq log --lines 1 Get files a pq helper operated on, that resulted in a certain ratio $ while read -r f; do unescaped=\"$(echo -n \"$f\" | python -c 'import shlex; _in=input(); print(shlex.split(_in)[0])')\"; ls -alh \"Favorite Tools.bck/$unescaped\" \"Favorite Tools/$unescaped\"; done < <(pq log -g now --lines 1000 |& grep -E 'Task [0-9]+|\u2248' | grep -B 1 -E '1\\.(0|1|2)' | grep Task | awk -F : '{ print $1 }' | awk '{ print $3 }' | xargs -n 1 pq log --lines 1 |& grep Command | sed \"s#.*32 ##\") -rw-r--r-- 1 florian.sorko staff 27M Feb 2 06:06 'Favorite Tools.bck/./065 Tested Favorite Tools\uff1a Hot Wire Foam Carving Set!.mp4' -rw-r--r-- 1 florian.sorko staff 24M Feb 2 06:37 'Favorite Tools/./065 Tested Favorite Tools\uff1a Hot Wire Foam Carving Set!.mp4' ...","title":"Filtering"},{"location":"pueue/#run-a-command-once-the-queue-is-empty","text":"while true; do queued=\"$(pueue status -j | jq '.tasks[] | select(.status | has(\"Queued\")) | .id' | wc -l)\"; echo \"$(dt): Queued tasks: $queued\"; if [ \"$queued\" -gt 0 ]; then sleep 200; else break; fi; done ; rsync --dry-run xyz","title":"Run a command once the queue is empty"},{"location":"qemu/","text":"Qemu Mount virtual disk image snatched from https://stackoverflow.com/questions/70351250/is-it-possible-to-copy-files-to-qemu-image-without-running-qemu/70360539#70360539 sudo pacman -S nbd qemu-headless # minimum qemu or more... sudo modprobe nbd max_part=8 # check if devices show up now ls -alh /dev/ | grep nbd # open image sudo qemu-nbd -c /dev/nbd1 <some-image-like-qcow2> # check disk partitions -> what to mount? sudo fdisk -l /dev/nbd0 temp=\"$(mktemp -d)\" sudo mount /dev/nbd0 \"$temp\" # e.g. if this is a root partition sudo ls -alh \"$temp\"/root # to umount/disconnet sudo umount \"$temp\" sudo qemu-nbd -d /dev/nbd0 How to start qemu with more than 4 mounted disks snatched from https://unix.stackexchange.com/a/597144 instead of -hde , -hdf etc we have to use -drive file=...qcow2,if=virtio,index=<num>,format=qcow2 Long example: qemu-system-x86_64 -hda mfsbsd-root-disk.qcow2 -hdb mfsbsd-raidz2-disk1.qcow2 -hdc mfsbsd-raidz2-disk2.qcow2 -hdd mfsbsd-raidz2-disk3.qcow2 -drive file=mfsbsd-raidz2-disk4.qcow2,if=virtio,index=4,format=qcow2 -drive file=mfsbsd-raidz2-disk5.qcow2,if=virtio,index=5,format=qcow2 -drive file=mfsbsd-raidz2-disk6.qcow2,if=virtio,index=6,format=qcow2 How to create a qcow2 disk image in qemu snatched from https://serverfault.com/a/731451 qemu-img create -f qcow2 mfsbsd-raidz2-disk6.qcow2 5G How to boot an iso file in qemu ... --boot d --cdrom <iso-file> ... d ... boot from disk Full example: qemu-system-x86_64 --boot d --cdrom mfsbsd-14.0-RELEASE-amd64.iso -smp 2 -m 4096 -hda mfsbsd-root-disk.qcow2 How to specify available memory for guest in qemu -m <value> How to specify multiple virtual cpus in qemu -smp <value> Limit screen resolution for display device Indirect solution: use the lowest amount of vmem possible. Append: -device VGA,vgamem_mb=1","title":"Qemu"},{"location":"qemu/#qemu","text":"","title":"Qemu"},{"location":"qemu/#mount-virtual-disk-image","text":"snatched from https://stackoverflow.com/questions/70351250/is-it-possible-to-copy-files-to-qemu-image-without-running-qemu/70360539#70360539 sudo pacman -S nbd qemu-headless # minimum qemu or more... sudo modprobe nbd max_part=8 # check if devices show up now ls -alh /dev/ | grep nbd # open image sudo qemu-nbd -c /dev/nbd1 <some-image-like-qcow2> # check disk partitions -> what to mount? sudo fdisk -l /dev/nbd0 temp=\"$(mktemp -d)\" sudo mount /dev/nbd0 \"$temp\" # e.g. if this is a root partition sudo ls -alh \"$temp\"/root # to umount/disconnet sudo umount \"$temp\" sudo qemu-nbd -d /dev/nbd0","title":"Mount virtual disk image"},{"location":"qemu/#how-to-start-qemu-with-more-than-4-mounted-disks","text":"snatched from https://unix.stackexchange.com/a/597144 instead of -hde , -hdf etc we have to use -drive file=...qcow2,if=virtio,index=<num>,format=qcow2 Long example: qemu-system-x86_64 -hda mfsbsd-root-disk.qcow2 -hdb mfsbsd-raidz2-disk1.qcow2 -hdc mfsbsd-raidz2-disk2.qcow2 -hdd mfsbsd-raidz2-disk3.qcow2 -drive file=mfsbsd-raidz2-disk4.qcow2,if=virtio,index=4,format=qcow2 -drive file=mfsbsd-raidz2-disk5.qcow2,if=virtio,index=5,format=qcow2 -drive file=mfsbsd-raidz2-disk6.qcow2,if=virtio,index=6,format=qcow2","title":"How to start qemu with more than 4 mounted disks"},{"location":"qemu/#how-to-create-a-qcow2-disk-image-in-qemu","text":"snatched from https://serverfault.com/a/731451 qemu-img create -f qcow2 mfsbsd-raidz2-disk6.qcow2 5G","title":"How to create a qcow2 disk image in qemu"},{"location":"qemu/#how-to-boot-an-iso-file-in-qemu","text":"... --boot d --cdrom <iso-file> ... d ... boot from disk Full example: qemu-system-x86_64 --boot d --cdrom mfsbsd-14.0-RELEASE-amd64.iso -smp 2 -m 4096 -hda mfsbsd-root-disk.qcow2","title":"How to boot an iso file in qemu"},{"location":"qemu/#how-to-specify-available-memory-for-guest-in-qemu","text":"-m <value>","title":"How to specify available memory for guest in qemu"},{"location":"qemu/#how-to-specify-multiple-virtual-cpus-in-qemu","text":"-smp <value>","title":"How to specify multiple virtual cpus in qemu"},{"location":"qemu/#limit-screen-resolution-for-display-device","text":"Indirect solution: use the lowest amount of vmem possible. Append: -device VGA,vgamem_mb=1","title":"Limit screen resolution for display device"},{"location":"rst/","text":"rst - restructured text literal includes and code blocks .. _ghe-ssh-config-label: Heading ~~~~~~~~~~~~~~ Text .. code-block:: bash Include <some-path-to-a-ssh-config-file> Some more text .. literalinclude:: .ssh/config :language: bash internal reference - internal cross-reference Create a ref: .. _some_label: Reference it/use it: Hint : _ leading underscore not present on purpose. :ref:`some_label` external link `Text to display <https://thelink.com>`_","title":"rst - restructured text"},{"location":"rst/#rst-restructured-text","text":"","title":"rst - restructured text"},{"location":"rst/#literal-includes-and-code-blocks","text":".. _ghe-ssh-config-label: Heading ~~~~~~~~~~~~~~ Text .. code-block:: bash Include <some-path-to-a-ssh-config-file> Some more text .. literalinclude:: .ssh/config :language: bash","title":"literal includes and code blocks"},{"location":"rst/#internal-reference-internal-cross-reference","text":"Create a ref: .. _some_label: Reference it/use it: Hint : _ leading underscore not present on purpose. :ref:`some_label`","title":"internal reference - internal cross-reference"},{"location":"rst/#external-link","text":"`Text to display <https://thelink.com>`_","title":"external link"},{"location":"rsync/","text":"Rsync rsync via ssh. custom key file rsync --progress -av -e 'ssh -i ~/.ssh/podman-remote' florian@192.168.0.171:/Users/florian/Movies/totalbiscuit /home/flo/Videos/totalbiscuit to container in kubernetes | rsync to kubernetes pod $ rsync --progress -aOv --blocking-io --rsync-path=/dir/in/container --rsh=\"kubectl exec -n the-namespace pod-name -i -- \" local-file.txt rsync: sending incremental file list local-file.txt 102,727,104 3% 542.99kB/s 1:19:55 check differences (files not directories) # grep -x ... match entire line # $ rsync --exclude '_Some software/' --dry-run -av /run/media/flo/2nd\\ brain/private/ /run/media/flo/3rd\\ brain/private/ | grep -x -vE '.*/' sending incremental file list ~$sere 2000er.docx ~WRL0708.tmp","title":"Rsync"},{"location":"rsync/#rsync","text":"","title":"Rsync"},{"location":"rsync/#rsync-via-ssh-custom-key-file","text":"rsync --progress -av -e 'ssh -i ~/.ssh/podman-remote' florian@192.168.0.171:/Users/florian/Movies/totalbiscuit /home/flo/Videos/totalbiscuit","title":"rsync via ssh. custom key file"},{"location":"rsync/#to-container-in-kubernetes-rsync-to-kubernetes-pod","text":"$ rsync --progress -aOv --blocking-io --rsync-path=/dir/in/container --rsh=\"kubectl exec -n the-namespace pod-name -i -- \" local-file.txt rsync: sending incremental file list local-file.txt 102,727,104 3% 542.99kB/s 1:19:55","title":"to container in kubernetes | rsync to kubernetes pod"},{"location":"rsync/#check-differences-files-not-directories","text":"# grep -x ... match entire line # $ rsync --exclude '_Some software/' --dry-run -av /run/media/flo/2nd\\ brain/private/ /run/media/flo/3rd\\ brain/private/ | grep -x -vE '.*/' sending incremental file list ~$sere 2000er.docx ~WRL0708.tmp","title":"check differences (files not directories)"},{"location":"ruby/","text":"Ruby Programming Language Start debugger snatched from https://stackoverflow.com/a/41604458 Put this into your source code. Like breakpoint() in Python: require 'irb'; binding.irb","title":"Ruby Programming Language"},{"location":"ruby/#ruby-programming-language","text":"","title":"Ruby Programming Language"},{"location":"ruby/#start-debugger","text":"snatched from https://stackoverflow.com/a/41604458 Put this into your source code. Like breakpoint() in Python: require 'irb'; binding.irb","title":"Start debugger"},{"location":"torrent/","text":"Torrent Client Docker image Based on upstream go and anacrolix/torrent . https://github.com/diepfote/dockerfiles/tree/master/torrent Check if update is required less ~/Documents/dockerfiles/torrent/Dockerfile build-container-image torrent Use the torrent lib $ mkdir -p /tmp/data && docker run -w /data -v /tmp/download:/data --rm -it torrent bash root@5f2f1fd4f324:/data# torrent download magnet:?xt=urn:btih:cfc214278888c26cb1516399a304c4f74ff6a810&dn=archlinux-2024.08.01-x86_64.iso [1] 2 root@5f2f1fd4f324:/data# 145.017\u00b5s: getting torrent info for \"infohash:cfc214278888c26cb1516399a304c4f74ff6a810\"","title":"Torrent Client"},{"location":"torrent/#torrent-client","text":"","title":"Torrent Client"},{"location":"torrent/#docker-image","text":"Based on upstream go and anacrolix/torrent . https://github.com/diepfote/dockerfiles/tree/master/torrent","title":"Docker image"},{"location":"torrent/#check-if-update-is-required","text":"less ~/Documents/dockerfiles/torrent/Dockerfile build-container-image torrent","title":"Check if update is required"},{"location":"torrent/#use-the-torrent-lib","text":"$ mkdir -p /tmp/data && docker run -w /data -v /tmp/download:/data --rm -it torrent bash root@5f2f1fd4f324:/data# torrent download magnet:?xt=urn:btih:cfc214278888c26cb1516399a304c4f74ff6a810&dn=archlinux-2024.08.01-x86_64.iso [1] 2 root@5f2f1fd4f324:/data# 145.017\u00b5s: getting torrent info for \"infohash:cfc214278888c26cb1516399a304c4f74ff6a810\"","title":"Use the torrent lib"},{"location":"youtube-dl/","text":"Youtube-dl Special flags --simulate ... Do not download and do not write anything to disk","title":"Youtube-dl"},{"location":"youtube-dl/#youtube-dl","text":"","title":"Youtube-dl"},{"location":"youtube-dl/#special-flags","text":"--simulate ... Do not download and do not write anything to disk","title":"Special flags"},{"location":"assembly/x86_64_notes/","text":"x86 notes calculate a relocatable offset -> instructions 0x109a: lea rcx, [rip + 0x1af] 0x10a1: lea rdi, [rip + 0xd1] 0x10a8: call qword ptr [rip + 0x2f32] 0x10ae: hlt 0x10af: nop -> relocation entries %s: .rela.dyn 0x3de8 0x3df0 0x4048 _ITM_deregisterTMCloneTable 0x3fd8 __libc_start_main 0x3fe0 __gmon_start__ 0x3fe8 _ITM_registerTMCloneTable 0x3ff0 __cxa_finalize 0x3ff8 stdin 0x4050 %s: .rela.plt puts 0x4018 printf 0x4020 fgets 0x4028 strcmp 0x4030 malloc 0x4038 as soon as the processor executes the next instruction the instruction pointer points to the next instruction in line... 0x10a8: call qword ptr [rip + 0x2f32] 0x10ae: hlt Thus [rip + 0x2f32] is equvivalent to [0x10ae + 0x2f32] which evaluates to 0x3fe0 https://medium.com/sector443/python-for-reverse-engineering-1-elf-binaries-e31e92c33732 .got -> Global Offset Table .ptl -> Procedure Linkage Table # https://stackoverflow.com/a/5469334 system@plt --> variable address for system syscall 32 bit register layout +---------+------+------+------+------+------+------+------+------+ | syscall | arg0 | arg1 | arg2 | arg3 | arg4 | arg5 | | | +---------+------+------+------+------+------+------+------+------+ | %eax | %ebx | %ecx | %edx | %esi | %edi | %ebp | %eip | %esp | +---------+------+------+------+------+------+------+------+------+ 64 bit register layout +---------+------+------+------+------+------+------+ | syscall | arg0 | arg1 | arg2 | arg3 | arg4 | arg5 | +---------+------+------+------+------+------+------+ | %rax | %rdi | %rsi | %rdx | %r10 | %r8 | %r9 | +---------+------+------+------+------+------+------+ %rbp - %rip - %rsp 8 - 8 - 8 For 64 bit, the argument needs to be passed into CPU register instead of the stack. ( https://arvandy.com/rop-emporium-split/ ) x64 NASM cheat sheet FROM https://gist.github.com/justinian/385c70347db8aca7ba93e87db90fc9a6#file-linux-x64-nasm-cheatsheet-md Registers | | 64 bit | 32 bit | 16 bit | 8 bit | |-------------------------|--------|--------|--------|-------| | A (accumulator) | `RAX` | `EAX` | `AX` | `AL` | | B (base, addressing) | `RBX` | `EBX` | `BX` | `BL` | | C (counter, iterations) | `RCX` | `ECX` | `CX` | `CL` | | D (data) | `RDX` | `EDX` | `DX` | `DL` | | | `RDI` | `EDI` | `DI` | `DIL` | | | `RSI` | `ESI` | `SI` | `SIL` | | Numbered (n=8..15) | `Rn` | `RnD` | `RnW` | `RnB` | | Stack pointer | `RSP` | `ESP` | `SP` | `SPL` | | Frame pointer | `RBP` | `EBP` | `BP` | `BPL` | As well as XMM0 .. XMM15 for 128 bit floating point numbers. Calling Conventions Put function arguments (first to last) in the following registers (64 bit representations): RDI, RSI, RDX, RCX, R8, R9, then push to stack (in reverse, has to be cleaned up by the caller!) XMM0 - XMM7 for floats Return values are stored in RAX ( int ) or XMM0 ( float ) RBP, RBX, R12, R13, R14, R15 will not be changed by the called function, all others may be Align stack pointer (RSP) to 16 byte, calling pushes 8 bytes! Keep in mind that strings (in C) are 0-terminated Like in a normal C program, the label that is (de facto) called first is main , with the args argc (argcount) in RDI, and the char** argv in RSI (the commandline arguments as in C's main function).","title":"x86 notes"},{"location":"assembly/x86_64_notes/#x86-notes","text":"","title":"x86 notes"},{"location":"assembly/x86_64_notes/#calculate-a-relocatable-offset","text":"-> instructions 0x109a: lea rcx, [rip + 0x1af] 0x10a1: lea rdi, [rip + 0xd1] 0x10a8: call qword ptr [rip + 0x2f32] 0x10ae: hlt 0x10af: nop -> relocation entries %s: .rela.dyn 0x3de8 0x3df0 0x4048 _ITM_deregisterTMCloneTable 0x3fd8 __libc_start_main 0x3fe0 __gmon_start__ 0x3fe8 _ITM_registerTMCloneTable 0x3ff0 __cxa_finalize 0x3ff8 stdin 0x4050 %s: .rela.plt puts 0x4018 printf 0x4020 fgets 0x4028 strcmp 0x4030 malloc 0x4038 as soon as the processor executes the next instruction the instruction pointer points to the next instruction in line... 0x10a8: call qword ptr [rip + 0x2f32] 0x10ae: hlt Thus [rip + 0x2f32] is equvivalent to [0x10ae + 0x2f32] which evaluates to 0x3fe0 https://medium.com/sector443/python-for-reverse-engineering-1-elf-binaries-e31e92c33732 .got -> Global Offset Table .ptl -> Procedure Linkage Table # https://stackoverflow.com/a/5469334 system@plt --> variable address for system syscall","title":"calculate a relocatable offset"},{"location":"assembly/x86_64_notes/#32-bit-register-layout","text":"+---------+------+------+------+------+------+------+------+------+ | syscall | arg0 | arg1 | arg2 | arg3 | arg4 | arg5 | | | +---------+------+------+------+------+------+------+------+------+ | %eax | %ebx | %ecx | %edx | %esi | %edi | %ebp | %eip | %esp | +---------+------+------+------+------+------+------+------+------+","title":"32 bit register layout"},{"location":"assembly/x86_64_notes/#64-bit-register-layout","text":"+---------+------+------+------+------+------+------+ | syscall | arg0 | arg1 | arg2 | arg3 | arg4 | arg5 | +---------+------+------+------+------+------+------+ | %rax | %rdi | %rsi | %rdx | %r10 | %r8 | %r9 | +---------+------+------+------+------+------+------+ %rbp - %rip - %rsp 8 - 8 - 8 For 64 bit, the argument needs to be passed into CPU register instead of the stack. ( https://arvandy.com/rop-emporium-split/ )","title":"64 bit register layout"},{"location":"assembly/x86_64_notes/#x64-nasm-cheat-sheet","text":"FROM https://gist.github.com/justinian/385c70347db8aca7ba93e87db90fc9a6#file-linux-x64-nasm-cheatsheet-md","title":"x64 NASM cheat sheet"},{"location":"assembly/x86_64_notes/#registers","text":"| | 64 bit | 32 bit | 16 bit | 8 bit | |-------------------------|--------|--------|--------|-------| | A (accumulator) | `RAX` | `EAX` | `AX` | `AL` | | B (base, addressing) | `RBX` | `EBX` | `BX` | `BL` | | C (counter, iterations) | `RCX` | `ECX` | `CX` | `CL` | | D (data) | `RDX` | `EDX` | `DX` | `DL` | | | `RDI` | `EDI` | `DI` | `DIL` | | | `RSI` | `ESI` | `SI` | `SIL` | | Numbered (n=8..15) | `Rn` | `RnD` | `RnW` | `RnB` | | Stack pointer | `RSP` | `ESP` | `SP` | `SPL` | | Frame pointer | `RBP` | `EBP` | `BP` | `BPL` | As well as XMM0 .. XMM15 for 128 bit floating point numbers.","title":"Registers"},{"location":"assembly/x86_64_notes/#calling-conventions","text":"Put function arguments (first to last) in the following registers (64 bit representations): RDI, RSI, RDX, RCX, R8, R9, then push to stack (in reverse, has to be cleaned up by the caller!) XMM0 - XMM7 for floats Return values are stored in RAX ( int ) or XMM0 ( float ) RBP, RBX, R12, R13, R14, R15 will not be changed by the called function, all others may be Align stack pointer (RSP) to 16 byte, calling pushes 8 bytes! Keep in mind that strings (in C) are 0-terminated Like in a normal C program, the label that is (de facto) called first is main , with the args argc (argcount) in RDI, and the char** argv in RSI (the commandline arguments as in C's main function).","title":"Calling Conventions"},{"location":"audio/dynamic-range-compression/","text":"Audio Dynamic range compression Mostly snatched from https://medium.com/@jud.dagnall/dynamic-range-compression-for-audio-with-ffmpeg-and-compand-621fe2b1a892 Local copy of the article mkdir -p /tmp/drc && find . ! -name '*dynamic-range-compressed*' -name '*.m4a' -exec bash -c 'new=\"$(basename \"$0\" | sed -r \"s#(\\.m4a$)#_dynamic-range-compressed\\\\1#\")\"; ffmpeg -i \"$0\" -filter_complex \"compand=attacks=0:points=-45/-900|-40/-5|-5/-5|0/-5:gain=3\" /tmp/drc/\"$new\"' {} \\;","title":"Audio"},{"location":"audio/dynamic-range-compression/#audio","text":"","title":"Audio"},{"location":"audio/dynamic-range-compression/#dynamic-range-compression","text":"Mostly snatched from https://medium.com/@jud.dagnall/dynamic-range-compression-for-audio-with-ffmpeg-and-compand-621fe2b1a892 Local copy of the article mkdir -p /tmp/drc && find . ! -name '*dynamic-range-compressed*' -name '*.m4a' -exec bash -c 'new=\"$(basename \"$0\" | sed -r \"s#(\\.m4a$)#_dynamic-range-compressed\\\\1#\")\"; ffmpeg -i \"$0\" -filter_complex \"compand=attacks=0:points=-45/-900|-40/-5|-5/-5|0/-5:gain=3\" /tmp/drc/\"$new\"' {} \\;","title":"Dynamic range compression"},{"location":"cmus/cmus_adding_music/","text":"Cmus Adding music @h1 Step 2: Adding Music Press *5* to switch to the file-browser view so we can add some music. You should see something like this: @pre +---------------------------------------------------------------------+ | Browser - /home/jasonwoof | | ../ | | Desktop/ | | MySqueak/ | | audio-projects/ | | audio/ | | bin/ | | config/ | | | | . 00:00 - 00:00 vol: 100 all from library | C | | | +---------------------------------------------------------------------+ @endpre Now, use the arrow keys, Enter and Backspace to navigate to where you have audio files stored. To add music to your cmus library, use the arrow keys to highlight a file or folder, and press *a*. When you press *a* cmus will move you to the next line down (so that it is easy to add a bunch of files/folders in a row) and start adding the file/folder you pressed *a* on to your library. This can take a while if you added a folder with a lot in it. As files are added, you will see the second time in the bottom right go up. This is the total duration of all the music in the cmus library.","title":"Cmus Adding music"},{"location":"cmus/cmus_adding_music/#cmus-adding-music","text":"@h1 Step 2: Adding Music Press *5* to switch to the file-browser view so we can add some music. You should see something like this: @pre +---------------------------------------------------------------------+ | Browser - /home/jasonwoof | | ../ | | Desktop/ | | MySqueak/ | | audio-projects/ | | audio/ | | bin/ | | config/ | | | | . 00:00 - 00:00 vol: 100 all from library | C | | | +---------------------------------------------------------------------+ @endpre Now, use the arrow keys, Enter and Backspace to navigate to where you have audio files stored. To add music to your cmus library, use the arrow keys to highlight a file or folder, and press *a*. When you press *a* cmus will move you to the next line down (so that it is easy to add a bunch of files/folders in a row) and start adding the file/folder you pressed *a* on to your library. This can take a while if you added a folder with a lot in it. As files are added, you will see the second time in the bottom right go up. This is the total duration of all the music in the cmus library.","title":"Cmus Adding music"},{"location":"cmus/cmus_shortcuts/","text":"Cmus shortcuts Common Context q quit -i ^C echo Type :quit<enter> to exit cmus. I echo {} b player-next c player-pause x player-play z player-prev v player-stop ^L refresh n search-next N search-prev . seek +1m l, right seek +5 , seek -1m h, left seek -5 m toggle aaa_mode C toggle continue M toggle play_library o toggle play_sorted r toggle repeat ^R toggle repeat_current t toggle show_remaining_time s toggle shuffle F push filter<space> L push live-filter<space> u update-cache 1 view tree 2 view sorted 3 view playlist 4 view queue 5 view browser 6 view filters 7 view settings ! push shell<space> ] vol +0 +1 [ vol +1 +0 +, = vol +10% } vol -0 -1 { vol -1 -0 - vol -10% enter, mlb_click_selected win-activate E win-add-Q a win-add-l y win-add-p e win-add-q G, end win-bottom down, j, mouse_scroll_down win-down p win-mv-after P win-mv-before tab win-next ^F, page_down win-page-down ^B, page_up win-page-up ^E win-scroll-down ^Y win-scroll-up D, delete win-remove i win-sel-cur space win-toggle g, home win-top k, up, mouse_scroll_up win-up","title":"Cmus shortcuts"},{"location":"cmus/cmus_shortcuts/#cmus-shortcuts","text":"Common Context q quit -i ^C echo Type :quit<enter> to exit cmus. I echo {} b player-next c player-pause x player-play z player-prev v player-stop ^L refresh n search-next N search-prev . seek +1m l, right seek +5 , seek -1m h, left seek -5 m toggle aaa_mode C toggle continue M toggle play_library o toggle play_sorted r toggle repeat ^R toggle repeat_current t toggle show_remaining_time s toggle shuffle F push filter<space> L push live-filter<space> u update-cache 1 view tree 2 view sorted 3 view playlist 4 view queue 5 view browser 6 view filters 7 view settings ! push shell<space> ] vol +0 +1 [ vol +1 +0 +, = vol +10% } vol -0 -1 { vol -1 -0 - vol -10% enter, mlb_click_selected win-activate E win-add-Q a win-add-l y win-add-p e win-add-q G, end win-bottom down, j, mouse_scroll_down win-down p win-mv-after P win-mv-before tab win-next ^F, page_down win-page-down ^B, page_up win-page-up ^E win-scroll-down ^Y win-scroll-up D, delete win-remove i win-sel-cur space win-toggle g, home win-top k, up, mouse_scroll_up win-up","title":"Cmus shortcuts"},{"location":"darwin/automator/","text":"Automator files live in ~/Library/Services as <name>.workflow","title":"Automator"},{"location":"darwin/automator/#automator","text":"files live in ~/Library/Services as <name>.workflow","title":"Automator"},{"location":"darwin/container-or-linux-vm-video-and-audio-playback/","text":"Container or Linux VM video and audio playback XQuartz and pulseaudio need to be installed and running. I assume you already started XQuartz. For XQuartz be sure to set Authenticate connections in the Security Tab, then run xhost + <local-ip> to allow connections from interface en0. Articles I based this on: https://stackoverflow.com/questions/40136606/how-to-expose-audio-from-docker-container-to-a-mac https://devops.datenkollektiv.de/running-a-docker-soundbox-on-mac.html https://github.com/mviereck/x11docker/wiki/Container-sound:-ALSA-or-Pulseaudio If you experience poor video and audio performance: https://www.videoconverterfactory.com/tips/vlc-lagging.html Test video Run on Mac $ local-ip # interface en0 192.168.0.121 Run in Container or VM $ ls -alh /tmp/.X11-unix/ total 4.0K drwxrwxrwt 1 root root 96 Jul 6 00:29 . drwxrwxrwt 11 root root 280 Jul 6 00:22 .. srwxrwxrwx 1 lima root 0 Jul 6 00:29 X2 $ export DISPLAY=192.168.0.121:2 # lima vm, second monitor as this dir contains `X2` # check if a new XQuartz window appears $ zathura Use video and audio Run on Mac $ pulseaudio --load=module-native-protocol-tcp --exit-idle-time=500 --daemon $ pulseaudio --check -v ..Daemon running.. $ local-ip # interface en0 192.168.0.121 Run in Container or VM be sure to do the previous step $ export PULSE_SERVER=192.168.0.121 # check for audio and video device errors $ vlc","title":"Container or Linux VM video and audio playback"},{"location":"darwin/container-or-linux-vm-video-and-audio-playback/#container-or-linux-vm-video-and-audio-playback","text":"XQuartz and pulseaudio need to be installed and running. I assume you already started XQuartz. For XQuartz be sure to set Authenticate connections in the Security Tab, then run xhost + <local-ip> to allow connections from interface en0. Articles I based this on: https://stackoverflow.com/questions/40136606/how-to-expose-audio-from-docker-container-to-a-mac https://devops.datenkollektiv.de/running-a-docker-soundbox-on-mac.html https://github.com/mviereck/x11docker/wiki/Container-sound:-ALSA-or-Pulseaudio If you experience poor video and audio performance: https://www.videoconverterfactory.com/tips/vlc-lagging.html","title":"Container or Linux VM video and audio playback"},{"location":"darwin/container-or-linux-vm-video-and-audio-playback/#test-video","text":"Run on Mac $ local-ip # interface en0 192.168.0.121 Run in Container or VM $ ls -alh /tmp/.X11-unix/ total 4.0K drwxrwxrwt 1 root root 96 Jul 6 00:29 . drwxrwxrwt 11 root root 280 Jul 6 00:22 .. srwxrwxrwx 1 lima root 0 Jul 6 00:29 X2 $ export DISPLAY=192.168.0.121:2 # lima vm, second monitor as this dir contains `X2` # check if a new XQuartz window appears $ zathura","title":"Test video"},{"location":"darwin/container-or-linux-vm-video-and-audio-playback/#use-video-and-audio","text":"Run on Mac $ pulseaudio --load=module-native-protocol-tcp --exit-idle-time=500 --daemon $ pulseaudio --check -v ..Daemon running.. $ local-ip # interface en0 192.168.0.121 Run in Container or VM be sure to do the previous step $ export PULSE_SERVER=192.168.0.121 # check for audio and video device errors $ vlc","title":"Use video and audio"},{"location":"darwin/disk-management/","text":"Mac OS Disk Management How to list available disks in Mac OS diskutil list","title":"Mac OS Disk Management"},{"location":"darwin/disk-management/#mac-os-disk-management","text":"","title":"Mac OS Disk Management"},{"location":"darwin/disk-management/#how-to-list-available-disks-in-mac-os","text":"diskutil list","title":"How to list available disks in Mac OS"},{"location":"darwin/dns-via-cli/","text":"Mac OS DNS Settings Set DNS servers networksetup -setdnsservers Wi-Fi <ip> <ip> Remove all DNS server entries networksetup -setdnsservers Empty","title":"Mac OS DNS Settings"},{"location":"darwin/dns-via-cli/#mac-os-dns-settings","text":"","title":"Mac OS DNS Settings"},{"location":"darwin/dns-via-cli/#set-dns-servers","text":"networksetup -setdnsservers Wi-Fi <ip> <ip>","title":"Set DNS servers"},{"location":"darwin/dns-via-cli/#remove-all-dns-server-entries","text":"networksetup -setdnsservers Empty","title":"Remove all DNS server entries"},{"location":"darwin/homebrew/","text":"Homebrew install previous version of pkg cd \"$(brew --repo homebrew/core)\" # find commit & reset to commit git find-commits-changed-file -- Formula/poetry.rb git reset --hard 1b9787d7c5 # build from source brew install --build-from-source poetry # reset homebrew repo git fetch origin master git reset --hard origin/master","title":"Homebrew"},{"location":"darwin/homebrew/#homebrew","text":"","title":"Homebrew"},{"location":"darwin/homebrew/#install-previous-version-of-pkg","text":"cd \"$(brew --repo homebrew/core)\" # find commit & reset to commit git find-commits-changed-file -- Formula/poetry.rb git reset --hard 1b9787d7c5 # build from source brew install --build-from-source poetry # reset homebrew repo git fetch origin master git reset --hard origin/master","title":"install previous version of pkg"},{"location":"darwin/lima/","text":"Docker Desktop replacement - Lima VM access macOS localhost | mac OS host DNS name snatched from https://github.com/lima-vm/lima/discussions/389#discussioncomment-1598213 host.lima.internal , Docker Desktop uses host.docker.internal","title":"Docker Desktop replacement - Lima VM"},{"location":"darwin/lima/#docker-desktop-replacement-lima-vm","text":"","title":"Docker Desktop replacement - Lima VM"},{"location":"darwin/lima/#access-macos-localhost-mac-os-host-dns-name","text":"snatched from https://github.com/lima-vm/lima/discussions/389#discussioncomment-1598213 host.lima.internal , Docker Desktop uses host.docker.internal","title":"access macOS localhost | mac OS host DNS name"},{"location":"darwin/mds/","text":"MDS - Metadata stores used by spotlight Disable spotlight search indexing - disable mds snatched command from https://apple.stackexchange.com/questions/388882/how-to-disable-spotlight-and-mds-stores-on-mac-os-catalina and man mdutil mds re-indexes regularly and performance takes a hit. instead of using spotlight to start applications I use launchpad now. sidenote: if you disable it, spotlight will not know about any native 3rd party app you have install. sudo mdutil -a -i off","title":"MDS - Metadata stores used by spotlight"},{"location":"darwin/mds/#mds-metadata-stores-used-by-spotlight","text":"","title":"MDS - Metadata stores used by spotlight"},{"location":"darwin/mds/#disable-spotlight-search-indexing-disable-mds","text":"snatched command from https://apple.stackexchange.com/questions/388882/how-to-disable-spotlight-and-mds-stores-on-mac-os-catalina and man mdutil mds re-indexes regularly and performance takes a hit. instead of using spotlight to start applications I use launchpad now. sidenote: if you disable it, spotlight will not know about any native 3rd party app you have install. sudo mdutil -a -i off","title":"Disable spotlight search indexing - disable mds"},{"location":"darwin/okd-3.11-cli-client/","text":"openshift-cli v3.11.0 | okd-cli v3.11.0 git clone --depth 1 --branch v3.11.0 https://github.com/openshift/origin.git OS_ONLY_BUILD_PLATFORMS=darwin/amd64 WHAT=cmd/oc GOFLAGS=-v OS_GIT_MAJOR=fyou OS_GIT_MINOR=youtoo OS_GIT_VERSION=youknowwhatiscoming OS_GIT_COMMIT=well KUBE_GIT_MAJOR=a KUBE_GIT_MINOR=b KUBE_GIT_COMMIT=c KUBE_GIT_VERSION=d OS_OUTPUT_GOPATH=1 make all","title":"openshift-cli v3.11.0 | okd-cli v3.11.0"},{"location":"darwin/okd-3.11-cli-client/#openshift-cli-v3110-okd-cli-v3110","text":"git clone --depth 1 --branch v3.11.0 https://github.com/openshift/origin.git OS_ONLY_BUILD_PLATFORMS=darwin/amd64 WHAT=cmd/oc GOFLAGS=-v OS_GIT_MAJOR=fyou OS_GIT_MINOR=youtoo OS_GIT_VERSION=youknowwhatiscoming OS_GIT_COMMIT=well KUBE_GIT_MAJOR=a KUBE_GIT_MINOR=b KUBE_GIT_COMMIT=c KUBE_GIT_VERSION=d OS_OUTPUT_GOPATH=1 make all","title":"openshift-cli v3.11.0 | okd-cli v3.11.0"},{"location":"darwin/privacy-settings/","text":"Mac OS Privacy Settings https://github.com/dideler/setup-macos/blob/master/settings/os-defaults > https://github.com/drduh/macOS-Security-and-Privacy-Guide#additional-resources","title":"Mac OS Privacy Settings"},{"location":"darwin/privacy-settings/#mac-os-privacy-settings","text":"https://github.com/dideler/setup-macos/blob/master/settings/os-defaults > https://github.com/drduh/macOS-Security-and-Privacy-Guide#additional-resources","title":"Mac OS Privacy Settings"},{"location":"darwin/remote-login/","text":"Remote login Taken from https://osxdaily.com/2016/08/16/enable-ssh-mac-command-line/ Can be enabled and disabled via the cli: systemsetup -f -setremotelogin on systemsetup -f -setremotelogin off Get current status via: systemsetup -getremotelogin","title":"Remote login"},{"location":"darwin/remote-login/#remote-login","text":"Taken from https://osxdaily.com/2016/08/16/enable-ssh-mac-command-line/ Can be enabled and disabled via the cli: systemsetup -f -setremotelogin on systemsetup -f -setremotelogin off Get current status via: systemsetup -getremotelogin","title":"Remote login"},{"location":"darwin/screensaver/","text":"Mac OS Tahoe Set screensaver to loop through pictures in a folder snatched from https://www.perplexity.ai/search/set-screensaver-to-picture-fol-PchsI0BUS6GgVtuQqLhECw and https://www.hexnode.com/mobile-device-management/help/script-to-set-screen-saver-on-mac/ $ defaults -currentHost write com.apple.ScreenSaverPhotoChooser SelectedFolderPath -string ~/Pictures/screensaver/ # use a custom folder as the source = 4 $ defaults -currentHost write com.apple.ScreenSaverPhotoChooser SelectedSource -int 4","title":"Mac OS Tahoe"},{"location":"darwin/screensaver/#mac-os-tahoe","text":"","title":"Mac OS Tahoe"},{"location":"darwin/screensaver/#set-screensaver-to-loop-through-pictures-in-a-folder","text":"snatched from https://www.perplexity.ai/search/set-screensaver-to-picture-fol-PchsI0BUS6GgVtuQqLhECw and https://www.hexnode.com/mobile-device-management/help/script-to-set-screen-saver-on-mac/ $ defaults -currentHost write com.apple.ScreenSaverPhotoChooser SelectedFolderPath -string ~/Pictures/screensaver/ # use a custom folder as the source = 4 $ defaults -currentHost write com.apple.ScreenSaverPhotoChooser SelectedSource -int 4","title":"Set screensaver to loop through pictures in a folder"},{"location":"darwin/tmutil-time-machine-exclusions/","text":"Tmutil exlcusions | Time machine exclusions set -x; sudo tmutil addexclusion -p <path1> <path2>; set +x","title":"Tmutil exlcusions | Time machine exclusions"},{"location":"darwin/tmutil-time-machine-exclusions/#tmutil-exlcusions-time-machine-exclusions","text":"set -x; sudo tmutil addexclusion -p <path1> <path2>; set +x","title":"Tmutil exlcusions | Time machine exclusions"},{"location":"darwin/yabai/","text":"Yabai Scripting-addition Ventura Partially disable System Integrity Protection More information at https://github.com/koekeishiya/yabai/wiki/Disabling-System-Integrity-Protection & https://github.com/koekeishiya/yabai/issues/1158 Run sudo nvram boot-args=-arm64e_preview_abi Long-press power button until \"Loading boot options\" appears. Select \"Options\" to enter Recovery Mode text csrutil enable --without fs --without debug --without nvram Then restart Load scripting-addition Put this into /etc/sudoers %admin ALL = NOPASSWD: /opt/homebrew/bin/yabai --load-sa Put this at the top of your ~/.yabairc . sudo yabai --load-sa yabai -m signal --add event=dock_did_restart action=\"sudo yabai --load-sa\"","title":"Yabai"},{"location":"darwin/yabai/#yabai","text":"","title":"Yabai"},{"location":"darwin/yabai/#scripting-addition","text":"","title":"Scripting-addition"},{"location":"darwin/yabai/#ventura","text":"","title":"Ventura"},{"location":"darwin/yabai/#partially-disable-system-integrity-protection","text":"More information at https://github.com/koekeishiya/yabai/wiki/Disabling-System-Integrity-Protection & https://github.com/koekeishiya/yabai/issues/1158 Run sudo nvram boot-args=-arm64e_preview_abi Long-press power button until \"Loading boot options\" appears. Select \"Options\" to enter Recovery Mode text csrutil enable --without fs --without debug --without nvram Then restart","title":"Partially disable System Integrity Protection"},{"location":"darwin/yabai/#load-scripting-addition","text":"Put this into /etc/sudoers %admin ALL = NOPASSWD: /opt/homebrew/bin/yabai --load-sa Put this at the top of your ~/.yabairc . sudo yabai --load-sa yabai -m signal --add event=dock_did_restart action=\"sudo yabai --load-sa\"","title":"Load scripting-addition"},{"location":"darwin/transfer/firefox/","text":"Firefox Transfer Profile Copy both ~/Library/Caches/Firefox and ~/Library/Application\\ Support/Firefox to your new laptop. Only then open Firefox. If one of the folders exists in the destination, remove it first.","title":"Firefox"},{"location":"darwin/transfer/firefox/#firefox","text":"","title":"Firefox"},{"location":"darwin/transfer/firefox/#transfer-profile","text":"Copy both ~/Library/Caches/Firefox and ~/Library/Application\\ Support/Firefox to your new laptop. Only then open Firefox. If one of the folders exists in the destination, remove it first.","title":"Transfer Profile"},{"location":"data-extraction/install-croc/","text":"siphon out data Install croc $ curl -s https://getcroc.schollz.com > file $ chmod +x file ./file -p . # install croc to current dir","title":"siphon out data"},{"location":"data-extraction/install-croc/#siphon-out-data","text":"","title":"siphon out data"},{"location":"data-extraction/install-croc/#install-croc","text":"$ curl -s https://getcroc.schollz.com > file $ chmod +x file ./file -p . # install croc to current dir","title":"Install croc"},{"location":"dns/","text":"DNS negative performance impact of ndots:N This is a short form of the original If traffic is external and there are several lookup domains ndots:N will cause high amounts of DNS traffic before domains are resolved correctly. ndots:5 will result in 4 local lookups for this example config: # /etc/resolv.conf nameserver 100.64.0.10 search namespace.svc.cluster.local svc.cluster.local cluster.local","title":"DNS"},{"location":"dns/#dns","text":"","title":"DNS"},{"location":"dns/#negative-performance-impact-of-ndotsn","text":"This is a short form of the original If traffic is external and there are several lookup domains ndots:N will cause high amounts of DNS traffic before domains are resolved correctly. ndots:5 will result in 4 local lookups for this example config: # /etc/resolv.conf nameserver 100.64.0.10 search namespace.svc.cluster.local svc.cluster.local cluster.local","title":"negative performance impact of ndots:N"},{"location":"dns/drill/","text":"Drill Short drill -Q name Trace drill -T name Verbose enough to show the request drill -V 5 name","title":"Drill"},{"location":"dns/drill/#drill","text":"","title":"Drill"},{"location":"dns/drill/#short","text":"drill -Q name","title":"Short"},{"location":"dns/drill/#trace","text":"drill -T name","title":"Trace"},{"location":"dns/drill/#verbose-enough-to-show-the-request","text":"drill -V 5 name","title":"Verbose enough to show the request"},{"location":"fish/argument-parsing/","text":"Fish Argument Parsing # https://nicolas-van.github.io/programming-with-fish-shell#parsing-command-line-arguments set args (getopt -s sh abc: $argv)","title":"Fish"},{"location":"fish/argument-parsing/#fish","text":"","title":"Fish"},{"location":"fish/argument-parsing/#argument-parsing","text":"# https://nicolas-van.github.io/programming-with-fish-shell#parsing-command-line-arguments set args (getopt -s sh abc: $argv)","title":"Argument Parsing"},{"location":"gdb/cgdb_commands_shortcuts/","text":"3.1 Commands available during CGDB mode When you are in the source window, you are implicitly in \"CGDB mode\". All of the below commands are available during this mode. This mode is primarily available for the user to view the current source file, search it, or switch to a different mode. `cgdbmodekey' Puts the user into command mode. However, you are already in this mode. This is defaulted to the <ESC> key. `i' Puts the user into \"GDB mode\". `I' Puts the user into \"TTY mode\". `T' Opens a window to give input to the debugged program. `Ctrl-T' Opens a new tty for the debugged program. `k' `up arrow' Move up a line. `j' `down arrow' Move down a line. `h' `left arrow' Move left a line. `l' `right arrow' Move right a line. `Ctrl-b' `page up' Move up a page. `Ctrl-u' Move up 1/2 a page. `Ctrl-f' `page down' Move down a page. `Ctrl-d' Move down 1/2 a page. `gg' Move to the top of file. `G' Move to the bottom of file. `/' search from current cursor position. `?' reverse search from current cursor position. `n' next forward search. `N' next reverse search. `o' open the file dialog. `spacebar' Sets a breakpoint at the current line number. `t' Sets a temporary breakpoint at the current line number. `-' Shrink source window 1 line. `=' Grow source window 1 line. `_' Shrink source window 25% (or, shrink tty window 1 line, if visible). `+' Grow source window 25% (or, grow tty window 1 line, if visible). `Ctrl-l' Clear and redraw the screen. `F5' Send a run command to GDB. `F6' Send a continue command to GDB. `F7' Send a finish command to GDB. `F8' Send a next command to GDB. `F10' Send a step command to GDB.","title":"3.1 Commands available during CGDB mode"},{"location":"gdb/cgdb_commands_shortcuts/#31-commands-available-during-cgdb-mode","text":"When you are in the source window, you are implicitly in \"CGDB mode\". All of the below commands are available during this mode. This mode is primarily available for the user to view the current source file, search it, or switch to a different mode. `cgdbmodekey' Puts the user into command mode. However, you are already in this mode. This is defaulted to the <ESC> key. `i' Puts the user into \"GDB mode\". `I' Puts the user into \"TTY mode\". `T' Opens a window to give input to the debugged program. `Ctrl-T' Opens a new tty for the debugged program. `k' `up arrow' Move up a line. `j' `down arrow' Move down a line. `h' `left arrow' Move left a line. `l' `right arrow' Move right a line. `Ctrl-b' `page up' Move up a page. `Ctrl-u' Move up 1/2 a page. `Ctrl-f' `page down' Move down a page. `Ctrl-d' Move down 1/2 a page. `gg' Move to the top of file. `G' Move to the bottom of file. `/' search from current cursor position. `?' reverse search from current cursor position. `n' next forward search. `N' next reverse search. `o' open the file dialog. `spacebar' Sets a breakpoint at the current line number. `t' Sets a temporary breakpoint at the current line number. `-' Shrink source window 1 line. `=' Grow source window 1 line. `_' Shrink source window 25% (or, shrink tty window 1 line, if visible). `+' Grow source window 25% (or, grow tty window 1 line, if visible). `Ctrl-l' Clear and redraw the screen. `F5' Send a run command to GDB. `F6' Send a continue command to GDB. `F7' Send a finish command to GDB. `F8' Send a next command to GDB. `F10' Send a step command to GDB.","title":"3.1 Commands available during CGDB mode"},{"location":"gdb/coredump/","text":"GDB analyze coredumps Export core file coredumpctl list coredumpctl dump --output /tmp/coredump 71155 Show full stack trace gdb a.out -c /tmp/coredump (gdb) bt full #0 0x0000000000000000 in ?? () No symbol table info available. #1 0x0000000000201edf in test_sorting (numbers=0x1a422a0, count=5, sort=0x0, cmp=0x201e10 <reverse_order>) at ex18.c:99 idx = 0 sorted = 0x1a422c0 data = 0x201e10 <reverse_order> \"UH\\211\\345\\211}\\374\\211u\\370\\213E\\370+E\\374\\211E\\364\\017\\220\\3004\\377\\250\\001\\017\\205\\005\" #2 0x00000000002022da in main (argc=6, argv=0x7ffc60229ec8) at ex18.c:139 count = 5 idx = 5 inputs = 0x7ffc60229ed0 numbers = 0x1a422a0 (gdb) up 1 #1 0x0000000000201edf in test_sorting (numbers=0x1a422a0, count=5, sort=0x0, cmp=0x201e10 <reverse_order>) at ex18.c:99 99 int *sorted = sort(numbers, count, cmp); (gdb) up 1 #2 0x00000000002022da in main (argc=6, argv=0x7ffc60229ec8) at ex18.c:139 139 test_sorting(numbers, count, NULL, reverse_order); More at: https://stackoverflow.com/a/8306805 https://stackoverflow.com/a/22711917 Examining the symbol table","title":"GDB analyze coredumps"},{"location":"gdb/coredump/#gdb-analyze-coredumps","text":"","title":"GDB analyze coredumps"},{"location":"gdb/coredump/#export-core-file","text":"coredumpctl list coredumpctl dump --output /tmp/coredump 71155","title":"Export core file"},{"location":"gdb/coredump/#show-full-stack-trace","text":"gdb a.out -c /tmp/coredump (gdb) bt full #0 0x0000000000000000 in ?? () No symbol table info available. #1 0x0000000000201edf in test_sorting (numbers=0x1a422a0, count=5, sort=0x0, cmp=0x201e10 <reverse_order>) at ex18.c:99 idx = 0 sorted = 0x1a422c0 data = 0x201e10 <reverse_order> \"UH\\211\\345\\211}\\374\\211u\\370\\213E\\370+E\\374\\211E\\364\\017\\220\\3004\\377\\250\\001\\017\\205\\005\" #2 0x00000000002022da in main (argc=6, argv=0x7ffc60229ec8) at ex18.c:139 count = 5 idx = 5 inputs = 0x7ffc60229ed0 numbers = 0x1a422a0 (gdb) up 1 #1 0x0000000000201edf in test_sorting (numbers=0x1a422a0, count=5, sort=0x0, cmp=0x201e10 <reverse_order>) at ex18.c:99 99 int *sorted = sort(numbers, count, cmp); (gdb) up 1 #2 0x00000000002022da in main (argc=6, argv=0x7ffc60229ec8) at ex18.c:139 139 test_sorting(numbers, count, NULL, reverse_order); More at: https://stackoverflow.com/a/8306805 https://stackoverflow.com/a/22711917 Examining the symbol table","title":"Show full stack trace"},{"location":"gdb/gdb_cheat-sheet/","text":"GDB commands by function - simple guide Important commands start with a *. Startup % gdb -help print startup help, show switches *% gdb object normal debug *% gdb object core core debug (must specify core file) %% gdb object pid attach to running process % gdb use file command to load object Help *(gdb) help list command classes (gdb) help running list commands in one command class (gdb) help run bottom-level help for a command \"run\" (gdb) help info list info commands (running program state) (gdb) help info line help for a particular info command (gdb) help show list show commands (gdb state) (gdb) help show commands specific help for a show command Breakpoints *(gdb) break main set a breakpoint on a function *(gdb) break 101 set a breakpoint on a line number *(gdb) break basic.c:101 set breakpoint at file and line (or function) *(gdb) info breakpoints show breakpoints *(gdb) delete 1 delete a breakpoint by number (gdb) delete delete all breakpoints (prompted) (gdb) clear delete breakpoints at current line (gdb) clear function delete breakpoints at function (gdb) clear line delete breakpoints at line (gdb) disable 2 turn a breakpoint off, but don't remove it (gdb) enable 2 turn disabled breakpoint back on (gdb) tbreak function|line set a temporary breakpoint (gdb) commands break-no ... end set gdb commands with breakpoint (gdb) ignore break-no count ignore bpt N-1 times before activation (gdb) condition break-no expression break only if condition is true (gdb) condition 2 i == 20 example: break on breakpoint 2 if i equals 20 (gdb) watch expression set software watchpoint on variable (gdb) info watchpoints show current watchpoints Running the program *(gdb) run run the program with current arguments *(gdb) run args redirection run with args and redirection (gdb) set args args... set arguments for run (gdb) show args show current arguments to run *(gdb) cont continue the program *(gdb) step single step the program; step into functions (gdb) step count singlestep \\fIcount\\fR times *(gdb) next step but step over functions (gdb) next count next \\fIcount\\fR times *(gdb) CTRL-C actually SIGINT, stop execution of current program *(gdb) attach process-id attach to running program *(gdb) detach detach from running program *(gdb) finish finish current function's execution (gdb) kill kill current executing program Stack backtrace *(gdb) bt print stack backtrace (gdb) frame show current execution position (gdb) up move up stack trace (towards main) (gdb) down move down stack trace (away from main) *(gdb) info locals print automatic variables in frame (gdb) info args print function parameters Browsing source *(gdb) list 101 list 10 lines around line 101 *(gdb) list 1,10 list lines 1 to 10 *(gdb) list main list lines around function *(gdb) list basic.c:main list from another file basic.c *(gdb) list - list previous 10 lines (gdb) list *0x22e4 list source at address (gdb) cd dir change current directory to \\fIdir\\fR (gdb) pwd print working directory (gdb) search regexpr forward current for regular expression (gdb) reverse-search regexpr backward search for regular expression (gdb) dir dirname add directory to source path (gdb) dir reset source path to nothing (gdb) show directories show source path Browsing Data *(gdb) print expression print expression, added to value history *(gdb) print/x expressionR print in hex (gdb) print array[i]@count artificial array - print array range (gdb) print $ print last value (gdb) print *$->next print thru list (gdb) print $1 print value 1 from value history (gdb) print ::gx force scope to be global (gdb) print 'basic.c'::gx global scope in named file (>=4.6) (gdb) print/x &main print address of function (gdb) x/countFormatSize address low-level examine command (gdb) x/x &gx print gx in hex (gdb) x/4wx &main print 4 longs at start of \\fImain\\fR in hex (gdb) x/gf &gd1 print double (gdb) help x show formats for x *(gdb) info locals print local automatics only (gdb) info functions regexp print function names (gdb) info variables regexp print global variable names *(gdb) ptype name print type definition (gdb) whatis expression print type of expression *(gdb) set variable = expression assign value (gdb) display expression display expression result at stop (gdb) undisplay delete displays (gdb) info display show displays (gdb) show values print value history (>= gdb 4.0) (gdb) info history print value history (gdb 3.5) Object File manipulation (gdb) file object load new file for debug (sym+exec) (gdb) file discard sym+exec file info (gdb) symbol-file object load only symbol table (gdb) exec-file object specify object to run (not sym-file) (gdb) core-file core post-mortem debugging Signal Control (gdb) info signals print signal setup (gdb) handle signo actions set debugger actions for signal (gdb) handle INT print print message when signal occurs (gdb) handle INT noprint don't print message (gdb) handle INT stop stop program when signal occurs (gdb) handle INT nostop don't stop program (gdb) handle INT pass allow program to receive signal (gdb) handle INT nopass debugger catches signal; program doesn't (gdb) signal signo continue and send signal to program (gdb) signal 0 continue and send no signal to program Machine-level Debug (gdb) info registers print registers sans floats (gdb) info all-registers print all registers (gdb) print/x $pc print one register (gdb) stepi single step at machine level (gdb) si single step at machine level (gdb) nexti single step (over functions) at machine level (gdb) ni single step (over functions) at machine level (gdb) display/i $pc print current instruction in display (gdb) x/x &gx print variable gx in hex (gdb) info line 22 print addresses for object code for line 22 (gdb) info line *0x2c4e print line number of object code at address (gdb) x/10i main disassemble first 10 instructions in \\fImain\\fR (gdb) disassemble addr dissassemble code for function around addr History Display (gdb) show commands print command history (>= gdb 4.0) (gdb) info editing print command history (gdb 3.5) (gdb) ESC-CTRL-J switch to vi edit mode from emacs edit mode (gdb) set history expansion on turn on c-shell like history (gdb) break class::member set breakpoint on class member. may get menu (gdb) list class::member list member in class (gdb) ptype class print class members (gdb) print *this print contents of this pointer (gdb) rbreak regexpr useful for breakpoint on overloaded member name Miscellaneous (gdb) define command ... end define user command *(gdb) RETURN repeat last command *(gdb) shell command args execute shell command *(gdb) source file load gdb commands from file *(gdb) quit quit gdb","title":"GDB commands by function - simple guide"},{"location":"gdb/gdb_cheat-sheet/#gdb-commands-by-function-simple-guide","text":"Important commands start with a *.","title":"GDB commands by function - simple guide"},{"location":"gdb/gdb_cheat-sheet/#startup","text":"% gdb -help print startup help, show switches *% gdb object normal debug *% gdb object core core debug (must specify core file) %% gdb object pid attach to running process % gdb use file command to load object","title":"Startup"},{"location":"gdb/gdb_cheat-sheet/#help","text":"*(gdb) help list command classes (gdb) help running list commands in one command class (gdb) help run bottom-level help for a command \"run\" (gdb) help info list info commands (running program state) (gdb) help info line help for a particular info command (gdb) help show list show commands (gdb state) (gdb) help show commands specific help for a show command","title":"Help"},{"location":"gdb/gdb_cheat-sheet/#breakpoints","text":"*(gdb) break main set a breakpoint on a function *(gdb) break 101 set a breakpoint on a line number *(gdb) break basic.c:101 set breakpoint at file and line (or function) *(gdb) info breakpoints show breakpoints *(gdb) delete 1 delete a breakpoint by number (gdb) delete delete all breakpoints (prompted) (gdb) clear delete breakpoints at current line (gdb) clear function delete breakpoints at function (gdb) clear line delete breakpoints at line (gdb) disable 2 turn a breakpoint off, but don't remove it (gdb) enable 2 turn disabled breakpoint back on (gdb) tbreak function|line set a temporary breakpoint (gdb) commands break-no ... end set gdb commands with breakpoint (gdb) ignore break-no count ignore bpt N-1 times before activation (gdb) condition break-no expression break only if condition is true (gdb) condition 2 i == 20 example: break on breakpoint 2 if i equals 20 (gdb) watch expression set software watchpoint on variable (gdb) info watchpoints show current watchpoints","title":"Breakpoints"},{"location":"gdb/gdb_cheat-sheet/#running-the-program","text":"*(gdb) run run the program with current arguments *(gdb) run args redirection run with args and redirection (gdb) set args args... set arguments for run (gdb) show args show current arguments to run *(gdb) cont continue the program *(gdb) step single step the program; step into functions (gdb) step count singlestep \\fIcount\\fR times *(gdb) next step but step over functions (gdb) next count next \\fIcount\\fR times *(gdb) CTRL-C actually SIGINT, stop execution of current program *(gdb) attach process-id attach to running program *(gdb) detach detach from running program *(gdb) finish finish current function's execution (gdb) kill kill current executing program","title":"Running the program"},{"location":"gdb/gdb_cheat-sheet/#stack-backtrace","text":"*(gdb) bt print stack backtrace (gdb) frame show current execution position (gdb) up move up stack trace (towards main) (gdb) down move down stack trace (away from main) *(gdb) info locals print automatic variables in frame (gdb) info args print function parameters","title":"Stack backtrace"},{"location":"gdb/gdb_cheat-sheet/#browsing-source","text":"*(gdb) list 101 list 10 lines around line 101 *(gdb) list 1,10 list lines 1 to 10 *(gdb) list main list lines around function *(gdb) list basic.c:main list from another file basic.c *(gdb) list - list previous 10 lines (gdb) list *0x22e4 list source at address (gdb) cd dir change current directory to \\fIdir\\fR (gdb) pwd print working directory (gdb) search regexpr forward current for regular expression (gdb) reverse-search regexpr backward search for regular expression (gdb) dir dirname add directory to source path (gdb) dir reset source path to nothing (gdb) show directories show source path","title":"Browsing source"},{"location":"gdb/gdb_cheat-sheet/#browsing-data","text":"*(gdb) print expression print expression, added to value history *(gdb) print/x expressionR print in hex (gdb) print array[i]@count artificial array - print array range (gdb) print $ print last value (gdb) print *$->next print thru list (gdb) print $1 print value 1 from value history (gdb) print ::gx force scope to be global (gdb) print 'basic.c'::gx global scope in named file (>=4.6) (gdb) print/x &main print address of function (gdb) x/countFormatSize address low-level examine command (gdb) x/x &gx print gx in hex (gdb) x/4wx &main print 4 longs at start of \\fImain\\fR in hex (gdb) x/gf &gd1 print double (gdb) help x show formats for x *(gdb) info locals print local automatics only (gdb) info functions regexp print function names (gdb) info variables regexp print global variable names *(gdb) ptype name print type definition (gdb) whatis expression print type of expression *(gdb) set variable = expression assign value (gdb) display expression display expression result at stop (gdb) undisplay delete displays (gdb) info display show displays (gdb) show values print value history (>= gdb 4.0) (gdb) info history print value history (gdb 3.5)","title":"Browsing Data"},{"location":"gdb/gdb_cheat-sheet/#object-file-manipulation","text":"(gdb) file object load new file for debug (sym+exec) (gdb) file discard sym+exec file info (gdb) symbol-file object load only symbol table (gdb) exec-file object specify object to run (not sym-file) (gdb) core-file core post-mortem debugging","title":"Object File manipulation"},{"location":"gdb/gdb_cheat-sheet/#signal-control","text":"(gdb) info signals print signal setup (gdb) handle signo actions set debugger actions for signal (gdb) handle INT print print message when signal occurs (gdb) handle INT noprint don't print message (gdb) handle INT stop stop program when signal occurs (gdb) handle INT nostop don't stop program (gdb) handle INT pass allow program to receive signal (gdb) handle INT nopass debugger catches signal; program doesn't (gdb) signal signo continue and send signal to program (gdb) signal 0 continue and send no signal to program","title":"Signal Control"},{"location":"gdb/gdb_cheat-sheet/#machine-level-debug","text":"(gdb) info registers print registers sans floats (gdb) info all-registers print all registers (gdb) print/x $pc print one register (gdb) stepi single step at machine level (gdb) si single step at machine level (gdb) nexti single step (over functions) at machine level (gdb) ni single step (over functions) at machine level (gdb) display/i $pc print current instruction in display (gdb) x/x &gx print variable gx in hex (gdb) info line 22 print addresses for object code for line 22 (gdb) info line *0x2c4e print line number of object code at address (gdb) x/10i main disassemble first 10 instructions in \\fImain\\fR (gdb) disassemble addr dissassemble code for function around addr","title":"Machine-level Debug"},{"location":"gdb/gdb_cheat-sheet/#history-display","text":"(gdb) show commands print command history (>= gdb 4.0) (gdb) info editing print command history (gdb 3.5) (gdb) ESC-CTRL-J switch to vi edit mode from emacs edit mode (gdb) set history expansion on turn on c-shell like history (gdb) break class::member set breakpoint on class member. may get menu (gdb) list class::member list member in class (gdb) ptype class print class members (gdb) print *this print contents of this pointer (gdb) rbreak regexpr useful for breakpoint on overloaded member name","title":"History Display"},{"location":"gdb/gdb_cheat-sheet/#miscellaneous","text":"(gdb) define command ... end define user command *(gdb) RETURN repeat last command *(gdb) shell command args execute shell command *(gdb) source file load gdb commands from file *(gdb) quit quit gdb","title":"Miscellaneous"},{"location":"gdb/general/","text":"GDB use defines # either gdb -ex gef -q # or gdb -ex pwndbg -q unset LESSSECURE in current bash process export LESSSECURE=1 read-only LESSSECURE unset-readonly-var () { cat << EOF | sudo gdb -q attach $$ call (void)unbind_variable(\"$1\") detach EOF } VARIABLE_TO_UNSET=LESSSECURE unset-readonly-var \"$VARIABLE_TO_UNSET\" memory & registers # info about a register i r <reg_name> info register <reg_name> # for all registers run i r ## displaying memory # -> run examine x # examine for a specific register x $rbp # memory display options # formats: o Display in octal. x Display in hexadecimal. u Display in unsigned, standard base-10 decimal. t Display in binary. # valid sizes: b A single byte h A halfword, which is two bytes in size w A word, which is four bytes in size g A giant, which is eight bytes in size valid sizes: # e.g.: x/4xw $rbp # display 4 chunks as words in hexadecimal format dereference stack pointer to string gdb-peda$ stack 0000| 0xffffd340 --> 0x2 0004| 0xffffd344 --> 0xffffd515 (\"/home/flo/Documents/asm/check_is_pdf\") 0008| 0xffffd348 --> 0xffffd53a (\"test.s\") 0012| 0xffffd34c --> 0x0 0016| 0xffffd350 --> 0xffffd541 (\"BLUE=\\033[34m\") 0020| 0xffffd354 --> 0xffffd54c (\"BOLD=\\033[1m\") 0024| 0xffffd358 --> 0xffffd556 (\"COLUMNS=239\") 0028| 0xffffd35c --> 0xffffd562 (\"DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/1000/bus\") gdb-peda$ x/s *((char **) (8 + $ebp)) 0xffffd53a: \"test.s\"","title":"GDB"},{"location":"gdb/general/#gdb","text":"","title":"GDB"},{"location":"gdb/general/#use-defines","text":"# either gdb -ex gef -q # or gdb -ex pwndbg -q","title":"use defines"},{"location":"gdb/general/#unset-lesssecure-in-current-bash-process","text":"export LESSSECURE=1 read-only LESSSECURE unset-readonly-var () { cat << EOF | sudo gdb -q attach $$ call (void)unbind_variable(\"$1\") detach EOF } VARIABLE_TO_UNSET=LESSSECURE unset-readonly-var \"$VARIABLE_TO_UNSET\"","title":"unset LESSSECURE in current bash process"},{"location":"gdb/general/#memory-registers","text":"# info about a register i r <reg_name> info register <reg_name> # for all registers run i r ## displaying memory # -> run examine x # examine for a specific register x $rbp # memory display options # formats: o Display in octal. x Display in hexadecimal. u Display in unsigned, standard base-10 decimal. t Display in binary. # valid sizes: b A single byte h A halfword, which is two bytes in size w A word, which is four bytes in size g A giant, which is eight bytes in size valid sizes: # e.g.: x/4xw $rbp # display 4 chunks as words in hexadecimal format","title":"memory &amp; registers"},{"location":"gdb/general/#dereference-stack-pointer-to-string","text":"gdb-peda$ stack 0000| 0xffffd340 --> 0x2 0004| 0xffffd344 --> 0xffffd515 (\"/home/flo/Documents/asm/check_is_pdf\") 0008| 0xffffd348 --> 0xffffd53a (\"test.s\") 0012| 0xffffd34c --> 0x0 0016| 0xffffd350 --> 0xffffd541 (\"BLUE=\\033[34m\") 0020| 0xffffd354 --> 0xffffd54c (\"BOLD=\\033[1m\") 0024| 0xffffd358 --> 0xffffd556 (\"COLUMNS=239\") 0028| 0xffffd35c --> 0xffffd562 (\"DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/1000/bus\") gdb-peda$ x/s *((char **) (8 + $ebp)) 0xffffd53a: \"test.s\"","title":"dereference stack pointer to string"},{"location":"git/completions/","text":"Git Completions https://github.com/git/git/blob/master/contrib/completion/git-completion.bash complete complex functions # If you use complex aliases of form '!f() { ... }; f', you can use the null # command ':' as the first command in the function body to declare the desired # completion style. For example '!f() { : git commit ; ... }; f' will # tell the completion to use commit completion. This also works with aliases # of form \"!sh -c '...'\". For example, \"!sh -c ': git commit ; ... '\". complete external commands # If you have a command that is not part of git, but you would still # like completion, you can use __git_complete: # # __git_complete gl git_log","title":"Git Completions"},{"location":"git/completions/#git-completions","text":"https://github.com/git/git/blob/master/contrib/completion/git-completion.bash","title":"Git Completions"},{"location":"git/completions/#complete-complex-functions","text":"# If you use complex aliases of form '!f() { ... }; f', you can use the null # command ':' as the first command in the function body to declare the desired # completion style. For example '!f() { : git commit ; ... }; f' will # tell the completion to use commit completion. This also works with aliases # of form \"!sh -c '...'\". For example, \"!sh -c ': git commit ; ... '\".","title":"complete complex functions"},{"location":"git/completions/#complete-external-commands","text":"# If you have a command that is not part of git, but you would still # like completion, you can use __git_complete: # # __git_complete gl git_log","title":"complete external commands"},{"location":"git/exotic/","text":"Git Exotic Add local only excludes in git repo $GIT_DIR/info/exclude show top-level of git repo git rev-parse --show-toplevel filter git diff git diff origin/master --name-only | grep -vE 'Pipfile|cert-state.vault.yaml' \\ | xargs git diff --word-diff origin/master -- diff color moved https://twitter.com/offlinemark/status/1430975771363921922/photo/4 git diff --color-moved git diff --color-moved=dimmed-zebra git diff --color-moved-ws=allow-indentation-change display only names of changed files git l --name-only git diff --name-only git show --name-only preserve merge commits on (interactive) rebase git rebase -r rebase onto another branch snatched from https://nedbatchelder.com/blog/202202/moving_a_git_branch_to_a_new_base.html git checkout <branch-to-rebase> git rebase --onto <new-revision> \"$(git merge-base <old-revision> @)\" use commit message instead of hash to display information about commit Snatched from https://twitter.com/offlinemark/status/1387833240321417222 <rev>^{/<text>}, e.g. HEAD^{/fix nasty bug} A suffix ^ to a revision parameter, followed by a brace pair that contains a text led by a slash, is the same as the :/fix nasty bug syntax below except that it returns the youngest matching commit which is reachable from the <rev> before ^ . git show :/<pattern to match youngest commit message> git clang-format Snatched from https://offlinemark.com/2021/04/02/surgical-formatting-with-git-clang-format/ one commit Change files to your heart\u2019s content. Be messy. Stage your changes by running git add Format changes by running git clang-format messy dev branch Make a new dev branch and squash all commits into one using git rebase Use git reset --soft to bring the single squashed commit into the staging tree Run git clang-format to format the squashed commit and add formatting changes to working tree git checkout back to original dev branch to apply the formatting changes for the whole branch in one commit alternate format git clang-format --style=WebKit git clang-format --style=file # if you have an existing .clang-format Git Blame flags unknown origin git blame -w # ignores white space git blame -M # ignores moving text git blame -C # ignores moving text into other files Git Grep flags snatched from https://github.blog/2018-09-10-highlights-from-git-2-19 Display entire c lang function if there is a result. git grep --function-context/-W Git log flags snatched from https://github.blog/2019-11-03-highlights-from-git-2-24/ Not using the standard -- was an intentional choice here, since this is already a widely-used mechanism in Git to separate reference names from files. git log --end-of-options --super-dangerous-option Git refspec explained snatched from https://github.blog/2020-10-19-git-2-29-released/ This refspec tells Git to fetch what\u2019s on the left side of the colon (everything in refs/heads/; i.e., all branches) and to write them into the hierarchy on the right-hand side. The * means \u201cmatch everything\u201d on the left-hand side and \u201creplace with the matched part\u201d on the right-hand side. git config remote.origin.fetch +refs/heads/*:refs/remotes/origin/* Git stash flags stash content in index/stash staged content git stash -p git stash --staged Git fix repository corruption | Git refetch the entire branch content/repo snatched from https://github.blog/2022-04-18-highlights-from-git-2-36/ If there is content missing from the repo, a refetch all might help: git fetch --refetch Get type of git object | Show type of git ref | What type does this git hash refer to $ git cat-file -t refs/magic/value blob $ git show refs/magic/value 1705590754643 Show root commit nicked from https://stackoverflow.com/a/5189296 git log --max-parents=0","title":"Git Exotic"},{"location":"git/exotic/#git-exotic","text":"","title":"Git Exotic"},{"location":"git/exotic/#add-local-only-excludes-in-git-repo","text":"$GIT_DIR/info/exclude","title":"Add local only excludes in git repo"},{"location":"git/exotic/#show-top-level-of-git-repo","text":"git rev-parse --show-toplevel","title":"show top-level of git repo"},{"location":"git/exotic/#filter-git-diff","text":"git diff origin/master --name-only | grep -vE 'Pipfile|cert-state.vault.yaml' \\ | xargs git diff --word-diff origin/master --","title":"filter git diff"},{"location":"git/exotic/#diff-color-moved","text":"https://twitter.com/offlinemark/status/1430975771363921922/photo/4 git diff --color-moved git diff --color-moved=dimmed-zebra git diff --color-moved-ws=allow-indentation-change","title":"diff color moved"},{"location":"git/exotic/#display-only-names-of-changed-files","text":"git l --name-only git diff --name-only git show --name-only","title":"display only names of changed files"},{"location":"git/exotic/#preserve-merge-commits-on-interactive-rebase","text":"git rebase -r","title":"preserve merge commits on (interactive) rebase"},{"location":"git/exotic/#rebase-onto-another-branch","text":"snatched from https://nedbatchelder.com/blog/202202/moving_a_git_branch_to_a_new_base.html git checkout <branch-to-rebase> git rebase --onto <new-revision> \"$(git merge-base <old-revision> @)\"","title":"rebase onto another branch"},{"location":"git/exotic/#use-commit-message-instead-of-hash-to-display-information-about-commit","text":"Snatched from https://twitter.com/offlinemark/status/1387833240321417222 <rev>^{/<text>}, e.g. HEAD^{/fix nasty bug} A suffix ^ to a revision parameter, followed by a brace pair that contains a text led by a slash, is the same as the :/fix nasty bug syntax below except that it returns the youngest matching commit which is reachable from the <rev> before ^ . git show :/<pattern to match youngest commit message>","title":"use commit message instead of hash to display information about commit"},{"location":"git/exotic/#git-clang-format","text":"Snatched from https://offlinemark.com/2021/04/02/surgical-formatting-with-git-clang-format/","title":"git clang-format"},{"location":"git/exotic/#one-commit","text":"Change files to your heart\u2019s content. Be messy. Stage your changes by running git add Format changes by running git clang-format","title":"one commit"},{"location":"git/exotic/#messy-dev-branch","text":"Make a new dev branch and squash all commits into one using git rebase Use git reset --soft to bring the single squashed commit into the staging tree Run git clang-format to format the squashed commit and add formatting changes to working tree git checkout back to original dev branch to apply the formatting changes for the whole branch in one commit","title":"messy dev branch"},{"location":"git/exotic/#alternate-format","text":"git clang-format --style=WebKit git clang-format --style=file # if you have an existing .clang-format","title":"alternate format"},{"location":"git/exotic/#git-blame-flags","text":"unknown origin git blame -w # ignores white space git blame -M # ignores moving text git blame -C # ignores moving text into other files","title":"Git Blame flags"},{"location":"git/exotic/#git-grep-flags","text":"snatched from https://github.blog/2018-09-10-highlights-from-git-2-19 Display entire c lang function if there is a result. git grep --function-context/-W","title":"Git Grep flags"},{"location":"git/exotic/#git-log-flags","text":"snatched from https://github.blog/2019-11-03-highlights-from-git-2-24/ Not using the standard -- was an intentional choice here, since this is already a widely-used mechanism in Git to separate reference names from files. git log --end-of-options --super-dangerous-option","title":"Git log flags"},{"location":"git/exotic/#git-refspec-explained","text":"snatched from https://github.blog/2020-10-19-git-2-29-released/ This refspec tells Git to fetch what\u2019s on the left side of the colon (everything in refs/heads/; i.e., all branches) and to write them into the hierarchy on the right-hand side. The * means \u201cmatch everything\u201d on the left-hand side and \u201creplace with the matched part\u201d on the right-hand side. git config remote.origin.fetch +refs/heads/*:refs/remotes/origin/*","title":"Git refspec explained"},{"location":"git/exotic/#git-stash-flags","text":"stash content in index/stash staged content git stash -p git stash --staged","title":"Git stash flags"},{"location":"git/exotic/#git-fix-repository-corruption-git-refetch-the-entire-branch-contentrepo","text":"snatched from https://github.blog/2022-04-18-highlights-from-git-2-36/ If there is content missing from the repo, a refetch all might help: git fetch --refetch","title":"Git fix repository corruption |  Git refetch the entire branch content/repo"},{"location":"git/exotic/#get-type-of-git-object-show-type-of-git-ref-what-type-does-this-git-hash-refer-to","text":"$ git cat-file -t refs/magic/value blob $ git show refs/magic/value 1705590754643","title":"Get type of git object | Show type of git ref | What type does this git hash refer to"},{"location":"git/exotic/#show-root-commit","text":"nicked from https://stackoverflow.com/a/5189296 git log --max-parents=0","title":"Show root commit"},{"location":"git/git-filter-repo/","text":"Git Filter Repo - git filter-repo rewrite committer and author dates --refs ... limit the number of commits we rewrite (in this case only commits on feature branch) git filter-repo --refs origin/master..HEAD --commit-callback date_callback.py --force date_callback.py : from datetime import datetime, timezone import sys def fix_date(original_date): # original_date: \"1633431022 +0000\" # Split the string to extract the timestamp timestamp_str, tz_offset = original_date.split() timestamp = int(timestamp_str) old = datetime.fromtimestamp(timestamp, tz=timezone.utc) now = datetime.now() if old.year == now.year and \\ old.month == now.month and \\ old.day == now.day and old.weekday() in [5]: # TODO @2024-03-09 this callback only works on Saturdays # # if commit from today (Saturday) change it to Friday new_date = datetime(old.year, old.month, old.day-1, old.hour, old.minute, old.second) new_ts = int(new_date.timestamp()) new_ts = f'{new_ts} +0000' return new_ts.encode('utf-8') else: return original_date def rewrite_dates(commit, _): commit.author_date = fix_date(commit.author_date) commit.committer_date = fix_date(commit.committer_date) rewrite_dates(commit, None) remove files from all git commits taken from https://improveandrepeat.com/2021/06/how-to-use-git-filter-repo-to-remove-files-from-your-git-repository/ # To check what will be deleted run with --dry-run and remove --invert-paths # --> will only add matched commits (commits you want to delete --> invert) git filter-repo --dry-run --path specific-file-or-dir/ --path-glob '*partial-name-in-subfolder*' # --invert-paths --> to exclude these matches, otherwise all other # commits would be dropped git filter-repo --invert-paths --path specific-file-or-dir/ --path-glob '*partial-name-in-subfolder*' filter mail addresses from repo Snatched from https://www.scivision.dev/git-update-email-address/ mailcap file Jane Doe <jane@NEW.com> <jane@OLD.com> John Smith <john@NEW.com> <john@OLD.com> command git filter-repo --mailmap mailmap","title":"Git Filter Repo - git filter-repo"},{"location":"git/git-filter-repo/#git-filter-repo-git-filter-repo","text":"","title":"Git Filter Repo - git filter-repo"},{"location":"git/git-filter-repo/#rewrite-committer-and-author-dates","text":"--refs ... limit the number of commits we rewrite (in this case only commits on feature branch) git filter-repo --refs origin/master..HEAD --commit-callback date_callback.py --force date_callback.py : from datetime import datetime, timezone import sys def fix_date(original_date): # original_date: \"1633431022 +0000\" # Split the string to extract the timestamp timestamp_str, tz_offset = original_date.split() timestamp = int(timestamp_str) old = datetime.fromtimestamp(timestamp, tz=timezone.utc) now = datetime.now() if old.year == now.year and \\ old.month == now.month and \\ old.day == now.day and old.weekday() in [5]: # TODO @2024-03-09 this callback only works on Saturdays # # if commit from today (Saturday) change it to Friday new_date = datetime(old.year, old.month, old.day-1, old.hour, old.minute, old.second) new_ts = int(new_date.timestamp()) new_ts = f'{new_ts} +0000' return new_ts.encode('utf-8') else: return original_date def rewrite_dates(commit, _): commit.author_date = fix_date(commit.author_date) commit.committer_date = fix_date(commit.committer_date) rewrite_dates(commit, None)","title":"rewrite committer and author dates"},{"location":"git/git-filter-repo/#remove-files-from-all-git-commits","text":"taken from https://improveandrepeat.com/2021/06/how-to-use-git-filter-repo-to-remove-files-from-your-git-repository/ # To check what will be deleted run with --dry-run and remove --invert-paths # --> will only add matched commits (commits you want to delete --> invert) git filter-repo --dry-run --path specific-file-or-dir/ --path-glob '*partial-name-in-subfolder*' # --invert-paths --> to exclude these matches, otherwise all other # commits would be dropped git filter-repo --invert-paths --path specific-file-or-dir/ --path-glob '*partial-name-in-subfolder*'","title":"remove files from all git commits"},{"location":"git/git-filter-repo/#filter-mail-addresses-from-repo","text":"Snatched from https://www.scivision.dev/git-update-email-address/","title":"filter mail addresses from repo"},{"location":"git/git-filter-repo/#mailcap-file","text":"Jane Doe <jane@NEW.com> <jane@OLD.com> John Smith <john@NEW.com> <john@OLD.com>","title":"mailcap file"},{"location":"git/git-filter-repo/#command","text":"git filter-repo --mailmap mailmap","title":"command"},{"location":"git/github/","text":"Github SSH push to github behind firewall Host github.com HostName ssh.github.com Port 443 IdentityFile ~/.ssh/github","title":"Github"},{"location":"git/github/#github","text":"","title":"Github"},{"location":"git/github/#ssh-push-to-github-behind-firewall","text":"Host github.com HostName ssh.github.com Port 443 IdentityFile ~/.ssh/github","title":"SSH push to github behind firewall"},{"location":"git/lfs/","text":"LFS in general *) retrieve pointer stored in git $ git lfs untrack '*.zip' Untracking \"*.zip\" $ git checkout -- docker-slides/fonts/Open_Sans.zip $ bat docker-slides/fonts/Open_Sans.zip version https://git-lfs.github.com/spec/v1 oid sha256:91693be5c509f738700c781c4604536cd4c4bf30cf448e78e7d21f7378ca427b size 593525 *) check pointer $ git lfs pointer --check --file=docker-slides/fonts/Open_Sans.zip && echo valid || echo invalid valid *) get pointer that would be generated (file needs to be checked out obviously, not a pointer file, otherwise the results will differ) $ git lfs track '*.zip' $ git lfs checkout Checking out LFS objects: 100% (71/71), 24 MB | 0 B/s, done. /tmp/test-something $ git lfs pointer --file=docker-slides/fonts/Open_Sans.zip Git LFS pointer for docker-slides/fonts/Open_Sans.zip version https://git-lfs.github.com/spec/v1 oid sha256:91693be5c509f738700c781c4604536cd4c4bf30cf448e78e7d21f7378ca427b size 593525","title":"LFS in general"},{"location":"git/lfs/#lfs-in-general","text":"*) retrieve pointer stored in git $ git lfs untrack '*.zip' Untracking \"*.zip\" $ git checkout -- docker-slides/fonts/Open_Sans.zip $ bat docker-slides/fonts/Open_Sans.zip version https://git-lfs.github.com/spec/v1 oid sha256:91693be5c509f738700c781c4604536cd4c4bf30cf448e78e7d21f7378ca427b size 593525 *) check pointer $ git lfs pointer --check --file=docker-slides/fonts/Open_Sans.zip && echo valid || echo invalid valid *) get pointer that would be generated (file needs to be checked out obviously, not a pointer file, otherwise the results will differ) $ git lfs track '*.zip' $ git lfs checkout Checking out LFS objects: 100% (71/71), 24 MB | 0 B/s, done. /tmp/test-something $ git lfs pointer --file=docker-slides/fonts/Open_Sans.zip Git LFS pointer for docker-slides/fonts/Open_Sans.zip version https://git-lfs.github.com/spec/v1 oid sha256:91693be5c509f738700c781c4604536cd4c4bf30cf448e78e7d21f7378ca427b size 593525","title":"LFS in general"},{"location":"git/partial-and-shallow-clones/","text":"Types of clones blobless ... git clone --filter=blob:none <url> treeless ... git clone --filter=tree:0 <url> full shallow ... git clone --depth=1 --branch=master <url> \u201cWe strongly recommend that developers do not use treeless clones for their daily work. Treeless clones are really only helpful for automated builds when you want to quickly clone, compile a project, then throw away the repository.\u201d \u201cPartial clones are relatively new to Git, but there is an older feature that does something very similar to a treeless clone: shallow clones. Shallow clones use the --depth=<N> parameter in git clone to truncate the commit history.\u201d \u201cShallow clones are best combined with the --single-branch --branch=<branch> options as well, to ensure we only download the data for the commit we plan to use immediately.\u201d Difference treeless - shallow: a treeless clone contains every commit, a shallow clone only the last (or depth=N) commits. Trees and blobs up to that depth are downloaded. \u201cFor these reasons we do not recommend shallow clones except for builds that delete the repository immediately afterwards. Fetching from shallow clones can cause more harm than good!\u201d Excerpts From Get up to speed with partial clone and shallow clone - Derrick Stolee","title":"Types of clones"},{"location":"git/partial-and-shallow-clones/#types-of-clones","text":"blobless ... git clone --filter=blob:none <url> treeless ... git clone --filter=tree:0 <url> full shallow ... git clone --depth=1 --branch=master <url> \u201cWe strongly recommend that developers do not use treeless clones for their daily work. Treeless clones are really only helpful for automated builds when you want to quickly clone, compile a project, then throw away the repository.\u201d \u201cPartial clones are relatively new to Git, but there is an older feature that does something very similar to a treeless clone: shallow clones. Shallow clones use the --depth=<N> parameter in git clone to truncate the commit history.\u201d \u201cShallow clones are best combined with the --single-branch --branch=<branch> options as well, to ensure we only download the data for the commit we plan to use immediately.\u201d Difference treeless - shallow: a treeless clone contains every commit, a shallow clone only the last (or depth=N) commits. Trees and blobs up to that depth are downloaded. \u201cFor these reasons we do not recommend shallow clones except for builds that delete the repository immediately afterwards. Fetching from shallow clones can cause more harm than good!\u201d Excerpts From Get up to speed with partial clone and shallow clone - Derrick Stolee","title":"Types of clones"},{"location":"git/plumbing/","text":"Git Plumbing Snatched from Dissecting Git's Guts, Emily Xie - Git Merge 2016 Basic object types How git stores files Store a file in git manually $ cd /tmp/test $ git init $ echo 'Hello World!' > hello_world.txt /tmp/test $ git hash-object -w hello_world.txt 980a0d5f19a64b4b30a87d4206aade58726b60e3 Content addressable filesystem. Read content addressable by hash. $ ls -alh .git/objects/98/0a0d5f19a64b4b30a87d4206aade58726b60e3 -r--r--r-- 1 florian.begusch wheel 29 Dec 14 08:02 .git/objects/98/0a0d5f19a64b4b30a87d4206aade58726b60e3 $ git cat-file -p 980a0d5f19a64b4b30a87d4206aade58726b60e3 Hello World! How to generate the hash yourself $ printf 'blob 13\\000Hello World\\041\\n' | openssl sha1 980a0d5f19a64b4b30a87d4206aade58726b60e3 How git stores folder structure Mimic git add Add to stash/index git update-index --add hello_world.txt git update-index --add foo_bar.txt Inspect index # binary content less .git/index $ git ls-files --stage 100644 9af24d2496973bb2603bb4ebd6ea3bba6179b577 0 foo_bar.txt 100644 980a0d5f19a64b4b30a87d4206aade58726b60e3 0 hello_world.txt Write tree to git $ git write-tree e4ff61e51b77e4e42e3b687ab8a086b24db2e16d Trees are hash addressable as well $ git cat-file -p e4ff61e51b77e4e42e3b687ab8a086b24db2e16d 100644 blob 9af24d2496973bb2603bb4ebd6ea3bba6179b577 foo_bar.txt 100644 blob 980a0d5f19a64b4b30a87d4206aade58726b60e3 hello_world.txt $ find .git/objects -type f .git/objects/e4/ff61e51b77e4e42e3b687ab8a086b24db2e16d # tree .git/objects/9a/f24d2496973bb2603bb4ebd6ea3bba6179b577 # blob .git/objects/98/0a0d5f19a64b4b30a87d4206aade58726b60e3 # blob Mimic git commit /Write commit object A commit knows when trees were written and contains information about committer and author. $ echo 'first commit' | git commit-tree e4ff61e51b77e4e42e3b687ab8a086b24db2e16d 040ee26513c799dfda3316f06df78bade3dddf99 $ git cat-file -p 040ee26513c799dfda3316f06df78bade3dddf99 tree e4ff61e51b77e4e42e3b687ab8a086b24db2e16d author Florian Begusch <florian.begusch@gmail.com> 1673844479 +0000 committer Florian Begusch <florian.begusch@gmail.com> 1673844479 +0000 first commit $ find .git/objects -type f .git/objects/04/0ee26513c799dfda3316f06df78bade3dddf99 .git/objects/e4/ff61e51b77e4e42e3b687ab8a086b24db2e16d .git/objects/9a/f24d2496973bb2603bb4ebd6ea3bba6179b577 .git/objects/98/0a0d5f19a64b4b30a87d4206aade58726b60e3 How git commits create parent commit relations $ echo asdf > foo_bar.txt git update-index --add foo_bar.txt git write-tree eb606ccdc530241cc740e97ea8d87c15a6cc3e69 $ echo 'second commit' | git commit-tree eb606ccdc530241cc740e97ea8d87c15a6cc3e69 7edad5bf0e1967282ce4452464bca10ffc56bd66 $ git cat-file -p 7edad5bf0e1967282ce4452464bca10ffc56bd66 tree eb606ccdc530241cc740e97ea8d87c15a6cc3e69 author Florian Begusch <florian.begusch@gmail.com> 1673844947 +0000 committer Florian Begusch <florian.begusch@gmail.com> 1673844947 +0000 second commit Git references Create a branch Git branches are aliases or pointers to commit objects $ find .git/refs/heads -type f empty, no branches yet Add a master branch, point it at a commit git update-ref refs/heads/master 7edad5bf0e1967282ce4452464bca10ffc56bd66 $ find .git/refs/heads -type f .git/refs/heads/master $ cat .git/refs/heads/master 7edad5bf0e1967282ce4452464bca10ffc56bd66 Branch off of a given branch It just duplicates the pointer git checkout -b feature $ find .git/refs/heads -type f .git/refs/heads/master .git/refs/heads/feature $ cat .git/refs/heads/feature 7edad5bf0e1967282ce4452464bca10ffc56bd66 What is the current branch? HEAD/detached HEAD or headless $ cat .git/HEAD ref: refs/heads/feature Pack objects Example Loose objects $ find .git/objects -type f .git/objects/04/0ee26513c799dfda3316f06df78bade3dddf99 .git/objects/eb/606ccdc530241cc740e97ea8d87c15a6cc3e69 .git/objects/e4/ff61e51b77e4e42e3b687ab8a086b24db2e16d .git/objects/7e/dad5bf0e1967282ce4452464bca10ffc56bd66 .git/objects/9a/f24d2496973bb2603bb4ebd6ea3bba6179b577 .git/objects/98/0a0d5f19a64b4b30a87d4206aade58726b60e3 .git/objects/8b/d6648ed130ac9ece0f89cd9a8fbbfd2608427a $ git count-objects -H 7 objects, 28.00 KiB Garbage collect $ git gc Enumerating objects: 4, done. Counting objects: 100% (4/4), done. Delta compression using up to 12 threads Compressing objects: 100% (2/2), done. Writing objects: 100% (4/4), done. Total 4 (delta 0), reused 0 (delta 0), pack-reused 0 Packed repo $ git count-objects -H 3 objects, 12.00 KiB $ find .git/objects -type f .git/objects/04/0ee26513c799dfda3316f06df78bade3dddf99 .git/objects/e4/ff61e51b77e4e42e3b687ab8a086b24db2e16d .git/objects/pack/pack-2bf9b004e25e7885f2a76d2a592375642b224422.idx # index into packfile (offsets) .git/objects/pack/pack-2bf9b004e25e7885f2a76d2a592375642b224422.pack # pack file .git/objects/9a/f24d2496973bb2603bb4ebd6ea3bba6179b577 .git/objects/info/commit-graph .git/objects/info/packs # which packs exit? Show contents of pack $ git verify-pack -v .git/objects/pack/pack-2bf9b004e25e7885f2a76d2a592375642b224422.pack 7edad5bf0e1967282ce4452464bca10ffc56bd66 commit 200 126 12 8bd6648ed130ac9ece0f89cd9a8fbbfd2608427a blob 5 14 138 980a0d5f19a64b4b30a87d4206aade58726b60e3 blob 13 22 152 eb606ccdc530241cc740e97ea8d87c15a6cc3e69 tree 82 87 174 non delta: 4 objects .git/objects/pack/pack-2bf9b004e25e7885f2a76d2a592375642b224422.pack: ok","title":"Git Plumbing"},{"location":"git/plumbing/#git-plumbing","text":"Snatched from Dissecting Git's Guts, Emily Xie - Git Merge 2016","title":"Git Plumbing"},{"location":"git/plumbing/#basic-object-types","text":"","title":"Basic object types"},{"location":"git/plumbing/#how-git-stores-files","text":"Store a file in git manually $ cd /tmp/test $ git init $ echo 'Hello World!' > hello_world.txt /tmp/test $ git hash-object -w hello_world.txt 980a0d5f19a64b4b30a87d4206aade58726b60e3 Content addressable filesystem. Read content addressable by hash. $ ls -alh .git/objects/98/0a0d5f19a64b4b30a87d4206aade58726b60e3 -r--r--r-- 1 florian.begusch wheel 29 Dec 14 08:02 .git/objects/98/0a0d5f19a64b4b30a87d4206aade58726b60e3 $ git cat-file -p 980a0d5f19a64b4b30a87d4206aade58726b60e3 Hello World! How to generate the hash yourself $ printf 'blob 13\\000Hello World\\041\\n' | openssl sha1 980a0d5f19a64b4b30a87d4206aade58726b60e3","title":"How git stores files"},{"location":"git/plumbing/#how-git-stores-folder-structure","text":"","title":"How git stores folder structure"},{"location":"git/plumbing/#mimic-git-add","text":"Add to stash/index git update-index --add hello_world.txt git update-index --add foo_bar.txt Inspect index # binary content less .git/index $ git ls-files --stage 100644 9af24d2496973bb2603bb4ebd6ea3bba6179b577 0 foo_bar.txt 100644 980a0d5f19a64b4b30a87d4206aade58726b60e3 0 hello_world.txt","title":"Mimic git add"},{"location":"git/plumbing/#write-tree-to-git","text":"$ git write-tree e4ff61e51b77e4e42e3b687ab8a086b24db2e16d Trees are hash addressable as well $ git cat-file -p e4ff61e51b77e4e42e3b687ab8a086b24db2e16d 100644 blob 9af24d2496973bb2603bb4ebd6ea3bba6179b577 foo_bar.txt 100644 blob 980a0d5f19a64b4b30a87d4206aade58726b60e3 hello_world.txt $ find .git/objects -type f .git/objects/e4/ff61e51b77e4e42e3b687ab8a086b24db2e16d # tree .git/objects/9a/f24d2496973bb2603bb4ebd6ea3bba6179b577 # blob .git/objects/98/0a0d5f19a64b4b30a87d4206aade58726b60e3 # blob","title":"Write tree to git"},{"location":"git/plumbing/#mimic-git-commitwrite-commit-object","text":"A commit knows when trees were written and contains information about committer and author. $ echo 'first commit' | git commit-tree e4ff61e51b77e4e42e3b687ab8a086b24db2e16d 040ee26513c799dfda3316f06df78bade3dddf99 $ git cat-file -p 040ee26513c799dfda3316f06df78bade3dddf99 tree e4ff61e51b77e4e42e3b687ab8a086b24db2e16d author Florian Begusch <florian.begusch@gmail.com> 1673844479 +0000 committer Florian Begusch <florian.begusch@gmail.com> 1673844479 +0000 first commit $ find .git/objects -type f .git/objects/04/0ee26513c799dfda3316f06df78bade3dddf99 .git/objects/e4/ff61e51b77e4e42e3b687ab8a086b24db2e16d .git/objects/9a/f24d2496973bb2603bb4ebd6ea3bba6179b577 .git/objects/98/0a0d5f19a64b4b30a87d4206aade58726b60e3","title":"Mimic git commit/Write commit object"},{"location":"git/plumbing/#how-git-commits-create-parent-commit-relations","text":"$ echo asdf > foo_bar.txt git update-index --add foo_bar.txt git write-tree eb606ccdc530241cc740e97ea8d87c15a6cc3e69 $ echo 'second commit' | git commit-tree eb606ccdc530241cc740e97ea8d87c15a6cc3e69 7edad5bf0e1967282ce4452464bca10ffc56bd66 $ git cat-file -p 7edad5bf0e1967282ce4452464bca10ffc56bd66 tree eb606ccdc530241cc740e97ea8d87c15a6cc3e69 author Florian Begusch <florian.begusch@gmail.com> 1673844947 +0000 committer Florian Begusch <florian.begusch@gmail.com> 1673844947 +0000 second commit","title":"How git commits create parent commit relations"},{"location":"git/plumbing/#git-references","text":"","title":"Git references"},{"location":"git/plumbing/#create-a-branch","text":"Git branches are aliases or pointers to commit objects $ find .git/refs/heads -type f empty, no branches yet Add a master branch, point it at a commit git update-ref refs/heads/master 7edad5bf0e1967282ce4452464bca10ffc56bd66 $ find .git/refs/heads -type f .git/refs/heads/master $ cat .git/refs/heads/master 7edad5bf0e1967282ce4452464bca10ffc56bd66","title":"Create a branch"},{"location":"git/plumbing/#branch-off-of-a-given-branch","text":"It just duplicates the pointer git checkout -b feature $ find .git/refs/heads -type f .git/refs/heads/master .git/refs/heads/feature $ cat .git/refs/heads/feature 7edad5bf0e1967282ce4452464bca10ffc56bd66","title":"Branch off of a given branch"},{"location":"git/plumbing/#what-is-the-current-branch-headdetached-head-or-headless","text":"$ cat .git/HEAD ref: refs/heads/feature","title":"What is the current branch? HEAD/detached HEAD or headless"},{"location":"git/plumbing/#pack-objects","text":"","title":"Pack objects"},{"location":"git/plumbing/#example","text":"Loose objects $ find .git/objects -type f .git/objects/04/0ee26513c799dfda3316f06df78bade3dddf99 .git/objects/eb/606ccdc530241cc740e97ea8d87c15a6cc3e69 .git/objects/e4/ff61e51b77e4e42e3b687ab8a086b24db2e16d .git/objects/7e/dad5bf0e1967282ce4452464bca10ffc56bd66 .git/objects/9a/f24d2496973bb2603bb4ebd6ea3bba6179b577 .git/objects/98/0a0d5f19a64b4b30a87d4206aade58726b60e3 .git/objects/8b/d6648ed130ac9ece0f89cd9a8fbbfd2608427a $ git count-objects -H 7 objects, 28.00 KiB Garbage collect $ git gc Enumerating objects: 4, done. Counting objects: 100% (4/4), done. Delta compression using up to 12 threads Compressing objects: 100% (2/2), done. Writing objects: 100% (4/4), done. Total 4 (delta 0), reused 0 (delta 0), pack-reused 0 Packed repo $ git count-objects -H 3 objects, 12.00 KiB $ find .git/objects -type f .git/objects/04/0ee26513c799dfda3316f06df78bade3dddf99 .git/objects/e4/ff61e51b77e4e42e3b687ab8a086b24db2e16d .git/objects/pack/pack-2bf9b004e25e7885f2a76d2a592375642b224422.idx # index into packfile (offsets) .git/objects/pack/pack-2bf9b004e25e7885f2a76d2a592375642b224422.pack # pack file .git/objects/9a/f24d2496973bb2603bb4ebd6ea3bba6179b577 .git/objects/info/commit-graph .git/objects/info/packs # which packs exit? Show contents of pack $ git verify-pack -v .git/objects/pack/pack-2bf9b004e25e7885f2a76d2a592375642b224422.pack 7edad5bf0e1967282ce4452464bca10ffc56bd66 commit 200 126 12 8bd6648ed130ac9ece0f89cd9a8fbbfd2608427a blob 5 14 138 980a0d5f19a64b4b30a87d4206aade58726b60e3 blob 13 22 152 eb606ccdc530241cc740e97ea8d87c15a6cc3e69 tree 82 87 174 non delta: 4 objects .git/objects/pack/pack-2bf9b004e25e7885f2a76d2a592375642b224422.pack: ok","title":"Example"},{"location":"git/useful-links/","text":"Git useful links https://www.atlassian.com/git/tutorials/resetting-checking-out-and-reverting https://www.git-tower.com/learn/git/faq/detached-head-when-checkout-commit https://data.agaric.com/see-your-git-commit-history-files-modified https://www.git-tower.com/learn/git/faq/change-author-name-email/ -- https://git-scm.com/book/en/v2/Git-Basics-Recording-Changes-to-the-Repository https://git-scm.com/book/en/v2/Git-Basics-Viewing-the-Commit-History https://git-scm.com/book/en/v2/Git-Branching-Branching-Workflows https://git-scm.com/docs/git-reset https://git-scm.com/docs/git-checkout#git-checkout---orphanltnewbranchgt https://git-scm.com/docs/git-reflog https://git-scm.com/book/en/v2/Git-Internals-Maintenance-and-Data-Recovery -- https://mtyurt.net/post/2019/git-rebase-merges-option.html https://archive.ochronus.com/git-tips-from-the-trenches/ https://sethrobertson.github.io/GitFixUm/fixup.html#lostnfound https://docs.gitlab.com/ee/user/project/repository/signed_commits/gpg.html#associating-your-gpg-key-with-git https://improveandrepeat.com/2021/06/how-to-use-git-filter-repo-to-remove-files-from-your-git-repository/ -- git delta (nicer git diff output on the command line): https://github.com/diepfote/dot-files/commit/09cfbf1183e230a7965382d52209ff23cc0a2c04 -- nice git helpers: https://github.com/diepfote/dot-files/blob/09cfbf1183e230a7965382d52209ff23cc0a2c04/.gitconfig#L53-L63 -- misc: https://stackoverflow.com/questions/5586383/how-to-diff-one-file-to-an-arbitrary-version-in-git https://stackoverflow.com/questions/5480258/how-can-i-delete-a-remote-tag https://www.norbauer.com/rails-consulting/notes/git-revert-reset-a-single-file.html https://stackoverflow.com/a/41264214 https://stackoverflow.com/a/8594971 https://stackoverflow.com/a/1505968 https://stackoverflow.com/a/849960 https://stackoverflow.com/a/6964322 https://stackoverflow.com/a/17563740 https://stackoverflow.com/a/2929502 https://stackoverflow.com/questions/10911317/how-to-remove-the-first-commit-in-git#32765827 -- LFS: https://www.atlassian.com/git/tutorials/git-lfs?_ga=2.206269456.2025572132.1528446321-166493356.1526479758#installing-git-lfs -- Git merge videos: https://youtu.be/YdstUWcg6j4 https://youtu.be/Y2Msq90ZknI","title":"Git useful links"},{"location":"git/useful-links/#git-useful-links","text":"https://www.atlassian.com/git/tutorials/resetting-checking-out-and-reverting https://www.git-tower.com/learn/git/faq/detached-head-when-checkout-commit https://data.agaric.com/see-your-git-commit-history-files-modified https://www.git-tower.com/learn/git/faq/change-author-name-email/ -- https://git-scm.com/book/en/v2/Git-Basics-Recording-Changes-to-the-Repository https://git-scm.com/book/en/v2/Git-Basics-Viewing-the-Commit-History https://git-scm.com/book/en/v2/Git-Branching-Branching-Workflows https://git-scm.com/docs/git-reset https://git-scm.com/docs/git-checkout#git-checkout---orphanltnewbranchgt https://git-scm.com/docs/git-reflog https://git-scm.com/book/en/v2/Git-Internals-Maintenance-and-Data-Recovery -- https://mtyurt.net/post/2019/git-rebase-merges-option.html https://archive.ochronus.com/git-tips-from-the-trenches/ https://sethrobertson.github.io/GitFixUm/fixup.html#lostnfound https://docs.gitlab.com/ee/user/project/repository/signed_commits/gpg.html#associating-your-gpg-key-with-git https://improveandrepeat.com/2021/06/how-to-use-git-filter-repo-to-remove-files-from-your-git-repository/ -- git delta (nicer git diff output on the command line): https://github.com/diepfote/dot-files/commit/09cfbf1183e230a7965382d52209ff23cc0a2c04 -- nice git helpers: https://github.com/diepfote/dot-files/blob/09cfbf1183e230a7965382d52209ff23cc0a2c04/.gitconfig#L53-L63 -- misc: https://stackoverflow.com/questions/5586383/how-to-diff-one-file-to-an-arbitrary-version-in-git https://stackoverflow.com/questions/5480258/how-can-i-delete-a-remote-tag https://www.norbauer.com/rails-consulting/notes/git-revert-reset-a-single-file.html https://stackoverflow.com/a/41264214 https://stackoverflow.com/a/8594971 https://stackoverflow.com/a/1505968 https://stackoverflow.com/a/849960 https://stackoverflow.com/a/6964322 https://stackoverflow.com/a/17563740 https://stackoverflow.com/a/2929502 https://stackoverflow.com/questions/10911317/how-to-remove-the-first-commit-in-git#32765827 -- LFS: https://www.atlassian.com/git/tutorials/git-lfs?_ga=2.206269456.2025572132.1528446321-166493356.1526479758#installing-git-lfs -- Git merge videos: https://youtu.be/YdstUWcg6j4 https://youtu.be/Y2Msq90ZknI","title":"Git useful links"},{"location":"github/gh/","text":"GH cli merge a PR # by current branch gh pr edit --add-label \"merge\" # by PR number gh pr edit 60 --remove-label wip --add-label merge approve PR # PR by number gh pr review 11 --approve # PR by current branch gh pr review --approve restart CI build # by PR number gh pr comment 114 --body 'recheck' # by current branch gh pr comment --body 'recheck'","title":"GH cli"},{"location":"github/gh/#gh-cli","text":"","title":"GH cli"},{"location":"github/gh/#merge-a-pr","text":"# by current branch gh pr edit --add-label \"merge\" # by PR number gh pr edit 60 --remove-label wip --add-label merge","title":"merge a PR"},{"location":"github/gh/#approve-pr","text":"# PR by number gh pr review 11 --approve # PR by current branch gh pr review --approve","title":"approve PR"},{"location":"github/gh/#restart-ci-build","text":"# by PR number gh pr comment 114 --body 'recheck' # by current branch gh pr comment --body 'recheck'","title":"restart CI build"},{"location":"iphone/tethering/","text":"iPhone tethering Pre-requisites 1) Ensure the ipheth module is loaded: sudo modprobe ipheth 2) install libimobiledevice Usage 1) connect the iphone via usb and unlock it 2) enable hotspot on your iphone 3) run idevicepair pair and click on Trust on your phone 4) a new interface should show up, run ip link to check its name $ ip link 1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 ... ... 11: enp0s20fxxxxxxxx <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000 link/ether e6:xx:xx:xx:xx:xx brd ff:ff:ff:ff:ff:ff altname enxxxxxxxxxxxxx 5) obtain ip address for this interface: sudo dhcpcd enp0s20fxxxxxxxx","title":"iPhone tethering"},{"location":"iphone/tethering/#iphone-tethering","text":"","title":"iPhone tethering"},{"location":"iphone/tethering/#pre-requisites","text":"1) Ensure the ipheth module is loaded: sudo modprobe ipheth 2) install libimobiledevice","title":"Pre-requisites"},{"location":"iphone/tethering/#usage","text":"1) connect the iphone via usb and unlock it 2) enable hotspot on your iphone 3) run idevicepair pair and click on Trust on your phone 4) a new interface should show up, run ip link to check its name $ ip link 1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 ... ... 11: enp0s20fxxxxxxxx <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000 link/ether e6:xx:xx:xx:xx:xx brd ff:ff:ff:ff:ff:ff altname enxxxxxxxxxxxxx 5) obtain ip address for this interface: sudo dhcpcd enp0s20fxxxxxxxx","title":"Usage"},{"location":"java/jmx/","text":"services: artifactory: environment: EXTRA_JAVA_OPTIONS: \"-Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=9010 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Djava.rmi.server.hostname=localhost -Dcom.sun.management.jmxremote.rmi.port=9011 -Dcom.sun.management.jmxremote.local.only=false\"","title":"Jmx"},{"location":"keyboards/logitech-multi-device-k780/","text":"Logitech Mutli-Device K780 switch slots press one of F1,F2,F3 connect to a new device press one of the keys metioned in switch slots for 3 seconds change keyboard layout to Mac press fn + O for 3 seconds change keyboard layout to Windows press fn + P for 3 seconds swap function keys | swap fn keys Arch Linux sudo pacman -S solaar sudo solaar show Hint : Device numbers in solaar show do not necesarrily reflect device numbers used for solaar config # device number in `solaar show was '2'`, number I had to use was '`3`' sudo solaar config 3 fn-swap False Mac OS | Darwin $ defaults write -g com.apple.keyboard.fnState 1 $ defaults read | grep keyboard.fnState \"com.apple.keyboard.fnState\" = 1;","title":"Logitech Mutli-Device K780"},{"location":"keyboards/logitech-multi-device-k780/#logitech-mutli-device-k780","text":"","title":"Logitech Mutli-Device K780"},{"location":"keyboards/logitech-multi-device-k780/#switch-slots","text":"press one of F1,F2,F3","title":"switch slots"},{"location":"keyboards/logitech-multi-device-k780/#connect-to-a-new-device","text":"press one of the keys metioned in switch slots for 3 seconds","title":"connect to a new device"},{"location":"keyboards/logitech-multi-device-k780/#change-keyboard-layout-to-mac","text":"press fn + O for 3 seconds","title":"change keyboard layout to Mac"},{"location":"keyboards/logitech-multi-device-k780/#change-keyboard-layout-to-windows","text":"press fn + P for 3 seconds","title":"change keyboard layout to Windows"},{"location":"keyboards/logitech-multi-device-k780/#swap-function-keys-swap-fn-keys","text":"","title":"swap function keys | swap fn keys"},{"location":"keyboards/logitech-multi-device-k780/#arch-linux","text":"sudo pacman -S solaar sudo solaar show Hint : Device numbers in solaar show do not necesarrily reflect device numbers used for solaar config # device number in `solaar show was '2'`, number I had to use was '`3`' sudo solaar config 3 fn-swap False","title":"Arch Linux"},{"location":"keyboards/logitech-multi-device-k780/#mac-os-darwin","text":"$ defaults write -g com.apple.keyboard.fnState 1 $ defaults read | grep keyboard.fnState \"com.apple.keyboard.fnState\" = 1;","title":"Mac OS | Darwin"},{"location":"kubernetes/","text":"run a pod with custom entrypoint and arguments | run a pod with custom command and arguments | run a pod with command and arguments $ kubectl apply -f create_s3_bucket_pod.yaml --- # Source: create_s3_bucket_pod.yaml apiVersion: v1 kind: Pod metadata: name: minio-client labels: purpose: create-minio-bucket spec: containers: - name: minio-client image: minio/mc command: [\"/bin/sh\"] args: [\"-c\", \"mc config host add kubernetes_minio http://helmtmpl-minio.velero.svc:9000 accessKey secretKey; mc mb kubernetes_minio/tinker\"] restartPolicy: OnFailure delete all pods matching a prefix or suffix $ for \"$name\" in $(kubectl get -o name pod); do case \"$name\" in *<pre/suf-fix>*) kubectl delete \"$name\" & ;; esac done delete a resource immediately $ kubectl delete ... --force --grace-period=0 filter all resources $ kubectl get all -l bu=finance env=prod $ kubectl get all --selector bu=finance env=prod get field in kubernetes object hierarchy $ kubectl fields pod volumeMounts spec.containers.volumeMounts spec.initContainers.volumeMounts $ kubectl fields pod imagepullsecrets spec.imagePullSecrets $ kubectl fields pod toleration spec.tolerations spec.tolerations.tolerationSeconds Show sub-resources of Kubernetes objects $ kubectl tree -n bli-bla-blub sts asdf NAMESPACE NAME READY REASON AGE bli-bla-blub StatefulSet/asdf - 2y108d bli-bla-blub \u251c\u2500ControllerRevision/asdf-546c9d8dfb - 57d bli-bla-blub \u251c\u2500ControllerRevision/asdf-567f88c999 - 15d bli-bla-blub \u251c\u2500ControllerRevision/asdf-5c65886648 - 355d bli-bla-blub \u251c\u2500ControllerRevision/asdf-5d49fc656f - 285d bli-bla-blub \u251c\u2500ControllerRevision/asdf-5dc54bfc6b - 6d19h bli-bla-blub \u251c\u2500ControllerRevision/asdf-664488d4bc - 112d bli-bla-blub \u251c\u2500ControllerRevision/asdf-694dd575fd - 6d12h bli-bla-blub \u251c\u2500ControllerRevision/asdf-69f55d649d - 2y108d bli-bla-blub \u251c\u2500ControllerRevision/asdf-6bcfd4cd95 - 12d bli-bla-blub \u251c\u2500ControllerRevision/asdf-6d7c8c6d56 - 723d bli-bla-blub \u251c\u2500ControllerRevision/asdf-977f785cf - 284d bli-bla-blub \u251c\u2500Pod/asdf-0 True 15h bli-bla-blub \u2514\u2500Pod/asdf-1 True 14h Sort pods $ oc get pod -l app=openam -n blib-bla-name --sort-by=.status.startTime NAME READY STATUS RESTARTS AGE blib-bla-name-openam-openam-59876b476d-pf9lz 1/1 Running 0 11h blib-bla-name-openam-openam-59876b476d-ztl2n 1/1 Running 0 4m blib-bla-name-openam-openam-59876b476d-qbfsb 1/1 Running 0 1m Delete oldest pod $ oc delete -n blib-bla-name \"$(oc get pod -l app=openam -n blib-bla-name --sort-by=.status.startTime -o name | head -n1)\" pod \"blib-bla-name-openam-openam-59876b476d-pf9lz\" deleted","title":"Index"},{"location":"kubernetes/#run-a-pod-with-custom-entrypoint-and-arguments","text":"| run a pod with custom command and arguments | run a pod with command and arguments $ kubectl apply -f create_s3_bucket_pod.yaml --- # Source: create_s3_bucket_pod.yaml apiVersion: v1 kind: Pod metadata: name: minio-client labels: purpose: create-minio-bucket spec: containers: - name: minio-client image: minio/mc command: [\"/bin/sh\"] args: [\"-c\", \"mc config host add kubernetes_minio http://helmtmpl-minio.velero.svc:9000 accessKey secretKey; mc mb kubernetes_minio/tinker\"] restartPolicy: OnFailure","title":"run a pod with custom entrypoint and arguments"},{"location":"kubernetes/#delete-all-pods-matching-a-prefix-or-suffix","text":"$ for \"$name\" in $(kubectl get -o name pod); do case \"$name\" in *<pre/suf-fix>*) kubectl delete \"$name\" & ;; esac done","title":"delete all pods matching a prefix or suffix"},{"location":"kubernetes/#delete-a-resource-immediately","text":"$ kubectl delete ... --force --grace-period=0","title":"delete a resource immediately"},{"location":"kubernetes/#filter-all-resources","text":"$ kubectl get all -l bu=finance env=prod $ kubectl get all --selector bu=finance env=prod","title":"filter all resources"},{"location":"kubernetes/#get-field-in-kubernetes-object-hierarchy","text":"$ kubectl fields pod volumeMounts spec.containers.volumeMounts spec.initContainers.volumeMounts $ kubectl fields pod imagepullsecrets spec.imagePullSecrets $ kubectl fields pod toleration spec.tolerations spec.tolerations.tolerationSeconds","title":"get field in kubernetes object hierarchy"},{"location":"kubernetes/#show-sub-resources-of-kubernetes-objects","text":"$ kubectl tree -n bli-bla-blub sts asdf NAMESPACE NAME READY REASON AGE bli-bla-blub StatefulSet/asdf - 2y108d bli-bla-blub \u251c\u2500ControllerRevision/asdf-546c9d8dfb - 57d bli-bla-blub \u251c\u2500ControllerRevision/asdf-567f88c999 - 15d bli-bla-blub \u251c\u2500ControllerRevision/asdf-5c65886648 - 355d bli-bla-blub \u251c\u2500ControllerRevision/asdf-5d49fc656f - 285d bli-bla-blub \u251c\u2500ControllerRevision/asdf-5dc54bfc6b - 6d19h bli-bla-blub \u251c\u2500ControllerRevision/asdf-664488d4bc - 112d bli-bla-blub \u251c\u2500ControllerRevision/asdf-694dd575fd - 6d12h bli-bla-blub \u251c\u2500ControllerRevision/asdf-69f55d649d - 2y108d bli-bla-blub \u251c\u2500ControllerRevision/asdf-6bcfd4cd95 - 12d bli-bla-blub \u251c\u2500ControllerRevision/asdf-6d7c8c6d56 - 723d bli-bla-blub \u251c\u2500ControllerRevision/asdf-977f785cf - 284d bli-bla-blub \u251c\u2500Pod/asdf-0 True 15h bli-bla-blub \u2514\u2500Pod/asdf-1 True 14h","title":"Show sub-resources of Kubernetes objects"},{"location":"kubernetes/#sort-pods","text":"$ oc get pod -l app=openam -n blib-bla-name --sort-by=.status.startTime NAME READY STATUS RESTARTS AGE blib-bla-name-openam-openam-59876b476d-pf9lz 1/1 Running 0 11h blib-bla-name-openam-openam-59876b476d-ztl2n 1/1 Running 0 4m blib-bla-name-openam-openam-59876b476d-qbfsb 1/1 Running 0 1m","title":"Sort pods"},{"location":"kubernetes/#delete-oldest-pod","text":"$ oc delete -n blib-bla-name \"$(oc get pod -l app=openam -n blib-bla-name --sort-by=.status.startTime -o name | head -n1)\" pod \"blib-bla-name-openam-openam-59876b476d-pf9lz\" deleted","title":"Delete oldest pod"},{"location":"kubernetes/install-kubectl-on-linux/","text":"Install kubectl binary on Linux snatched from https://kubernetes.io/docs/tasks/tools/install-kubectl-linux/#install-kubectl-binary-with-curl-on-linux curl -LO \"https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl\" curl -LO \"https://dl.k8s.io/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl.sha256\" echo \"$(cat kubectl.sha256) kubectl\" | sha256sum --check rm kubectl.sha256 chmod +x kubectl mkdir -p ~/.local/bin mv ./kubectl ~/.local/bin/kubectl export PATH=\"$HOME/.local/bin:$PATH\"","title":"Install kubectl binary on Linux"},{"location":"kubernetes/install-kubectl-on-linux/#install-kubectl-binary-on-linux","text":"snatched from https://kubernetes.io/docs/tasks/tools/install-kubectl-linux/#install-kubectl-binary-with-curl-on-linux curl -LO \"https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl\" curl -LO \"https://dl.k8s.io/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl.sha256\" echo \"$(cat kubectl.sha256) kubectl\" | sha256sum --check rm kubectl.sha256 chmod +x kubectl mkdir -p ~/.local/bin mv ./kubectl ~/.local/bin/kubectl export PATH=\"$HOME/.local/bin:$PATH\"","title":"Install kubectl binary on Linux"},{"location":"kubernetes/jq/","text":"Jq filtering show multiple fields simultaneoulsy | show 2 fields simultaneoulsy $ oc get pod -n something podname -o json | jq '.status.containerStatuses[] | \"\\(.state) \\(.name)\"' \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:50Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:50Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:50Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:50Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:50Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:50Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:52Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:49Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:51Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:51Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:51Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:52Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:51Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:51Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:53Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:51Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:51Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:52Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:53Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:51Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:52Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:52Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:52Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:52Z\\\"}} random-container-name\" show resources requests for specific container in a statefulset oc get pod -n asdf-blub-namespace -o json | jq '.items[].spec.containers[] | select(.name == \"container-name\") | .resources.requests' display node name and taints for each node in the cluster $ kubectl get node -o json | jq '.items[] | (.spec.taints,.metadata.name)' \"a-node-big3-3.asdf.something.net\" [ { \"effect\": \"NoSchedule\", \"key\": \"storagetype\", \"value\": \"local-hdd\" } ] \"a-node-big3-4.asdf.something.net\" [ { \"effect\": \"NoSchedule\", \"key\": \"storagetype\", \"value\": \"local-hdd\" } ]","title":"Jq filtering"},{"location":"kubernetes/jq/#jq-filtering","text":"","title":"Jq filtering"},{"location":"kubernetes/jq/#show-multiple-fields-simultaneoulsy-show-2-fields-simultaneoulsy","text":"$ oc get pod -n something podname -o json | jq '.status.containerStatuses[] | \"\\(.state) \\(.name)\"' \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:50Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:50Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:50Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:50Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:50Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:50Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:52Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:49Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:51Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:51Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:51Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:52Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:51Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:51Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:53Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:51Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:51Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:52Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:53Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:51Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:52Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:52Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:52Z\\\"}} random-container-name\" \"{\\\"running\\\":{\\\"startedAt\\\":\\\"2022-11-30T17:15:52Z\\\"}} random-container-name\"","title":"show multiple fields simultaneoulsy | show 2 fields simultaneoulsy"},{"location":"kubernetes/jq/#show-resources-requests-for-specific-container-in-a-statefulset","text":"oc get pod -n asdf-blub-namespace -o json | jq '.items[].spec.containers[] | select(.name == \"container-name\") | .resources.requests'","title":"show resources requests for specific container in a statefulset"},{"location":"kubernetes/jq/#display-node-name-and-taints-for-each-node-in-the-cluster","text":"$ kubectl get node -o json | jq '.items[] | (.spec.taints,.metadata.name)' \"a-node-big3-3.asdf.something.net\" [ { \"effect\": \"NoSchedule\", \"key\": \"storagetype\", \"value\": \"local-hdd\" } ] \"a-node-big3-4.asdf.something.net\" [ { \"effect\": \"NoSchedule\", \"key\": \"storagetype\", \"value\": \"local-hdd\" } ]","title":"display node name and taints for each node in the cluster"},{"location":"kubernetes/okd/drain-nodes/","text":"oc adm drain <node-name> --force --ignore-daemonsets --delete-local-data --grace-period=-1","title":"Drain nodes"},{"location":"kubernetes/okd/etcd/","text":"OKD etcd curl etcd metrics | check etcd metrics sudo etcdctl --ca-file=/etc/etcd/ca.crt --cert-file=/etc/etcd/peer.crt --key-file=/etc/etcd/peer.key -endpoints https://<endpoint-ip>:2379 cluster-health etcdctl ... curl --ca-file ... --cacert --cert-file ... --cert client cert to use --key-file ... --key <path> --key-type <PEM-is-assumed> # elevate privileges to read files in `/etc/etcd` sudo curl -L -v --cacert /etc/etcd/ca.crt --cert /etc/etcd/peer.crt --key /etc/etcd/peer.key https://<endpoint-ip>:2379/metrics","title":"OKD etcd"},{"location":"kubernetes/okd/etcd/#okd-etcd","text":"","title":"OKD etcd"},{"location":"kubernetes/okd/etcd/#curl-etcd-metrics-check-etcd-metrics","text":"sudo etcdctl --ca-file=/etc/etcd/ca.crt --cert-file=/etc/etcd/peer.crt --key-file=/etc/etcd/peer.key -endpoints https://<endpoint-ip>:2379 cluster-health etcdctl ... curl --ca-file ... --cacert --cert-file ... --cert client cert to use --key-file ... --key <path> --key-type <PEM-is-assumed> # elevate privileges to read files in `/etc/etcd` sudo curl -L -v --cacert /etc/etcd/ca.crt --cert /etc/etcd/peer.crt --key /etc/etcd/peer.key https://<endpoint-ip>:2379/metrics","title":"curl etcd metrics | check etcd metrics"},{"location":"kubernetes/okd/rebind-pv/","text":"Re-bind PV | Rebind PV | PVC stuck in \"Pending\" state MOST IMPORTANT: remove claimRef also remove: resourceVersion creationTimestamp selflink metadata.annotations DO NOT REMOVE THE uid of the pv resource so entire procedure: set pv reclaimpolicy to retain delete pvc edit pv ^ (claimref etc.) re-deploy pvc without annotations verlero labels","title":"Re-bind PV | Rebind PV | PVC stuck in \"Pending\" state"},{"location":"kubernetes/okd/rebind-pv/#re-bind-pv-rebind-pv-pvc-stuck-in-pending-state","text":"MOST IMPORTANT: remove claimRef also remove: resourceVersion creationTimestamp selflink metadata.annotations DO NOT REMOVE THE uid of the pv resource so entire procedure: set pv reclaimpolicy to retain delete pvc edit pv ^ (claimref etc.) re-deploy pvc without annotations verlero labels","title":"Re-bind PV | Rebind PV | PVC stuck in \"Pending\" state"},{"location":"kubernetes/okd/security-context-constraints/","text":"OKD SCC openshift add security context constraint to user oc adm policy add-scc-to-user privileged -z <service-account> exchange privileged with something less forceful if possible: - anyuid - nonroot openshift remove scc for user oc adm policy remove-scc-from privileged -z <service-account> openshift get scc for namespace (security context constraints are namespaced) $ oc get scc -n cc-prod-servicedesk NAME PRIV CAPS SELINUX RUNASUSER FSGROUP SUPGROUP PRIORITY READONLYROOTFS VOLUMES anyuid false [] MustRunAs RunAsAny RunAsAny RunAsAny 10 false [configMap downwardAPI emptyDir persistentVolumeClaim projected secret] hostaccess openshift get clusterrole corresponding to scc $ oc get clusterrole.rbac.authorization.k8s.io system:openshift:scc:nonroot -o yaml apiVersion: rbac.authorization.k8s.io/v1 kind: ClusterRole metadata: name: system:openshift:scc:nonroot rules: - apiGroups: - security.openshift.io resourceNames: - nonroot resources: - securitycontextconstraints verbs: - use","title":"OKD SCC"},{"location":"kubernetes/okd/security-context-constraints/#okd-scc","text":"","title":"OKD SCC"},{"location":"kubernetes/okd/security-context-constraints/#openshift-add-security-context-constraint-to-user","text":"oc adm policy add-scc-to-user privileged -z <service-account> exchange privileged with something less forceful if possible: - anyuid - nonroot","title":"openshift add security context constraint to user"},{"location":"kubernetes/okd/security-context-constraints/#openshift-remove-scc-for-user","text":"oc adm policy remove-scc-from privileged -z <service-account>","title":"openshift remove scc for user"},{"location":"kubernetes/okd/security-context-constraints/#openshift-get-scc-for-namespace-security-context-constraints-are-namespaced","text":"$ oc get scc -n cc-prod-servicedesk NAME PRIV CAPS SELINUX RUNASUSER FSGROUP SUPGROUP PRIORITY READONLYROOTFS VOLUMES anyuid false [] MustRunAs RunAsAny RunAsAny RunAsAny 10 false [configMap downwardAPI emptyDir persistentVolumeClaim projected secret] hostaccess","title":"openshift get scc for namespace (security context constraints are namespaced)"},{"location":"kubernetes/okd/security-context-constraints/#openshift-get-clusterrole-corresponding-to-scc","text":"$ oc get clusterrole.rbac.authorization.k8s.io system:openshift:scc:nonroot -o yaml apiVersion: rbac.authorization.k8s.io/v1 kind: ClusterRole metadata: name: system:openshift:scc:nonroot rules: - apiGroups: - security.openshift.io resourceNames: - nonroot resources: - securitycontextconstraints verbs: - use","title":"openshift get clusterrole corresponding to scc"},{"location":"linux/audio/","text":"Audio (I assume you use pipewire) aplay Check all available hardware devices aplay -l Play sound to figure out which one it is: # (Internal audio = id: 0) while read -r i; do echo \"$i\"; aplay -D plughw:0,\"$i\" /usr/share/sounds/alsa/Front_Right.wav; done < <(seq 0 10) Hint : For HDMI devices make sure the display is already used (visually). e.g. xrandr --output HDMI2 --same-as eDP1 --auto pavucontrol Check available audio devices (based on card-profile --> available to applications) amixer Get device volume via cli. alsamixer Change Playback and Capture settings (Master vol, Devices, PCM, ...) pactl list cards (profiles is where it's at) pactl list cards # not useful if you need anything other than the card name or numeric id pactl list cards short set-card-profile | set card profile | bad audio # change audio profile for bluetooth device # to improve audio quality pactl set-card-profile bluez_card.<hardware-address> a2dp-sink # reset to default # pactl set-card-profile alsa_card.pci-0000_00_1f.3 output:analog-stereo+input:analog-stereo # hdmi out (TV audio) pactl set-card-profile alsa_card.pci-0000_00_1f.3 output:hdmi-stereo-extra1 Hint : If the default profile (analog in/out; thinkpad laptop) profile is not displayed reinitalize the internal audio card (thinkpad laptop). Hint : Find audio card profile via aplay -D ... , after listing all devices via aplay -l . Check for device name in pactl list cards output. Use one of the profiles displayed in the \"Part of profile...\" section in the output of pactl list cards for this device. get default output device pactl get-default-sink reinitalize card driver to default state alsactl init <card-id-number> # for internal card alsactl init 0","title":"Audio (I assume you use pipewire)"},{"location":"linux/audio/#audio-i-assume-you-use-pipewire","text":"","title":"Audio (I assume you use pipewire)"},{"location":"linux/audio/#aplay","text":"Check all available hardware devices aplay -l Play sound to figure out which one it is: # (Internal audio = id: 0) while read -r i; do echo \"$i\"; aplay -D plughw:0,\"$i\" /usr/share/sounds/alsa/Front_Right.wav; done < <(seq 0 10) Hint : For HDMI devices make sure the display is already used (visually). e.g. xrandr --output HDMI2 --same-as eDP1 --auto","title":"aplay"},{"location":"linux/audio/#pavucontrol","text":"Check available audio devices (based on card-profile --> available to applications)","title":"pavucontrol"},{"location":"linux/audio/#amixer","text":"Get device volume via cli.","title":"amixer"},{"location":"linux/audio/#alsamixer","text":"Change Playback and Capture settings (Master vol, Devices, PCM, ...)","title":"alsamixer"},{"location":"linux/audio/#pactl","text":"","title":"pactl"},{"location":"linux/audio/#list-cards-profiles-is-where-its-at","text":"pactl list cards # not useful if you need anything other than the card name or numeric id pactl list cards short","title":"list cards (profiles is where it's at)"},{"location":"linux/audio/#set-card-profile-set-card-profile-bad-audio","text":"# change audio profile for bluetooth device # to improve audio quality pactl set-card-profile bluez_card.<hardware-address> a2dp-sink # reset to default # pactl set-card-profile alsa_card.pci-0000_00_1f.3 output:analog-stereo+input:analog-stereo # hdmi out (TV audio) pactl set-card-profile alsa_card.pci-0000_00_1f.3 output:hdmi-stereo-extra1 Hint : If the default profile (analog in/out; thinkpad laptop) profile is not displayed reinitalize the internal audio card (thinkpad laptop). Hint : Find audio card profile via aplay -D ... , after listing all devices via aplay -l . Check for device name in pactl list cards output. Use one of the profiles displayed in the \"Part of profile...\" section in the output of pactl list cards for this device.","title":"set-card-profile | set card profile | bad audio"},{"location":"linux/audio/#get-default-output-device","text":"pactl get-default-sink","title":"get default output device"},{"location":"linux/audio/#reinitalize-card-driver-to-default-state","text":"alsactl init <card-id-number> # for internal card alsactl init 0","title":"reinitalize card driver to default state"},{"location":"linux/disk-management/","text":"Linux Disk Management How to list available disks fdisk -l","title":"Linux Disk Management"},{"location":"linux/disk-management/#linux-disk-management","text":"","title":"Linux Disk Management"},{"location":"linux/disk-management/#how-to-list-available-disks","text":"fdisk -l","title":"How to list available disks"},{"location":"linux/efi/","text":"EFI how to reinstall grub on my machines # verify this location [root@frame ~]# ls -alh /boot/{EFI,grub} /boot/EFI: total 16K drwxr-xr-x 4 root root 4,0K Sep 23 19:13 . drwxr-xr-x 4 root root 4,0K Jan 1 1970 .. drwxr-xr-x 2 root root 4,0K Aug 20 2024 GRUB drwxr-xr-x 2 root root 4,0K Sep 23 19:13 UpdateCapsule /boot/grub: total 224K drwxr-xr-x 7 root root 4,0K Jan 17 14:16 . drwxr-xr-x 4 root root 4,0K Jan 1 1970 .. drwxr-xr-x 2 root root 4,0K Jun 26 2024 fonts -rwxr-xr-x 1 root root 134K Jan 17 14:16 grub-btrfs.cfg -rwxr-xr-x 1 root root 5,5K Jan 17 14:16 grub.cfg -rwxr-xr-x 1 root root 1,0K Jun 26 2024 grubenv -rwxr-xr-x 1 root root 1,3K Aug 18 2024 grub-pre.cfg drwxr-xr-x 2 root root 4,0K Jul 2 2024 keyboards drwxr-xr-x 2 root root 8,0K Jan 17 14:16 locale drwxr-xr-x 3 root root 4,0K Jun 26 2024 themes drwxr-xr-x 2 root root 44K Jan 17 14:16 x86_64-efi # then run install [root@frame ~]# grub-install --target=x86_64-efi --efi-directory=/boot --boot-directory=/boot --bootloader-id=GRUB # final # verify this location [root@frame ~]# ls -alh /boot/grub/grub.cfg # then regenerate your config [root@frame ~]# grub-mkconfig -o /boot/grub/grub.cfg Note: if there is a grub update we should reinstall grub so the auto-generated config (e.g. snapper) will not break. (and obviously any manual config re-gen) unbootable after windows 11 installation Fix boot failure after installing windows 11 (or trying to install it ) it will flush your efi boot entry for the other disk you were using or the same but another parition, whichever. verify its missing 1.1. boot from usb 1.2. check output of efibootmgr locate your efi partition with fdisk -l 2.1. find the device and partition 2.2. mount it to check the path of the efi executable grubx64.efi. it should reside in /EFI/GRUB/grubx64.efi , this is \\EFI\\GRUB\\grubx64.efi to EFI re-add the entry # -d ... /dev/sdX or nvme drive # -p ... paritition number if not default 1 efibootmgr -c -d /dev/nvme0pX -L \"GRUB\" -l \"\\EFI\\GRUB\\grubx64.efi` boot order can be a problem, if have not found it to be (I only have a single ssd and I disconnected all other devices before retrying) if you have to change it use : efibootmgr -o XXXX","title":"EFI"},{"location":"linux/efi/#efi","text":"","title":"EFI"},{"location":"linux/efi/#how-to-reinstall-grub-on-my-machines","text":"# verify this location [root@frame ~]# ls -alh /boot/{EFI,grub} /boot/EFI: total 16K drwxr-xr-x 4 root root 4,0K Sep 23 19:13 . drwxr-xr-x 4 root root 4,0K Jan 1 1970 .. drwxr-xr-x 2 root root 4,0K Aug 20 2024 GRUB drwxr-xr-x 2 root root 4,0K Sep 23 19:13 UpdateCapsule /boot/grub: total 224K drwxr-xr-x 7 root root 4,0K Jan 17 14:16 . drwxr-xr-x 4 root root 4,0K Jan 1 1970 .. drwxr-xr-x 2 root root 4,0K Jun 26 2024 fonts -rwxr-xr-x 1 root root 134K Jan 17 14:16 grub-btrfs.cfg -rwxr-xr-x 1 root root 5,5K Jan 17 14:16 grub.cfg -rwxr-xr-x 1 root root 1,0K Jun 26 2024 grubenv -rwxr-xr-x 1 root root 1,3K Aug 18 2024 grub-pre.cfg drwxr-xr-x 2 root root 4,0K Jul 2 2024 keyboards drwxr-xr-x 2 root root 8,0K Jan 17 14:16 locale drwxr-xr-x 3 root root 4,0K Jun 26 2024 themes drwxr-xr-x 2 root root 44K Jan 17 14:16 x86_64-efi # then run install [root@frame ~]# grub-install --target=x86_64-efi --efi-directory=/boot --boot-directory=/boot --bootloader-id=GRUB # final # verify this location [root@frame ~]# ls -alh /boot/grub/grub.cfg # then regenerate your config [root@frame ~]# grub-mkconfig -o /boot/grub/grub.cfg Note: if there is a grub update we should reinstall grub so the auto-generated config (e.g. snapper) will not break. (and obviously any manual config re-gen)","title":"how to reinstall grub on my machines"},{"location":"linux/efi/#unbootable-after-windows-11-installation","text":"Fix boot failure after installing windows 11 (or trying to install it ) it will flush your efi boot entry for the other disk you were using or the same but another parition, whichever. verify its missing 1.1. boot from usb 1.2. check output of efibootmgr locate your efi partition with fdisk -l 2.1. find the device and partition 2.2. mount it to check the path of the efi executable grubx64.efi. it should reside in /EFI/GRUB/grubx64.efi , this is \\EFI\\GRUB\\grubx64.efi to EFI re-add the entry # -d ... /dev/sdX or nvme drive # -p ... paritition number if not default 1 efibootmgr -c -d /dev/nvme0pX -L \"GRUB\" -l \"\\EFI\\GRUB\\grubx64.efi` boot order can be a problem, if have not found it to be (I only have a single ssd and I disconnected all other devices before retrying) if you have to change it use : efibootmgr -o XXXX","title":"unbootable after windows 11 installation"},{"location":"linux/mkinitcpio/","text":"Initcpio Initramfs mkinitcpio Remove hooks from initramfs Remove hooks from Initcpio Adjust fallback_options in the .preset file for your kernel type. e.g. linux-lts.preset -S ... removes default hooks for fallback /etc/mkinitcpio.d/linux-lts.preset : ... fallback_options=\"-S autodetect,switchsnaprotorw,resume\"","title":"Initcpio Initramfs mkinitcpio"},{"location":"linux/mkinitcpio/#initcpio-initramfs-mkinitcpio","text":"","title":"Initcpio Initramfs mkinitcpio"},{"location":"linux/mkinitcpio/#remove-hooks-from-initramfs","text":"Remove hooks from Initcpio Adjust fallback_options in the .preset file for your kernel type. e.g. linux-lts.preset -S ... removes default hooks for fallback /etc/mkinitcpio.d/linux-lts.preset : ... fallback_options=\"-S autodetect,switchsnaprotorw,resume\"","title":"Remove hooks from initramfs"},{"location":"linux/power/","text":"Linux Power Management Current battery charge level find /sys/devices/ -name 'BAT*' -exec sh -c 'cat \"$0\"/capacity' {} \\;","title":"Linux Power Management"},{"location":"linux/power/#linux-power-management","text":"","title":"Linux Power Management"},{"location":"linux/power/#current-battery-charge-level","text":"find /sys/devices/ -name 'BAT*' -exec sh -c 'cat \"$0\"/capacity' {} \\;","title":"Current battery charge level"},{"location":"linux/arch/reinstall-grub/","text":"GRUB Reinstall EFI TBD BIOS Based on https://wiki.archlinux.org/index.php/GRUB#Installation and https://unix.stackexchange.com/a/346206 target_device=/dev/sda grub-install --target=i386-pc --boot-directory=/mnt/arch/boot --root-directory=/mnt/arch \"$target_device\"","title":"GRUB Reinstall"},{"location":"linux/arch/reinstall-grub/#grub-reinstall","text":"","title":"GRUB Reinstall"},{"location":"linux/arch/reinstall-grub/#efi","text":"TBD","title":"EFI"},{"location":"linux/arch/reinstall-grub/#bios","text":"Based on https://wiki.archlinux.org/index.php/GRUB#Installation and https://unix.stackexchange.com/a/346206 target_device=/dev/sda grub-install --target=i386-pc --boot-directory=/mnt/arch/boot --root-directory=/mnt/arch \"$target_device\"","title":"BIOS"},{"location":"linux/arch/unbootable-help/","text":"Unbootable: Help Fix initramfs, grub config or grub install. Or just chroot your system to fix a package. New config EFI + LUKS + BTRFS Arch Chroot loadkeys de mkdir /mnt-key cryptsetup open --key-file /mnt-key/crypto_keyfile.bin /dev/nvme0n1p2 crypt-root mkdir /mnt-root ## fetch info # # fetch most up-to-date mount point info mount -o ro /dev/mapper/crypt-root /mnt-root cat /mnt-root/etc/fstab # get subvol ids btrfs subvol list /mnt-root | less # unmount again to remount with appropriate options umount /mnt-root # root mount -o noatime,compress=zstd:3,ssd,discard,space_cache=v2,subvolid=412,subvol=/@ /dev/mapper/crypt-root /mnt-root # var log mount -o noatime,compress=zstd:3,ssd,discard,space_cache=v2,subvolid=258,subvol=/@varlog /dev/mapper/crypt-root /mnt-root/var/log # pacman pkgs mount -o noatime,compress=zstd:3,ssd,discard,space_cache=v2,subvolid=260,subvol=/@packages /dev/mapper/crypt-root /mnt-root/var/pacman/pkg # boot mount /dev/nvme0n1p1 /mnt-root/boot mount -t proc proc /mnt-root/proc mount -t sysfs sys /mnt-root/sys mount -o bind /dev /mnt-root/dev arch-chroot /mnt-root Re-create Initramfs mkinitcpio -P Reinstall Grub TBD Re-create Grub Config grub-mkconfig -o /boot/grub/grub.cfg Old config BIOS + LUKS + LVM + EXT4 Modified version of http://jasonwryan.com/blog/2012/02/13/chroot/ : # enable volume group vgchange -ay # show all available lvs lvdisplay | grep -i 'lv name' mkdir /mnt/arch mount /dev/mapper/VolGroup00-root /mnt/arch cd /mnt/arch # custom mounts mount /dev/mapper/VolGroup00-boot boot mount /dev/mapper/VolGroup00-var var mount /dev/mapper/VolGroup00-opt opt #mount /dev/mapper/VolGroup00-home home mount -t proc proc proc/ mount -t sysfs sys sys/ mount -o bind /dev dev/ # chroot . /bin/bash arch-chroot /mnt/arch","title":"Unbootable: Help"},{"location":"linux/arch/unbootable-help/#unbootable-help","text":"Fix initramfs, grub config or grub install. Or just chroot your system to fix a package.","title":"Unbootable: Help"},{"location":"linux/arch/unbootable-help/#new-config","text":"EFI + LUKS + BTRFS","title":"New config"},{"location":"linux/arch/unbootable-help/#arch-chroot","text":"loadkeys de mkdir /mnt-key cryptsetup open --key-file /mnt-key/crypto_keyfile.bin /dev/nvme0n1p2 crypt-root mkdir /mnt-root ## fetch info # # fetch most up-to-date mount point info mount -o ro /dev/mapper/crypt-root /mnt-root cat /mnt-root/etc/fstab # get subvol ids btrfs subvol list /mnt-root | less # unmount again to remount with appropriate options umount /mnt-root # root mount -o noatime,compress=zstd:3,ssd,discard,space_cache=v2,subvolid=412,subvol=/@ /dev/mapper/crypt-root /mnt-root # var log mount -o noatime,compress=zstd:3,ssd,discard,space_cache=v2,subvolid=258,subvol=/@varlog /dev/mapper/crypt-root /mnt-root/var/log # pacman pkgs mount -o noatime,compress=zstd:3,ssd,discard,space_cache=v2,subvolid=260,subvol=/@packages /dev/mapper/crypt-root /mnt-root/var/pacman/pkg # boot mount /dev/nvme0n1p1 /mnt-root/boot mount -t proc proc /mnt-root/proc mount -t sysfs sys /mnt-root/sys mount -o bind /dev /mnt-root/dev arch-chroot /mnt-root","title":"Arch Chroot"},{"location":"linux/arch/unbootable-help/#re-create-initramfs","text":"mkinitcpio -P","title":"Re-create Initramfs"},{"location":"linux/arch/unbootable-help/#reinstall-grub","text":"TBD","title":"Reinstall Grub"},{"location":"linux/arch/unbootable-help/#re-create-grub-config","text":"grub-mkconfig -o /boot/grub/grub.cfg","title":"Re-create Grub Config"},{"location":"linux/arch/unbootable-help/#old-config","text":"BIOS + LUKS + LVM + EXT4 Modified version of http://jasonwryan.com/blog/2012/02/13/chroot/ : # enable volume group vgchange -ay # show all available lvs lvdisplay | grep -i 'lv name' mkdir /mnt/arch mount /dev/mapper/VolGroup00-root /mnt/arch cd /mnt/arch # custom mounts mount /dev/mapper/VolGroup00-boot boot mount /dev/mapper/VolGroup00-var var mount /dev/mapper/VolGroup00-opt opt #mount /dev/mapper/VolGroup00-home home mount -t proc proc proc/ mount -t sysfs sys sys/ mount -o bind /dev dev/ # chroot . /bin/bash arch-chroot /mnt/arch","title":"Old config"},{"location":"linux/btrfs/snapper/","text":"Snapper Common Pitfalls 1st A snapshot I created for home ends up in root # Wrong but no error message snapper create -c home create -d \"2024-07-01\" Why? -c ... is a global option create -c ... is a command specific option ( cleanup-algorithm ) How can you avoid this? Use --config instead, the create command will complain as this is an invalid option for create . And obviously use the global option, not the commmand local option. snapper create --config home ... to snapper --config home create ... 2nd n/a","title":"Snapper"},{"location":"linux/btrfs/snapper/#snapper","text":"","title":"Snapper"},{"location":"linux/btrfs/snapper/#common-pitfalls","text":"","title":"Common Pitfalls"},{"location":"linux/btrfs/snapper/#1st","text":"A snapshot I created for home ends up in root # Wrong but no error message snapper create -c home create -d \"2024-07-01\" Why? -c ... is a global option create -c ... is a command specific option ( cleanup-algorithm ) How can you avoid this? Use --config instead, the create command will complain as this is an invalid option for create . And obviously use the global option, not the commmand local option. snapper create --config home ... to snapper --config home create ...","title":"1st"},{"location":"linux/btrfs/snapper/#2nd","text":"n/a","title":"2nd"},{"location":"linux/image-viewers/feh/","text":"Image viewer feh FEH Keyboard mappings Note : Up / Down /... refer to arrow keys From the manpage: \u27e8keypad +\u27e9, \u27e8Up\u27e9 [zoom_in] Zoom in \u27e8keypad -\u27e9, \u27e8Down\u27e9 [zoom_out] Zoom out *, \u27e8keypad *\u27e9 [zoom_default] Zoom to 100% /, \u27e8keypad /\u27e9 [zoom_fit] Zoom to fit the window size ! [zoom_fill] Zoom to fill the window size like --bg-fill \u27e8keypad Left\u27e9, \u27e8Ctrl+Left\u27e9 [scroll_left] Scroll to the left \u27e8keypad Right\u27e9, \u27e8Ctrl+Right\u27e9 [scroll_right] Scroll to the right \u27e8keypad up\u27e9, \u27e8Ctrl+Up\u27e9 [scroll_up] Scroll up \u27e8keypad Down\u27e9, \u27e8Ctrl+Down\u27e9 [scroll_down] Scroll down. Note that the scroll keys work without anti-aliasing for performance reasons; hit the render key after scrolling to anti-alias the image.","title":"Image viewer feh"},{"location":"linux/image-viewers/feh/#image-viewer-feh","text":"FEH","title":"Image viewer feh"},{"location":"linux/image-viewers/feh/#keyboard-mappings","text":"Note : Up / Down /... refer to arrow keys From the manpage: \u27e8keypad +\u27e9, \u27e8Up\u27e9 [zoom_in] Zoom in \u27e8keypad -\u27e9, \u27e8Down\u27e9 [zoom_out] Zoom out *, \u27e8keypad *\u27e9 [zoom_default] Zoom to 100% /, \u27e8keypad /\u27e9 [zoom_fit] Zoom to fit the window size ! [zoom_fill] Zoom to fill the window size like --bg-fill \u27e8keypad Left\u27e9, \u27e8Ctrl+Left\u27e9 [scroll_left] Scroll to the left \u27e8keypad Right\u27e9, \u27e8Ctrl+Right\u27e9 [scroll_right] Scroll to the right \u27e8keypad up\u27e9, \u27e8Ctrl+Up\u27e9 [scroll_up] Scroll up \u27e8keypad Down\u27e9, \u27e8Ctrl+Down\u27e9 [scroll_down] Scroll down. Note that the scroll keys work without anti-aliasing for performance reasons; hit the render key after scrolling to anti-alias the image.","title":"Keyboard mappings"},{"location":"linux/security/firejail/","text":"Firejail How to extract data from a firejailed process snatched from https://github.com/netblue30/firejail/issues/1812#issuecomment-372674179 $ firewardened-firefox ~/Standard\\ Notes\\ Backups/decrypt.html # _firewardened-app start https://github.com/diepfote/scripts/blob/5580f8121e3758f999da15418fd2b733c6194bf2/source-me/linux/posix-compliant-shells.sh#L123 # -> bash ... $ ps -ef | grep firefox | grep -v grep # get firejailed process -> /usr/bin/firejail ... $ ps -ef | grep 68676 | grep -v grep $ sudo firejail --join-filesystem=68702 ls -alh ~ $ firejail --put=<pid> <path-in-jail> <path-outside-of-jail> $ firejail --put=68702 Standard\\ Notes\\ Backups/2023-04-08T05-08-31.544Z.txt ~/asdf.txt How to put a file into a firejailed process snatched from https://github.com/netblue30/firejail/issues/1812#issuecomment-372674179 firejail --get=<pid> <path> firejail --get=68702 ~/Downloads/decrypted-sn-data.txt","title":"Firejail"},{"location":"linux/security/firejail/#firejail","text":"","title":"Firejail"},{"location":"linux/security/firejail/#how-to-extract-data-from-a-firejailed-process","text":"snatched from https://github.com/netblue30/firejail/issues/1812#issuecomment-372674179 $ firewardened-firefox ~/Standard\\ Notes\\ Backups/decrypt.html # _firewardened-app start https://github.com/diepfote/scripts/blob/5580f8121e3758f999da15418fd2b733c6194bf2/source-me/linux/posix-compliant-shells.sh#L123 # -> bash ... $ ps -ef | grep firefox | grep -v grep # get firejailed process -> /usr/bin/firejail ... $ ps -ef | grep 68676 | grep -v grep $ sudo firejail --join-filesystem=68702 ls -alh ~ $ firejail --put=<pid> <path-in-jail> <path-outside-of-jail> $ firejail --put=68702 Standard\\ Notes\\ Backups/2023-04-08T05-08-31.544Z.txt ~/asdf.txt","title":"How to extract data from a firejailed process"},{"location":"linux/security/firejail/#how-to-put-a-file-into-a-firejailed-process","text":"snatched from https://github.com/netblue30/firejail/issues/1812#issuecomment-372674179 firejail --get=<pid> <path> firejail --get=68702 ~/Downloads/decrypted-sn-data.txt","title":"How to put a file into a firejailed process"},{"location":"linux/systemd/automounts/","text":"Systemd automounts https://www.man7.org/linux/man-pages/man5/systemd.automount.5.html reload systemd fstab target after systemd-umount snatched from https://bbs.archlinux.org/viewtopic.php?pid=1515377#p1515377 sudo systemctl daemon-reload sudo systemctl restart local-fs.target reload crypttab ( /etc/crypttab ) snatched from https://bbs.archlinux.org/viewtopic.php?id=167639 sudo systemctl daemon-reload sudo systemctl restart cryptsetup.target","title":"Systemd automounts"},{"location":"linux/systemd/automounts/#systemd-automounts","text":"https://www.man7.org/linux/man-pages/man5/systemd.automount.5.html","title":"Systemd automounts"},{"location":"linux/systemd/automounts/#reload-systemd-fstab-target-after-systemd-umount","text":"snatched from https://bbs.archlinux.org/viewtopic.php?pid=1515377#p1515377 sudo systemctl daemon-reload sudo systemctl restart local-fs.target","title":"reload systemd fstab target after systemd-umount"},{"location":"linux/systemd/automounts/#reload-crypttab-etccrypttab","text":"snatched from https://bbs.archlinux.org/viewtopic.php?id=167639 sudo systemctl daemon-reload sudo systemctl restart cryptsetup.target","title":"reload crypttab (/etc/crypttab)"},{"location":"linux/systemd/commands/","text":"Systemd Commands systemd command cheatsheet https://gist.github.com/rusty-snake/e0d89f6b87521fe63bc47cb813d9405f get control group information about a process $ ls -alh /sys/fs/cgroup/\"$(awk -F : '{ print $3 }' < /proc/<PID>/cgroup)\" Show all displayable values for the group it resides in $ ls -alh /sys/fs/cgroup/\"$(awk -F : '{ print $3 }' < /proc/740/cgroup)\" total 0 drwxr-xr-x 2 root root 0 Nov 28 20:52 . drwxr-xr-x 10 root root 0 Nov 28 20:58 .. -r--r--r-- 1 root root 0 Nov 28 20:57 cgroup.controllers -r--r--r-- 1 root root 0 Nov 28 20:52 cgroup.events -rw-r--r-- 1 root root 0 Nov 28 20:57 cgroup.freeze --w------- 1 root root 0 Nov 28 20:57 cgroup.kill -rw-r--r-- 1 root root 0 Nov 28 20:57 cgroup.max.depth -rw-r--r-- 1 root root 0 Nov 28 20:57 cgroup.max.descendants -rw-r--r-- 1 root root 0 Nov 28 20:52 cgroup.procs -r--r--r-- 1 root root 0 Nov 28 20:57 cgroup.stat -rw-r--r-- 1 root root 0 Nov 28 20:52 cgroup.subtree_control -rw-r--r-- 1 root root 0 Nov 28 20:57 cgroup.threads -rw-r--r-- 1 root root 0 Nov 28 20:57 cgroup.type -rw-r--r-- 1 root root 0 Nov 28 20:52 cpu.idle -rw-r--r-- 1 root root 0 Nov 28 20:52 cpu.max -rw-r--r-- 1 root root 0 Nov 28 20:57 cpu.max.burst -rw-r--r-- 1 root root 0 Nov 28 20:57 cpu.pressure -rw-r--r-- 1 root root 0 Nov 28 20:52 cpuset.cpus -r--r--r-- 1 root root 0 Nov 28 20:57 cpuset.cpus.effective -rw-r--r-- 1 root root 0 Nov 28 20:57 cpuset.cpus.partition -rw-r--r-- 1 root root 0 Nov 28 20:52 cpuset.mems -r--r--r-- 1 root root 0 Nov 28 20:57 cpuset.mems.effective -r--r--r-- 1 root root 0 Nov 28 20:52 cpu.stat -rw-r--r-- 1 root root 0 Nov 28 20:57 cpu.uclamp.max -rw-r--r-- 1 root root 0 Nov 28 20:57 cpu.uclamp.min -rw-r--r-- 1 root root 0 Nov 28 20:52 cpu.weight -rw-r--r-- 1 root root 0 Nov 28 20:57 cpu.weight.nice -rw-r--r-- 1 root root 0 Nov 28 20:52 io.bfq.weight -rw-r--r-- 1 root root 0 Nov 28 20:57 io.latency -rw-r--r-- 1 root root 0 Nov 28 20:57 io.low -rw-r--r-- 1 root root 0 Nov 28 20:57 io.max -rw-r--r-- 1 root root 0 Nov 28 20:57 io.pressure -rw-r--r-- 1 root root 0 Nov 28 20:57 io.prio.class -r--r--r-- 1 root root 0 Nov 28 20:52 io.stat -rw-r--r-- 1 root root 0 Nov 28 20:52 io.weight -r--r--r-- 1 root root 0 Nov 28 20:54 memory.current -r--r--r-- 1 root root 0 Nov 28 20:52 memory.events -r--r--r-- 1 root root 0 Nov 28 20:54 memory.events.local -rw-r--r-- 1 root root 0 Nov 28 20:52 memory.high -rw-r--r-- 1 root root 0 Nov 28 20:52 memory.low -rw-r--r-- 1 root root 0 Nov 28 20:52 memory.max -rw-r--r-- 1 root root 0 Nov 28 20:52 memory.min -r--r--r-- 1 root root 0 Nov 28 20:54 memory.numa_stat -rw-r--r-- 1 root root 0 Nov 28 20:52 memory.oom.group -r--r--r-- 1 root root 0 Nov 28 20:54 memory.peak -rw-r--r-- 1 root root 0 Nov 28 20:54 memory.pressure --w------- 1 root root 0 Nov 28 20:54 memory.reclaim -r--r--r-- 1 root root 0 Nov 28 20:54 memory.stat -r--r--r-- 1 root root 0 Nov 28 20:54 memory.swap.current -r--r--r-- 1 root root 0 Nov 28 20:54 memory.swap.events -rw-r--r-- 1 root root 0 Nov 28 20:54 memory.swap.high -rw-r--r-- 1 root root 0 Nov 28 20:52 memory.swap.max -r--r--r-- 1 root root 0 Nov 28 20:54 memory.zswap.current -rw-r--r-- 1 root root 0 Nov 28 20:54 memory.zswap.max -r--r--r-- 1 root root 0 Nov 28 20:57 pids.current -r--r--r-- 1 root root 0 Nov 28 20:57 pids.events -rw-r--r-- 1 root root 0 Nov 28 20:52 pids.max Memory usage of group $ cat /sys/fs/cgroup/\"$(awk -F : '{ print $3 }' < /proc/740/cgroup)\"/memory.current 102809600","title":"Systemd Commands"},{"location":"linux/systemd/commands/#systemd-commands","text":"","title":"Systemd Commands"},{"location":"linux/systemd/commands/#systemd-command-cheatsheet","text":"https://gist.github.com/rusty-snake/e0d89f6b87521fe63bc47cb813d9405f","title":"systemd command cheatsheet"},{"location":"linux/systemd/commands/#get-control-group-information-about-a-process","text":"$ ls -alh /sys/fs/cgroup/\"$(awk -F : '{ print $3 }' < /proc/<PID>/cgroup)\"","title":"get control group information about a process"},{"location":"linux/systemd/commands/#show-all-displayable-values-for-the-group-it-resides-in","text":"$ ls -alh /sys/fs/cgroup/\"$(awk -F : '{ print $3 }' < /proc/740/cgroup)\" total 0 drwxr-xr-x 2 root root 0 Nov 28 20:52 . drwxr-xr-x 10 root root 0 Nov 28 20:58 .. -r--r--r-- 1 root root 0 Nov 28 20:57 cgroup.controllers -r--r--r-- 1 root root 0 Nov 28 20:52 cgroup.events -rw-r--r-- 1 root root 0 Nov 28 20:57 cgroup.freeze --w------- 1 root root 0 Nov 28 20:57 cgroup.kill -rw-r--r-- 1 root root 0 Nov 28 20:57 cgroup.max.depth -rw-r--r-- 1 root root 0 Nov 28 20:57 cgroup.max.descendants -rw-r--r-- 1 root root 0 Nov 28 20:52 cgroup.procs -r--r--r-- 1 root root 0 Nov 28 20:57 cgroup.stat -rw-r--r-- 1 root root 0 Nov 28 20:52 cgroup.subtree_control -rw-r--r-- 1 root root 0 Nov 28 20:57 cgroup.threads -rw-r--r-- 1 root root 0 Nov 28 20:57 cgroup.type -rw-r--r-- 1 root root 0 Nov 28 20:52 cpu.idle -rw-r--r-- 1 root root 0 Nov 28 20:52 cpu.max -rw-r--r-- 1 root root 0 Nov 28 20:57 cpu.max.burst -rw-r--r-- 1 root root 0 Nov 28 20:57 cpu.pressure -rw-r--r-- 1 root root 0 Nov 28 20:52 cpuset.cpus -r--r--r-- 1 root root 0 Nov 28 20:57 cpuset.cpus.effective -rw-r--r-- 1 root root 0 Nov 28 20:57 cpuset.cpus.partition -rw-r--r-- 1 root root 0 Nov 28 20:52 cpuset.mems -r--r--r-- 1 root root 0 Nov 28 20:57 cpuset.mems.effective -r--r--r-- 1 root root 0 Nov 28 20:52 cpu.stat -rw-r--r-- 1 root root 0 Nov 28 20:57 cpu.uclamp.max -rw-r--r-- 1 root root 0 Nov 28 20:57 cpu.uclamp.min -rw-r--r-- 1 root root 0 Nov 28 20:52 cpu.weight -rw-r--r-- 1 root root 0 Nov 28 20:57 cpu.weight.nice -rw-r--r-- 1 root root 0 Nov 28 20:52 io.bfq.weight -rw-r--r-- 1 root root 0 Nov 28 20:57 io.latency -rw-r--r-- 1 root root 0 Nov 28 20:57 io.low -rw-r--r-- 1 root root 0 Nov 28 20:57 io.max -rw-r--r-- 1 root root 0 Nov 28 20:57 io.pressure -rw-r--r-- 1 root root 0 Nov 28 20:57 io.prio.class -r--r--r-- 1 root root 0 Nov 28 20:52 io.stat -rw-r--r-- 1 root root 0 Nov 28 20:52 io.weight -r--r--r-- 1 root root 0 Nov 28 20:54 memory.current -r--r--r-- 1 root root 0 Nov 28 20:52 memory.events -r--r--r-- 1 root root 0 Nov 28 20:54 memory.events.local -rw-r--r-- 1 root root 0 Nov 28 20:52 memory.high -rw-r--r-- 1 root root 0 Nov 28 20:52 memory.low -rw-r--r-- 1 root root 0 Nov 28 20:52 memory.max -rw-r--r-- 1 root root 0 Nov 28 20:52 memory.min -r--r--r-- 1 root root 0 Nov 28 20:54 memory.numa_stat -rw-r--r-- 1 root root 0 Nov 28 20:52 memory.oom.group -r--r--r-- 1 root root 0 Nov 28 20:54 memory.peak -rw-r--r-- 1 root root 0 Nov 28 20:54 memory.pressure --w------- 1 root root 0 Nov 28 20:54 memory.reclaim -r--r--r-- 1 root root 0 Nov 28 20:54 memory.stat -r--r--r-- 1 root root 0 Nov 28 20:54 memory.swap.current -r--r--r-- 1 root root 0 Nov 28 20:54 memory.swap.events -rw-r--r-- 1 root root 0 Nov 28 20:54 memory.swap.high -rw-r--r-- 1 root root 0 Nov 28 20:52 memory.swap.max -r--r--r-- 1 root root 0 Nov 28 20:54 memory.zswap.current -rw-r--r-- 1 root root 0 Nov 28 20:54 memory.zswap.max -r--r--r-- 1 root root 0 Nov 28 20:57 pids.current -r--r--r-- 1 root root 0 Nov 28 20:57 pids.events -rw-r--r-- 1 root root 0 Nov 28 20:52 pids.max","title":"Show all displayable values for the group it resides in"},{"location":"linux/systemd/commands/#memory-usage-of-group","text":"$ cat /sys/fs/cgroup/\"$(awk -F : '{ print $3 }' < /proc/740/cgroup)\"/memory.current 102809600","title":"Memory usage of group"},{"location":"linux/ubuntu/apt/","text":"Apt package installer configure a proxy for Apt snatched from https://askubuntu.com/questions/257290/configure-proxy-for-apt /etc/apt/apt.conf : Acquire::http::Proxy \"http://yourproxyaddress:proxyport\";","title":"Apt package installer"},{"location":"linux/ubuntu/apt/#apt-package-installer","text":"","title":"Apt package installer"},{"location":"linux/ubuntu/apt/#configure-a-proxy-for-apt","text":"snatched from https://askubuntu.com/questions/257290/configure-proxy-for-apt /etc/apt/apt.conf : Acquire::http::Proxy \"http://yourproxyaddress:proxyport\";","title":"configure a proxy for Apt"},{"location":"linux/window-managers/i3/","text":"i3 window manager font settings $ cat ~/.Xresources ... Xft.antialias: true Xft.hinting: true Xft.rgba: rgb Xft.hintstyle: hintfull Xft.dpi: 100 Firefox scale entire UI about:config layout.css.devPixelsPerPx Chrome scale entire UI $ chromium --force-device-scale-factor=1.5","title":"i3"},{"location":"linux/window-managers/i3/#i3","text":"","title":"i3"},{"location":"linux/window-managers/i3/#window-manager-font-settings","text":"$ cat ~/.Xresources ... Xft.antialias: true Xft.hinting: true Xft.rgba: rgb Xft.hintstyle: hintfull Xft.dpi: 100","title":"window manager font settings"},{"location":"linux/window-managers/i3/#firefox-scale-entire-ui","text":"about:config layout.css.devPixelsPerPx","title":"Firefox scale entire UI"},{"location":"linux/window-managers/i3/#chrome-scale-entire-ui","text":"$ chromium --force-device-scale-factor=1.5","title":"Chrome scale entire UI"},{"location":"openssl--certificates/","text":"Openssl Create RSA key openssl genrsa -out ingress.key 4096 Show Github fingerprint for private key Snatched from https://stackoverflow.com/a/75735052 $ echo -n SHA256: ; openssl rsa -in /tmp/ingress.key -pubout -outform DER 2>/dev/null | openssl sha256 -binary | openssl base64 SHA256:tOLGohzjdDokOFbFqMk9j6uu7ljPSGy5ETYRLd98yV0= Show full certificate chain for pem file Snatched from https://superuser.com/a/1599687 openssl crl2pkcs7 -nocrl -certfile CHAINED.pem | openssl pkcs7 -print_certs -text -noout Fetch full certificate chain Show full ceritifcate chain (no verify -> faster) openssl s_client -showcerts -connect archlinux.org.net:443 -servername archlinux.org.net openssl s_client -showcerts -connect 95.217.163.246:443 -servername archlinux.org Show and verify full certificate chain Verification depth: 5 openssl s_client -showcerts -verify 5 -connect archlinux.org.net:443 -servername archlinux.org.net openssl s_client -showcerts -verify 5 -connect 95.217.163.246:443 -servername archlinux.org.net Extract public key from CRT/extract public key from Certificate Signing Request openssl x509 -in sd-ca-cert1.crt -noout -pubkey Extract public key from rsa private key openssl rsa -in sd.key -pubout View certificate signing request openssl req -in whatever.csr -noout -text Create certificate signing request (CSR) $ openssl req -new \\ -key ~/Documents/kubernetes/etc/kubernetes/pki/apiserver-etcd-client.key \\ -subj '/CN=kube-apiserver-etcd-client/O=system:masters' \\ -out kube-apiserver-etcd-client.csr # SAN cert $ openssl req -new \\ -key ingress.key \\ -subj '/C=AT/ST=Salzburg/L=Salzburg/O=Mister\\ Swiffer\\ Solutions\\ GmbH/OU=Accounting/CN=bookings.some.somewhere.cloud' \\ -addtext 'subjectAltName = DNS:bookings.some.somewhere.cloud' \\ -out cert-signing-request.csr Sign certificate signing request (CRT) # sign request (CRT) $ openssl x509 -req \\ -in kube-apiserver-etcd-client.csr \\ -out kube-apiserver-etcd-client.crt \\ -CA ~/Documents/kubernetes/etc/kubernetes/pki/etcd/ca.crt \\ -CAkey ~/Documents/kubernetes/etc/kubernetes/pki/etcd/ca.key \\ -CAcreateserial \\ -days 30 Signature ok subject=CN = kube-apiserver-etcd-client, O = system:masters Getting CA Private Key $ openssl x509 -in kube-apiserver-etcd-client.crt -noout -text Certificate: Data: Version: 1 (0x0) Serial Number: f9:25:5a:6c:02:fa:f8:16 Signature Algorithm: sha256WithRSAEncryption Issuer: CN = etcd-ca Validity Not Before: Mar 28 11:00:03 2020 GMT Not After : Apr 27 11:00:03 2020 GMT Subject: CN = kube-apiserver-etcd-client, O = system:masters Subject Public Key Info: Public Key Algorithm: rsaEncryption RSA Public-Key: (2048 bit) Modulus: 00:a8:f3:da:ec:28:d6:13:5d:67:9a:34:18:b3:83: 25:90:a6:d2:18:13:8f:02:63:9c:23:20:80:a8:02: dc:90:3e:23:75:29:ac:2c:d3:58:11:b1:e0:c7:2c: 3f:84:c2:22:f4:b5:84:c5:ce:e4:1d:fb:90:0d:43: e6:fa:6a:44:4d:62:af:8b:c0:c4:d2:5d:2e:3c:02: 2a:6b:79:f5:d6:62:d5:3b:6c:53:bb:df:86:81:73: db:14:9f:07:ca:8e:02:69:9f:43:f6:f6:0f:03:0e: 7e:e9:35:37:f8:1f:93:ad:68:b5:22:ac:cd:72:61: 32:02:42:48:14:74:77:e7:4d:cf:69:77:fc:91:62: 18:cf:8a:94:07:d0:31:2f:ee:09:43:f6:a7:48:23: a1:a4:de:a4:21:48:1b:da:d6:48:6c:99:ee:09:a7: 0a:e9:6e:47:88:4f:07:4b:88:c2:f5:0c:88:25:49: 95:be:4c:a6:3e:27:75:60:25:52:89:a3:63:1d:75: 15:23:a2:01:22:e2:b2:f2:a2:79:9e:a3:bf:5c:98: bf:72:ed:44:f6:62:40:96:8d:a2:ca:5e:0c:f7:d9: d1:e8:59:46:0f:1d:6d:16:09:8f:4c:66:07:96:f7: 2d:84:53:19:e5:17:3a:e1:0b:ee:56:22:9e:fe:af: 9d:c7 Exponent: 65537 (0x10001) Signature Algorithm: sha256WithRSAEncryption a1:d5:18:54:a7:9b:b0:e2:e7:5f:20:03:1a:a2:03:9d:10:e4: af:82:33:12:88:a8:2a:0a:53:46:6f:6d:65:e3:13:b8:ee:a0: 37:1a:7b:7e:84:a5:45:0c:2a:65:19:f3:b7:00:ea:a8:91:0c: 65:dc:bf:0b:67:9a:74:55:1b:91:68:6b:6d:d9:3a:55:69:e7: bf:78:c1:69:66:36:20:ba:a1:51:d3:9b:4a:8c:75:70:ce:e9: ca:91:b4:ec:65:9a:e2:0e:ae:06:87:9d:30:79:3e:fc:f9:60: 0f:4f:7a:1f:fb:a1:f1:eb:c5:f4:ab:1a:d4:bb:e3:46:f3:e0: 2c:20:ad:77:0a:64:e7:60:33:c0:dd:82:b0:70:25:4a:3d:e9: 71:72:f1:8b:c9:c2:58:49:50:4f:b1:5a:4b:9e:de:e9:0a:b7: a3:c0:54:47:b6:e0:5b:af:15:a4:f8:17:3b:a7:60:21:09:8d: 5b:4e:a7:5e:14:a4:6f:2a:d0:91:ee:39:f7:bb:89:04:e9:a0: 00:c1:0d:4a:90:04:ef:3d:31:2e:7d:e5:54:cf:3d:14:a2:ba: ce:1d:3d:b8:1e:cd:cc:ba:1d:f5:fd:5e:86:c6:14:27:4d:f3: d2:5d:0f:69:c7:57:0c:e4:32:f4:9f:23:44:2e:ea:1a:d1:36: 24:6a:dc:d4","title":"Openssl"},{"location":"openssl--certificates/#openssl","text":"","title":"Openssl"},{"location":"openssl--certificates/#create-rsa-key","text":"openssl genrsa -out ingress.key 4096","title":"Create RSA key"},{"location":"openssl--certificates/#show-github-fingerprint-for-private-key","text":"Snatched from https://stackoverflow.com/a/75735052 $ echo -n SHA256: ; openssl rsa -in /tmp/ingress.key -pubout -outform DER 2>/dev/null | openssl sha256 -binary | openssl base64 SHA256:tOLGohzjdDokOFbFqMk9j6uu7ljPSGy5ETYRLd98yV0=","title":"Show Github fingerprint for private key"},{"location":"openssl--certificates/#show-full-certificate-chain-for-pem-file","text":"Snatched from https://superuser.com/a/1599687 openssl crl2pkcs7 -nocrl -certfile CHAINED.pem | openssl pkcs7 -print_certs -text -noout","title":"Show full certificate chain for pem file"},{"location":"openssl--certificates/#fetch-full-certificate-chain","text":"","title":"Fetch full certificate chain"},{"location":"openssl--certificates/#show-full-ceritifcate-chain-no-verify-faster","text":"openssl s_client -showcerts -connect archlinux.org.net:443 -servername archlinux.org.net openssl s_client -showcerts -connect 95.217.163.246:443 -servername archlinux.org","title":"Show full ceritifcate chain (no verify -&gt; faster)"},{"location":"openssl--certificates/#show-and-verify-full-certificate-chain","text":"Verification depth: 5 openssl s_client -showcerts -verify 5 -connect archlinux.org.net:443 -servername archlinux.org.net openssl s_client -showcerts -verify 5 -connect 95.217.163.246:443 -servername archlinux.org.net","title":"Show and verify full certificate chain"},{"location":"openssl--certificates/#extract-public-key-from-crtextract-public-key-from-certificate-signing-request","text":"openssl x509 -in sd-ca-cert1.crt -noout -pubkey","title":"Extract public key from CRT/extract public key from Certificate Signing Request"},{"location":"openssl--certificates/#extract-public-key-from-rsa-private-key","text":"openssl rsa -in sd.key -pubout","title":"Extract public key from rsa private key"},{"location":"openssl--certificates/#view-certificate-signing-request","text":"openssl req -in whatever.csr -noout -text","title":"View certificate signing request"},{"location":"openssl--certificates/#create-certificate-signing-request-csr","text":"$ openssl req -new \\ -key ~/Documents/kubernetes/etc/kubernetes/pki/apiserver-etcd-client.key \\ -subj '/CN=kube-apiserver-etcd-client/O=system:masters' \\ -out kube-apiserver-etcd-client.csr # SAN cert $ openssl req -new \\ -key ingress.key \\ -subj '/C=AT/ST=Salzburg/L=Salzburg/O=Mister\\ Swiffer\\ Solutions\\ GmbH/OU=Accounting/CN=bookings.some.somewhere.cloud' \\ -addtext 'subjectAltName = DNS:bookings.some.somewhere.cloud' \\ -out cert-signing-request.csr","title":"Create certificate signing request (CSR)"},{"location":"openssl--certificates/#sign-certificate-signing-request-crt","text":"# sign request (CRT) $ openssl x509 -req \\ -in kube-apiserver-etcd-client.csr \\ -out kube-apiserver-etcd-client.crt \\ -CA ~/Documents/kubernetes/etc/kubernetes/pki/etcd/ca.crt \\ -CAkey ~/Documents/kubernetes/etc/kubernetes/pki/etcd/ca.key \\ -CAcreateserial \\ -days 30 Signature ok subject=CN = kube-apiserver-etcd-client, O = system:masters Getting CA Private Key $ openssl x509 -in kube-apiserver-etcd-client.crt -noout -text Certificate: Data: Version: 1 (0x0) Serial Number: f9:25:5a:6c:02:fa:f8:16 Signature Algorithm: sha256WithRSAEncryption Issuer: CN = etcd-ca Validity Not Before: Mar 28 11:00:03 2020 GMT Not After : Apr 27 11:00:03 2020 GMT Subject: CN = kube-apiserver-etcd-client, O = system:masters Subject Public Key Info: Public Key Algorithm: rsaEncryption RSA Public-Key: (2048 bit) Modulus: 00:a8:f3:da:ec:28:d6:13:5d:67:9a:34:18:b3:83: 25:90:a6:d2:18:13:8f:02:63:9c:23:20:80:a8:02: dc:90:3e:23:75:29:ac:2c:d3:58:11:b1:e0:c7:2c: 3f:84:c2:22:f4:b5:84:c5:ce:e4:1d:fb:90:0d:43: e6:fa:6a:44:4d:62:af:8b:c0:c4:d2:5d:2e:3c:02: 2a:6b:79:f5:d6:62:d5:3b:6c:53:bb:df:86:81:73: db:14:9f:07:ca:8e:02:69:9f:43:f6:f6:0f:03:0e: 7e:e9:35:37:f8:1f:93:ad:68:b5:22:ac:cd:72:61: 32:02:42:48:14:74:77:e7:4d:cf:69:77:fc:91:62: 18:cf:8a:94:07:d0:31:2f:ee:09:43:f6:a7:48:23: a1:a4:de:a4:21:48:1b:da:d6:48:6c:99:ee:09:a7: 0a:e9:6e:47:88:4f:07:4b:88:c2:f5:0c:88:25:49: 95:be:4c:a6:3e:27:75:60:25:52:89:a3:63:1d:75: 15:23:a2:01:22:e2:b2:f2:a2:79:9e:a3:bf:5c:98: bf:72:ed:44:f6:62:40:96:8d:a2:ca:5e:0c:f7:d9: d1:e8:59:46:0f:1d:6d:16:09:8f:4c:66:07:96:f7: 2d:84:53:19:e5:17:3a:e1:0b:ee:56:22:9e:fe:af: 9d:c7 Exponent: 65537 (0x10001) Signature Algorithm: sha256WithRSAEncryption a1:d5:18:54:a7:9b:b0:e2:e7:5f:20:03:1a:a2:03:9d:10:e4: af:82:33:12:88:a8:2a:0a:53:46:6f:6d:65:e3:13:b8:ee:a0: 37:1a:7b:7e:84:a5:45:0c:2a:65:19:f3:b7:00:ea:a8:91:0c: 65:dc:bf:0b:67:9a:74:55:1b:91:68:6b:6d:d9:3a:55:69:e7: bf:78:c1:69:66:36:20:ba:a1:51:d3:9b:4a:8c:75:70:ce:e9: ca:91:b4:ec:65:9a:e2:0e:ae:06:87:9d:30:79:3e:fc:f9:60: 0f:4f:7a:1f:fb:a1:f1:eb:c5:f4:ab:1a:d4:bb:e3:46:f3:e0: 2c:20:ad:77:0a:64:e7:60:33:c0:dd:82:b0:70:25:4a:3d:e9: 71:72:f1:8b:c9:c2:58:49:50:4f:b1:5a:4b:9e:de:e9:0a:b7: a3:c0:54:47:b6:e0:5b:af:15:a4:f8:17:3b:a7:60:21:09:8d: 5b:4e:a7:5e:14:a4:6f:2a:d0:91:ee:39:f7:bb:89:04:e9:a0: 00:c1:0d:4a:90:04:ef:3d:31:2e:7d:e5:54:cf:3d:14:a2:ba: ce:1d:3d:b8:1e:cd:cc:ba:1d:f5:fd:5e:86:c6:14:27:4d:f3: d2:5d:0f:69:c7:57:0c:e4:32:f4:9f:23:44:2e:ea:1a:d1:36: 24:6a:dc:d4","title":"Sign certificate signing request (CRT)"},{"location":"performance/","text":"Performance USE Method snatched from https://brendangregg.com/usemethod.html & youtube: Container Performance Analysis-bK9A5ODIgac cpu # all cpus mpstat -P ALL # cpu 1 mpstat -P 1 pagefaults | page faults Taken from: https://linoxide.com/commands-to-understand-page-faults-in-linux/ Field 1 - pid Field 2 - filename of the executable Field 10 - number of minor page faults Field 12 - number of major page faults cut -d ' ' -f 1,2,10,12 /proc/<pid>/stat memory $ man vmstat $ free -h # sort processes by memory consumption (gnu tools only) $ ps -eo pid,ppid,cmd,%mem,%cpu --sort=-%mem | head disks # -d ... display disk utilization report $ iostat --human --pretty -d network # run once $ sar -n DEV 1 1 # TCP stack $ sar -n TCP,ETCP 1 1 process usage pidstat -p <pid> # global pidstat kernel errors, no journalctl - no systemd dmesg | tail","title":"Performance"},{"location":"performance/#performance","text":"","title":"Performance"},{"location":"performance/#use-method","text":"snatched from https://brendangregg.com/usemethod.html & youtube: Container Performance Analysis-bK9A5ODIgac","title":"USE Method"},{"location":"performance/#cpu","text":"# all cpus mpstat -P ALL # cpu 1 mpstat -P 1","title":"cpu"},{"location":"performance/#pagefaults-page-faults","text":"Taken from: https://linoxide.com/commands-to-understand-page-faults-in-linux/ Field 1 - pid Field 2 - filename of the executable Field 10 - number of minor page faults Field 12 - number of major page faults cut -d ' ' -f 1,2,10,12 /proc/<pid>/stat","title":"pagefaults | page faults"},{"location":"performance/#memory","text":"$ man vmstat $ free -h # sort processes by memory consumption (gnu tools only) $ ps -eo pid,ppid,cmd,%mem,%cpu --sort=-%mem | head","title":"memory"},{"location":"performance/#disks","text":"# -d ... display disk utilization report $ iostat --human --pretty -d","title":"disks"},{"location":"performance/#network","text":"# run once $ sar -n DEV 1 1 # TCP stack $ sar -n TCP,ETCP 1 1","title":"network"},{"location":"performance/#process-usage","text":"pidstat -p <pid> # global pidstat","title":"process usage"},{"location":"performance/#kernel-errors-no-journalctl-no-systemd","text":"dmesg | tail","title":"kernel errors, no journalctl - no systemd"},{"location":"performance/containers/docker-podman/","text":"Docker containers container defaults podman run --security-opt=no-new-privileges \\ --rm \\ ... or even podman run --security-opt=no-new-privileges \\ --cap-drop=ALL \\ --rm \\ ... run a container with custom entrypoint podman run --security-opt=no-new-privileges \\ --cap-drop=ALL \\ --rm \\ --entrypoint=bash \\ -v (realpath ../qiime2_wrappers/qiime2/):/qiime2 \\ -it \\ --name planemo-instance \\ bgruening/planemo show namespace information (UTS, IPC, CGROUP, ...) docker ps --ns show cpu stats per process/per container # per second cpu stats per process $ pidstat 1 Linux 5.18.7-arch1-1 (lima-default) 07/07/2022 _x86_64_ (4 CPU) 08:55:58 AM UID PID %usr %system %guest %wait %CPU CPU Command 08:55:59 AM 0 16 0.00 0.99 0.00 0.00 0.99 0 rcu_preempt 08:55:59 AM 0 1371 0.00 4.95 0.00 0.00 4.95 1 kworker/u8:2-events_freezable_power_ 08:55:59 AM 0 1474 0.00 31.68 0.00 0.00 31.68 1 kworker/u8:11-btrfs-delalloc 08:55:59 AM 0 1475 0.00 23.76 0.00 0.00 23.76 2 kworker/u8:12-btrfs-delalloc 08:55:59 AM 501 2685 0.00 0.99 0.00 0.00 0.99 1 podman 08:55:59 AM 501 2706 15.84 54.46 0.00 4.95 70.30 3 bash 08:55:59 AM 501 2826 0.00 0.99 0.00 0.00 0.99 0 pidstat 08:55:59 AM UID PID %usr %system %guest %wait %CPU CPU Command 08:56:00 AM 0 1474 0.00 13.00 0.00 0.00 13.00 1 kworker/u8:11-btrfs-delalloc 08:56:00 AM 0 1475 0.00 49.00 0.00 0.00 49.00 3 kworker/u8:12-btrfs-delalloc 08:56:00 AM 501 2685 0.00 1.00 0.00 0.00 1.00 1 podman 08:56:00 AM 501 2706 13.00 54.00 0.00 6.00 67.00 2 bash 08:56:00 AM 501 2826 0.00 1.00 0.00 0.00 1.00 0 pidsta $ podman ps --ns CONTAINER ID NAMES PID CGROUPNS IPC MNT NET PIDNS USERNS UTS 0e07e6b36426 quizzical_elion 1484 4026532378 4026532376 4026532373 4026532305 4026532377 4026532303 4026532375 # per second cpu stats for pid 1484 $ pidstat 1 -p 1484 Linux 5.18.7-arch1-1 (lima-default) 07/07/2022 _x86_64_ (4 CPU) 08:45:32 AM UID PID %usr %system %guest %wait %CPU CPU Command 08:45:33 AM 501 1484 3.96 3.96 0.00 0.00 7.92 1 bash 08:45:34 AM 501 1484 5.00 2.00 0.00 1.00 7.00 0 bash container I/O | container IO # per second iostats for processes/containers $ pidstat -d 1 Linux 5.18.7-arch1-1 (lima-default) 07/07/2022 _x86_64_ (4 CPU) 08:54:44 AM UID PID kB_rd/s kB_wr/s kB_ccwr/s iodelay Command 08:54:45 AM 501 2706 0.00 8498.04 0.00 0 bash 08:54:45 AM UID PID kB_rd/s kB_wr/s kB_ccwr/s iodelay Command 08:54:46 AM 501 2706 0.00 8440.00 0.00 0 bash # per second iostats for pid $ pidstat -p 2706 -d 1 Linux 5.18.7-arch1-1 (lima-default) 07/07/2022 _x86_64_ (4 CPU) 08:55:09 AM UID PID kB_rd/s kB_wr/s kB_ccwr/s iodelay Command 08:55:10 AM 501 2706 0.00 8463.37 0.00 0 bash 08:55:11 AM 501 2706 0.00 8684.00 0.00 0 bash 08:55:12 AM 501 2706 0.00 8668.00 0.00 0 bash 08:55:13 AM 501 2706 0.00 8564.00 0.00 0 bash 08:55:14 AM 501 2706 0.00 8768.00 0.00 0 bash top for docker containers docker stats top for cgroups systemd-cgtop","title":"Docker containers"},{"location":"performance/containers/docker-podman/#docker-containers","text":"","title":"Docker containers"},{"location":"performance/containers/docker-podman/#container-defaults","text":"podman run --security-opt=no-new-privileges \\ --rm \\ ... or even podman run --security-opt=no-new-privileges \\ --cap-drop=ALL \\ --rm \\ ...","title":"container defaults"},{"location":"performance/containers/docker-podman/#run-a-container-with-custom-entrypoint","text":"podman run --security-opt=no-new-privileges \\ --cap-drop=ALL \\ --rm \\ --entrypoint=bash \\ -v (realpath ../qiime2_wrappers/qiime2/):/qiime2 \\ -it \\ --name planemo-instance \\ bgruening/planemo","title":"run a container with custom entrypoint"},{"location":"performance/containers/docker-podman/#show-namespace-information-uts-ipc-cgroup","text":"docker ps --ns","title":"show namespace information (UTS, IPC, CGROUP, ...)"},{"location":"performance/containers/docker-podman/#show-cpu-stats-per-processper-container","text":"# per second cpu stats per process $ pidstat 1 Linux 5.18.7-arch1-1 (lima-default) 07/07/2022 _x86_64_ (4 CPU) 08:55:58 AM UID PID %usr %system %guest %wait %CPU CPU Command 08:55:59 AM 0 16 0.00 0.99 0.00 0.00 0.99 0 rcu_preempt 08:55:59 AM 0 1371 0.00 4.95 0.00 0.00 4.95 1 kworker/u8:2-events_freezable_power_ 08:55:59 AM 0 1474 0.00 31.68 0.00 0.00 31.68 1 kworker/u8:11-btrfs-delalloc 08:55:59 AM 0 1475 0.00 23.76 0.00 0.00 23.76 2 kworker/u8:12-btrfs-delalloc 08:55:59 AM 501 2685 0.00 0.99 0.00 0.00 0.99 1 podman 08:55:59 AM 501 2706 15.84 54.46 0.00 4.95 70.30 3 bash 08:55:59 AM 501 2826 0.00 0.99 0.00 0.00 0.99 0 pidstat 08:55:59 AM UID PID %usr %system %guest %wait %CPU CPU Command 08:56:00 AM 0 1474 0.00 13.00 0.00 0.00 13.00 1 kworker/u8:11-btrfs-delalloc 08:56:00 AM 0 1475 0.00 49.00 0.00 0.00 49.00 3 kworker/u8:12-btrfs-delalloc 08:56:00 AM 501 2685 0.00 1.00 0.00 0.00 1.00 1 podman 08:56:00 AM 501 2706 13.00 54.00 0.00 6.00 67.00 2 bash 08:56:00 AM 501 2826 0.00 1.00 0.00 0.00 1.00 0 pidsta $ podman ps --ns CONTAINER ID NAMES PID CGROUPNS IPC MNT NET PIDNS USERNS UTS 0e07e6b36426 quizzical_elion 1484 4026532378 4026532376 4026532373 4026532305 4026532377 4026532303 4026532375 # per second cpu stats for pid 1484 $ pidstat 1 -p 1484 Linux 5.18.7-arch1-1 (lima-default) 07/07/2022 _x86_64_ (4 CPU) 08:45:32 AM UID PID %usr %system %guest %wait %CPU CPU Command 08:45:33 AM 501 1484 3.96 3.96 0.00 0.00 7.92 1 bash 08:45:34 AM 501 1484 5.00 2.00 0.00 1.00 7.00 0 bash","title":"show cpu stats per process/per container"},{"location":"performance/containers/docker-podman/#container-io-container-io","text":"# per second iostats for processes/containers $ pidstat -d 1 Linux 5.18.7-arch1-1 (lima-default) 07/07/2022 _x86_64_ (4 CPU) 08:54:44 AM UID PID kB_rd/s kB_wr/s kB_ccwr/s iodelay Command 08:54:45 AM 501 2706 0.00 8498.04 0.00 0 bash 08:54:45 AM UID PID kB_rd/s kB_wr/s kB_ccwr/s iodelay Command 08:54:46 AM 501 2706 0.00 8440.00 0.00 0 bash # per second iostats for pid $ pidstat -p 2706 -d 1 Linux 5.18.7-arch1-1 (lima-default) 07/07/2022 _x86_64_ (4 CPU) 08:55:09 AM UID PID kB_rd/s kB_wr/s kB_ccwr/s iodelay Command 08:55:10 AM 501 2706 0.00 8463.37 0.00 0 bash 08:55:11 AM 501 2706 0.00 8684.00 0.00 0 bash 08:55:12 AM 501 2706 0.00 8668.00 0.00 0 bash 08:55:13 AM 501 2706 0.00 8564.00 0.00 0 bash 08:55:14 AM 501 2706 0.00 8768.00 0.00 0 bash","title":"container I/O | container IO"},{"location":"performance/containers/docker-podman/#top-for-docker-containers","text":"docker stats","title":"top for docker containers"},{"location":"performance/containers/docker-podman/#top-for-cgroups","text":"systemd-cgtop","title":"top for cgroups"},{"location":"prometheus/","text":"Prometheus check max of metric in timeframe nicked from https://utcc.utoronto.ca/~cks/space/blog/sysadmin/PrometheusTimestampExpressions max_over_time ( ( timestamp( the_metric < VALUE ) ) [LOOK_BACK_X:RESOLUTION] ) max_over_time ( ( timestamp( the_metric < 22 ) ) [90d:1m] ) check blackbox exporter annotations for a service probe_http_status_code{job=~\"blackbox-http.*\",service=~\".*(minio).*\"}","title":"Prometheus"},{"location":"prometheus/#prometheus","text":"","title":"Prometheus"},{"location":"prometheus/#check-max-of-metric-in-timeframe","text":"nicked from https://utcc.utoronto.ca/~cks/space/blog/sysadmin/PrometheusTimestampExpressions max_over_time ( ( timestamp( the_metric < VALUE ) ) [LOOK_BACK_X:RESOLUTION] ) max_over_time ( ( timestamp( the_metric < 22 ) ) [90d:1m] )","title":"check max of metric in timeframe"},{"location":"prometheus/#check-blackbox-exporter-annotations-for-a-service","text":"probe_http_status_code{job=~\"blackbox-http.*\",service=~\".*(minio).*\"}","title":"check blackbox exporter annotations for a service"},{"location":"proxy/apache/","text":"Apache Block request | RewriteRule | RewriteCond RewriteRule Flags: https://httpd.apache.org/docs/2.4/rewrite/flags.html RewriteCond etc.: https://httpd.apache.org/docs/2.4/rewrite/remapping.html Rewrite commands ignore location blocks although you may put these commands inside locations blocks (not ignored if in a VirtualHost). Be sure to filter the URI path so it applies to the same path as the location block. <Location /a-path-of-sorts> RewriteCond %{REQUEST_URI} ^/a-path-of-sorts/.*asdf.*$ # \"-\" -> do not rewrite request (pass back as is) # \"F\" -> Forbidden # \"L\" -> stop processing more rules RewriteRule ^.*$ - [F,L] </Location> Hints: Always use beginning and end markers in RequestCond regex. Multiple RewriteCond are allowed. They have to directly preceed a RewriteRule to apply to it.","title":"Apache"},{"location":"proxy/apache/#apache","text":"","title":"Apache"},{"location":"proxy/apache/#block-request-rewriterule-rewritecond","text":"RewriteRule Flags: https://httpd.apache.org/docs/2.4/rewrite/flags.html RewriteCond etc.: https://httpd.apache.org/docs/2.4/rewrite/remapping.html Rewrite commands ignore location blocks although you may put these commands inside locations blocks (not ignored if in a VirtualHost). Be sure to filter the URI path so it applies to the same path as the location block. <Location /a-path-of-sorts> RewriteCond %{REQUEST_URI} ^/a-path-of-sorts/.*asdf.*$ # \"-\" -> do not rewrite request (pass back as is) # \"F\" -> Forbidden # \"L\" -> stop processing more rules RewriteRule ^.*$ - [F,L] </Location> Hints: Always use beginning and end markers in RequestCond regex. Multiple RewriteCond are allowed. They have to directly preceed a RewriteRule to apply to it.","title":"Block request | RewriteRule | RewriteCond"},{"location":"proxy/haproxy/","text":"Proxy Ha Proxy - HAProxy docs https://cbonte.github.io/haproxy-dconv/ https://www.haproxy.com/documentation/aloha/9-5/traffic-management/lb-layer7/http-rewrite/ https://wiki.archlinux.org/index.php/HAproxy redirect to abitrary url backend training http-request redirect location http://wiki.archlinux.org check url path beginning - check url path end frontend somename acl training_path path_beg -i /training acl training_path_all_the_way path_end -i /training # to AND rules specify them back to back use_backend test_redirect if training_path training_path_all_the_way acl_github_1","title":"Proxy"},{"location":"proxy/haproxy/#proxy","text":"","title":"Proxy"},{"location":"proxy/haproxy/#ha-proxy-haproxy","text":"","title":"Ha Proxy - HAProxy"},{"location":"proxy/haproxy/#docs","text":"https://cbonte.github.io/haproxy-dconv/ https://www.haproxy.com/documentation/aloha/9-5/traffic-management/lb-layer7/http-rewrite/ https://wiki.archlinux.org/index.php/HAproxy","title":"docs"},{"location":"proxy/haproxy/#redirect-to-abitrary-url","text":"backend training http-request redirect location http://wiki.archlinux.org","title":"redirect to abitrary url"},{"location":"proxy/haproxy/#check-url-path-beginning-check-url-path-end","text":"frontend somename acl training_path path_beg -i /training acl training_path_all_the_way path_end -i /training # to AND rules specify them back to back use_backend test_redirect if training_path training_path_all_the_way acl_github_1","title":"check url path beginning - check url path end"},{"location":"proxy/socat/","text":"SOCAT TCP port forwarder socat TCP4-LISTEN:9999 tcp4:www.google.com:80 & curl -H Host:google.com -v localhost:9999/index.html","title":"SOCAT"},{"location":"proxy/socat/#socat","text":"","title":"SOCAT"},{"location":"proxy/socat/#tcp-port-forwarder","text":"socat TCP4-LISTEN:9999 tcp4:www.google.com:80 & curl -H Host:google.com -v localhost:9999/index.html","title":"TCP port forwarder"},{"location":"python/collections/","text":"Python collections All of this is snatched from https://richardoyudo.com/posts/dataclass-vs-namedtuple-code-generators/ Data classes from dataclasses import dataclass, field @dataclass(order=True, frozen=True) class Order: name: str recipient: str address: str = field(compare=False, repr=False, metadata={'address_type': 'shipping'}) shipped: bool = False amount: float = 0 def tax_due(self) -> float: return self.amount * 5 / 100 NamedTuple from collections import namedtuple Order = namedtuple('Order', 'name recipient address') # Declaration of the named tuple order = Order(name='Face mask', recipient='Anastasia', address='10, Miso Street')","title":"Python collections"},{"location":"python/collections/#python-collections","text":"All of this is snatched from https://richardoyudo.com/posts/dataclass-vs-namedtuple-code-generators/","title":"Python collections"},{"location":"python/collections/#data-classes","text":"from dataclasses import dataclass, field @dataclass(order=True, frozen=True) class Order: name: str recipient: str address: str = field(compare=False, repr=False, metadata={'address_type': 'shipping'}) shipped: bool = False amount: float = 0 def tax_due(self) -> float: return self.amount * 5 / 100","title":"Data classes"},{"location":"python/collections/#namedtuple","text":"from collections import namedtuple Order = namedtuple('Order', 'name recipient address') # Declaration of the named tuple order = Order(name='Face mask', recipient='Anastasia', address='10, Miso Street')","title":"NamedTuple"},{"location":"python/datetime/","text":"Python Datetime import math import pytz # external dependency from datetime import datetime tz = pytz.timezone('Europe/Vienna') now = datetime.now(tz=tz) lifespan = \"30y\" years = int(duration_str[:-1]) point_in_time = datetime(now.year+years, now.month, now.day, 6, 0, 0, tzinfo=tz) delta = int(math.fabs((point_in_time - now).total_seconds())) print(f'delta: {delta} seconds')","title":"Python Datetime"},{"location":"python/datetime/#python-datetime","text":"import math import pytz # external dependency from datetime import datetime tz = pytz.timezone('Europe/Vienna') now = datetime.now(tz=tz) lifespan = \"30y\" years = int(duration_str[:-1]) point_in_time = datetime(now.year+years, now.month, now.day, 6, 0, 0, tzinfo=tz) delta = int(math.fabs((point_in_time - now).total_seconds())) print(f'delta: {delta} seconds')","title":"Python Datetime"},{"location":"python/file-editing/","text":"File editing consume first line in File def eat_first_line(fpath): ''' most of it snatched from https://stackoverflow.com/a/39791546 ''' new_fpath = f'{fpath}.new' source_file = open(fpath, 'r') # eat line source_file.readline() # this will truncate the file, so need to use a different file name: target_file = open(new_fpath, 'w') # copy contents from original file; omit first line (first line consumed) shutil.copyfileobj(source_file, target_file) # replace original file shutil.move(new_fpath, fpath) convert pickled dict to json | convert dict in a text file to json #!/usr/bin/env python3 # very much inspired by https://www.geeksforgeeks.org/how-to-read-dictionary-from-file-in-python/ import sys import ast import json pattern = \", {'path':\" for line in sys.stdin: if pattern in line: paths = line.split(pattern) for path in paths: sanitized_path = f\"{{'path':{path}\" else: sanitized_path = line loaded_dict = ast.literal_eval(sanitized_path) print(json.dumps(loaded_dict))","title":"File editing"},{"location":"python/file-editing/#file-editing","text":"","title":"File editing"},{"location":"python/file-editing/#consume-first-line-in-file","text":"def eat_first_line(fpath): ''' most of it snatched from https://stackoverflow.com/a/39791546 ''' new_fpath = f'{fpath}.new' source_file = open(fpath, 'r') # eat line source_file.readline() # this will truncate the file, so need to use a different file name: target_file = open(new_fpath, 'w') # copy contents from original file; omit first line (first line consumed) shutil.copyfileobj(source_file, target_file) # replace original file shutil.move(new_fpath, fpath)","title":"consume first line in File"},{"location":"python/file-editing/#convert-pickled-dict-to-json-convert-dict-in-a-text-file-to-json","text":"#!/usr/bin/env python3 # very much inspired by https://www.geeksforgeeks.org/how-to-read-dictionary-from-file-in-python/ import sys import ast import json pattern = \", {'path':\" for line in sys.stdin: if pattern in line: paths = line.split(pattern) for path in paths: sanitized_path = f\"{{'path':{path}\" else: sanitized_path = line loaded_dict = ast.literal_eval(sanitized_path) print(json.dumps(loaded_dict))","title":"convert pickled dict to json | convert dict in a text file to json"},{"location":"python/logging/","text":"logging add log formatting & output to console and file taken from https://docs.python.org/3/howto/logging-cookbook.html#logging-cookbook & https://stackoverflow.com/a/6386764 import logging logger = logging.getLogger('migration-sync') logger.setLevel(logging.DEBUG) formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s') fh = logging.FileHandler('/tmp/some.log') fh.setFormatter(formatter) fh.setLevel(logging.DEBUG) # console output ch = logging.StreamHandler() ch.setLevel(logging.INFO) logger.addHandler(ch) logger.addHandler(fh) logger.debug('testing 1 2') logger.info('testing 3 4') custom python logger module Check this example . python3 ./logging/using.py 2023-09-01 05:38:21,108 - whatever-you-want-to-name-this - INFO - something you want to log","title":"logging"},{"location":"python/logging/#logging","text":"","title":"logging"},{"location":"python/logging/#add-log-formatting-output-to-console-and-file","text":"taken from https://docs.python.org/3/howto/logging-cookbook.html#logging-cookbook & https://stackoverflow.com/a/6386764 import logging logger = logging.getLogger('migration-sync') logger.setLevel(logging.DEBUG) formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s') fh = logging.FileHandler('/tmp/some.log') fh.setFormatter(formatter) fh.setLevel(logging.DEBUG) # console output ch = logging.StreamHandler() ch.setLevel(logging.INFO) logger.addHandler(ch) logger.addHandler(fh) logger.debug('testing 1 2') logger.info('testing 3 4')","title":"add log formatting &amp; output to console and file"},{"location":"python/logging/#custom-python-logger-module","text":"Check this example . python3 ./logging/using.py 2023-09-01 05:38:21,108 - whatever-you-want-to-name-this - INFO - something you want to log","title":"custom python logger module"},{"location":"python/signal-handling/","text":"Python Signal Handling Taken from https://docs.python.org/3/library/signal.html Sidenote: Do not put this in a file called signal.py . Otherwise we override the module name. The following will happen ( https://stackoverflow.com/a/66055075 ): $ python /tmp/signal.py Traceback (most recent call last): File \"/tmp/signal.py\", line 2, in <module> import signal File \"/private/tmp/signal.py\", line 3, in <module> from signal import SIGINT ImportError: cannot import name 'SIGINT' from partially initialized module 'signal' (most likely due to a circular import) (/private/tmp/signal.py) -- import time import signal def sigterm_handler(signal_num, stack_frame): '''Default kill signal | Graceful termination''' print('Terminating') exit(0) def sigint_handler(signal_num, stack_frame): '''If someone presses ctrl-c''' print(\"Ctrl-C'ed by user.\") exit(0) def run_default_behavior(signal_num=None, stack_frame=None): print('main() executing') while True: print('still main()') time.sleep(2) def wait_on_signal(signal_num=None, stack_frame=None): print('pausing') signal.pause() signal.signal(signal.SIGTERM, sigterm_handler) signal.signal(signal.SIGINT, sigint_handler) signal.signal(signal.SIGUSR1, run_default_behavior) signal.signal(signal.SIGUSR2, wait_on_signal) run_default_behavior() Triggering it $ kill -SIGUSR2 \"$(ps -ef | grep -v grep | grep python | grep signal_test | awk '{ print $2 }')\" $ kill -SIGUSR1 \"$(ps -ef | grep -v grep | grep python | grep signal_test | awk '{ print $2 }')\" # graceful termination $ kill \"$(ps -ef | grep -v grep | grep python | grep signal_test | awk '{ print $2 }')\" $ kill -SIGTERM\"$(ps -ef | grep -v grep | grep python | grep signal_test | awk '{ print $2 }')\" # or ctrl-c $ kill -SIGINT \"$(ps -ef | grep -v grep | grep python | grep signal_test | awk '{ print $2 }')\" Output $ python /tmp/signal_test.py Still running... pausing running sync Still running... Still running... SIGTERM received exiting $ python /tmp/signal_test.py SIGINT received exiting","title":"Python Signal Handling"},{"location":"python/signal-handling/#python-signal-handling","text":"Taken from https://docs.python.org/3/library/signal.html Sidenote: Do not put this in a file called signal.py . Otherwise we override the module name. The following will happen ( https://stackoverflow.com/a/66055075 ): $ python /tmp/signal.py Traceback (most recent call last): File \"/tmp/signal.py\", line 2, in <module> import signal File \"/private/tmp/signal.py\", line 3, in <module> from signal import SIGINT ImportError: cannot import name 'SIGINT' from partially initialized module 'signal' (most likely due to a circular import) (/private/tmp/signal.py) -- import time import signal def sigterm_handler(signal_num, stack_frame): '''Default kill signal | Graceful termination''' print('Terminating') exit(0) def sigint_handler(signal_num, stack_frame): '''If someone presses ctrl-c''' print(\"Ctrl-C'ed by user.\") exit(0) def run_default_behavior(signal_num=None, stack_frame=None): print('main() executing') while True: print('still main()') time.sleep(2) def wait_on_signal(signal_num=None, stack_frame=None): print('pausing') signal.pause() signal.signal(signal.SIGTERM, sigterm_handler) signal.signal(signal.SIGINT, sigint_handler) signal.signal(signal.SIGUSR1, run_default_behavior) signal.signal(signal.SIGUSR2, wait_on_signal) run_default_behavior() Triggering it $ kill -SIGUSR2 \"$(ps -ef | grep -v grep | grep python | grep signal_test | awk '{ print $2 }')\" $ kill -SIGUSR1 \"$(ps -ef | grep -v grep | grep python | grep signal_test | awk '{ print $2 }')\" # graceful termination $ kill \"$(ps -ef | grep -v grep | grep python | grep signal_test | awk '{ print $2 }')\" $ kill -SIGTERM\"$(ps -ef | grep -v grep | grep python | grep signal_test | awk '{ print $2 }')\" # or ctrl-c $ kill -SIGINT \"$(ps -ef | grep -v grep | grep python | grep signal_test | awk '{ print $2 }')\" Output $ python /tmp/signal_test.py Still running... pausing running sync Still running... Still running... SIGTERM received exiting $ python /tmp/signal_test.py SIGINT received exiting","title":"Python Signal Handling"},{"location":"python/switch-case--pattern-matching/","text":"Pattern matching - Switch case /tmp/asdf.py : import sys match sys.argv[1]: case \"asdf\": print(\"asdf\") case \"123\": print(\"123\") case _: print(sys.argv[1]) Note : There is no implicit fall through: $ python /tmp/asdf.py 123 123 $ python /tmp/asdf.py asdf asdf $ python /tmp/asdf.py sdfa sdfa","title":"Pattern matching - Switch case"},{"location":"python/switch-case--pattern-matching/#pattern-matching-switch-case","text":"/tmp/asdf.py : import sys match sys.argv[1]: case \"asdf\": print(\"asdf\") case \"123\": print(\"123\") case _: print(sys.argv[1]) Note : There is no implicit fall through: $ python /tmp/asdf.py 123 123 $ python /tmp/asdf.py asdf asdf $ python /tmp/asdf.py sdfa sdfa","title":"Pattern matching - Switch case"},{"location":"python/virtualenv/","text":"Virtualenvs Setup new virtualenv rm -r ~/Library/Caches/pip; deactivate; rm -r .venv; virtualenv -p /usr/local/opt/python@3.9/bin/python3 .venv; source .venv/bin/activate rm -r ~/.cache/pip; deactivate; rm -r .venv; virtualenv -p python3 .venv; source .venv/bin/activate Pipfile to pyproject.toml | pipenv to poetry python3 -m pip install -U pipenv-poetry-migrate pipenv-poetry-migrate -f Pipfile -t pyproject.toml Add index server [tool.poetry.source] name = \"different-index-server\" url = \"https://index-server\" default = true Use poetry for package management only [tool.poetry] package-mode = false","title":"Virtualenvs"},{"location":"python/virtualenv/#virtualenvs","text":"","title":"Virtualenvs"},{"location":"python/virtualenv/#setup-new-virtualenv","text":"rm -r ~/Library/Caches/pip; deactivate; rm -r .venv; virtualenv -p /usr/local/opt/python@3.9/bin/python3 .venv; source .venv/bin/activate rm -r ~/.cache/pip; deactivate; rm -r .venv; virtualenv -p python3 .venv; source .venv/bin/activate","title":"Setup new virtualenv"},{"location":"python/virtualenv/#pipfile-to-pyprojecttoml-pipenv-to-poetry","text":"python3 -m pip install -U pipenv-poetry-migrate pipenv-poetry-migrate -f Pipfile -t pyproject.toml Add index server [tool.poetry.source] name = \"different-index-server\" url = \"https://index-server\" default = true","title":"Pipfile to pyproject.toml | pipenv to poetry"},{"location":"python/virtualenv/#use-poetry-for-package-management-only","text":"[tool.poetry] package-mode = false","title":"Use poetry for package management only"},{"location":"python/yaml/","text":"Python Yaml module Load yaml from string partially snatched from https://stackoverflow.com/a/21843713 from io import StringIO import yaml yaml_ = \"some:\\n - list element 1\\n - list element 2\" with StringIO(yaml_) as as_stream: as_dict = yaml.safe_load(as_stream) print(as_dict) Dict to yaml string import yaml as_dict = {'some': ['list element 1', 'list element 2']} a_string_again = yaml.dump(as_dict) print(a_string_again)","title":"Python Yaml module"},{"location":"python/yaml/#python-yaml-module","text":"","title":"Python Yaml module"},{"location":"python/yaml/#load-yaml-from-string","text":"partially snatched from https://stackoverflow.com/a/21843713 from io import StringIO import yaml yaml_ = \"some:\\n - list element 1\\n - list element 2\" with StringIO(yaml_) as as_stream: as_dict = yaml.safe_load(as_stream) print(as_dict)","title":"Load yaml from string"},{"location":"python/yaml/#dict-to-yaml-string","text":"import yaml as_dict = {'some': ['list element 1', 'list element 2']} a_string_again = yaml.dump(as_dict) print(a_string_again)","title":"Dict to yaml string"},{"location":"radare2/bit-twiddling/","text":"Bit Twiddling Flip Endianness - convert little endian to big endian This examples assumes a hex address, hence =16 In radare: [0x5632901196b0]> !rax2 =16 -e 0xd0066fda4e560000 0x564eda6f06d0 In your shell: rax2 =16 -e 0xd0066fda4e560000 0x564eda6f06d0 change bases base 16 to base 10 - hex to decimal $ rax2 30 0x1e base 10 to base 16 - decimal to hex $ rax2 =10 0x1e 30 NOTE : =xx uses rax2 's forced output mode. From the man page: =f floating point =2 binary =3 ternary =8 octal =10 decimal =16 hexadecimal NOTE : rax2 can also convert from a binary string to a number or hex string to character an vice versa.","title":"Bit Twiddling"},{"location":"radare2/bit-twiddling/#bit-twiddling","text":"","title":"Bit Twiddling"},{"location":"radare2/bit-twiddling/#flip-endianness-convert-little-endian-to-big-endian","text":"This examples assumes a hex address, hence =16 In radare: [0x5632901196b0]> !rax2 =16 -e 0xd0066fda4e560000 0x564eda6f06d0 In your shell: rax2 =16 -e 0xd0066fda4e560000 0x564eda6f06d0","title":"Flip Endianness - convert little endian to big endian"},{"location":"radare2/bit-twiddling/#change-bases","text":"base 16 to base 10 - hex to decimal $ rax2 30 0x1e base 10 to base 16 - decimal to hex $ rax2 =10 0x1e 30 NOTE : =xx uses rax2 's forced output mode. From the man page: =f floating point =2 binary =3 ternary =8 octal =10 decimal =16 hexadecimal NOTE : rax2 can also convert from a binary string to a number or hex string to character an vice versa.","title":"change bases"},{"location":"radare2/coredump/","text":"Radare analyze coredumps Load coredump $ r2 -d a.out /tmp/coredump WARN: Cannot resolve symbol address __libc_start_main WARN: Cannot resolve symbol address __gmon_start__ [0x7f8c4dc482a0]> dbt 0 0x7f8c4dc482a0 sp: 0x0 0 [??] rip map._usr_lib_ld_linux_x86_64.so.2.r_x+107168","title":"Radare analyze coredumps"},{"location":"radare2/coredump/#radare-analyze-coredumps","text":"","title":"Radare analyze coredumps"},{"location":"radare2/coredump/#load-coredump","text":"$ r2 -d a.out /tmp/coredump WARN: Cannot resolve symbol address __libc_start_main WARN: Cannot resolve symbol address __gmon_start__ [0x7f8c4dc482a0]> dbt 0 0x7f8c4dc482a0 sp: 0x0 0 [??] rip map._usr_lib_ld_linux_x86_64.so.2.r_x+107168","title":"Load coredump"},{"location":"radare2/debugger-run-with-arguments/","text":"run debugger with arguments start-up radare2 debugger with arguments snatched from https://stackoverflow.com/questions/39487888/radare2-how-to-pass-parameters-to-debugee/41515545#41515545 Hint: run ood if radare was not started in debug mode $ r2 -d a.out ex17.db.dat l [0x7f4161daa8a1]> ood PTRACE_CONT: No such process child received signal 9 INFO: File dbg:///home/flo/Desktop/c-exercises/a.out reopened in read-write mode [0x7f1498268730]> dcu main INFO: Continue until 0x557877e50804 using 1 bpsize hit breakpoint at: 0x557877e50804 or $ cat ./ex17.profile #!/usr/bin/rarun2 program=./a.out arg1=ex17.db.dat arg2=l $ r2 -r ex17.profile -d a.out [0x7fa545112730]> dcu main INFO: Continue until 0x5637c4ab7804 using 1 bpsize hit breakpoint at: 0x5637c4ab7804","title":"run debugger with arguments"},{"location":"radare2/debugger-run-with-arguments/#run-debugger-with-arguments","text":"","title":"run debugger with arguments"},{"location":"radare2/debugger-run-with-arguments/#start-up-radare2-debugger-with-arguments","text":"snatched from https://stackoverflow.com/questions/39487888/radare2-how-to-pass-parameters-to-debugee/41515545#41515545 Hint: run ood if radare was not started in debug mode $ r2 -d a.out ex17.db.dat l [0x7f4161daa8a1]> ood PTRACE_CONT: No such process child received signal 9 INFO: File dbg:///home/flo/Desktop/c-exercises/a.out reopened in read-write mode [0x7f1498268730]> dcu main INFO: Continue until 0x557877e50804 using 1 bpsize hit breakpoint at: 0x557877e50804 or $ cat ./ex17.profile #!/usr/bin/rarun2 program=./a.out arg1=ex17.db.dat arg2=l $ r2 -r ex17.profile -d a.out [0x7fa545112730]> dcu main INFO: Continue until 0x5637c4ab7804 using 1 bpsize hit breakpoint at: 0x5637c4ab7804","title":"start-up radare2 debugger with arguments"},{"location":"radare2/errors/","text":"Radare2 errors Cannot open '/proc/0/maps': No such file or directory This occurs if you ran dc <address> instead of dcu <address>","title":"Radare2 errors"},{"location":"radare2/errors/#radare2-errors","text":"","title":"Radare2 errors"},{"location":"radare2/errors/#cannot-open-proc0maps-no-such-file-or-directory","text":"This occurs if you ran dc <address> instead of dcu <address>","title":"Cannot open '/proc/0/maps': No such file or directory"},{"location":"radare2/general/","text":"General Print hex value of character $ rax2 -S J 4a man rax2 Print hex string as string $ rax2 -s 0x0000006c l Temporary seek Do this pd @0x1234 instead of s 0x1234 pd 32 Disable emulation Run native code instead of VM e asm.emu=false Debugger Continue / Debugger Stepping # single step instruction ds # step 10 instructions ds 10 # step over instruction (treat function calls as instructions) dso # step until address dsu <address> # continue until function start dcu <func-address>/<func-name> # continue until next breakpoint dc print registers show general purpose registers dr show registers related to conditionals drc ... for more information dr? print variables / print vars https://book.rada.re/analysis/variables.html radare helpers in functions - example Show example [0x55a216e282ec]> afvf 0x00000024 var_1ch: int64_t 0x00000020 var_18h: int64_t 0x00000010 var_8h: int64_t 0xffffffffffffffee arg2: int64_t 0xfffffffffffffff2 arg1: int64_t [0x55a216e282ec]> afvd var_18h pf q @rbp-0x18 [0x55a216e282ec]> afvd var_8h pf q @rbp-0x8 [0x55a216e282ec]> afvd arg1 pf r (rdi) [0x55a216e282ec]> x/s @rdi 0x7ffecd9b3fb9 ex17.db.dat 0x7ffecd9b3fc4 l 0x7ffecd9b3fc6 /Users/florian.begusch/Desktop/c-exercises/a.out [0x55a216e282ec]> ps @rdi ex17.db.dat [0x55a216e282ec]> afvd arg2 pf r (rsi) [0x55a216e282ec]> ps @rsi \\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff [0x55a216e282ec]> px 1 @rsi - offset - 6C6D 6E6F 7071 7273 7475 7677 7879 7A7B CDEF0123456789AB 0x0000006c ff . [0x55a216e282ec]> px 1 @rdi - offset - B9BA BBBC BDBE BFC0 C1C2 C3C4 C5C6 C7C8 9ABCDEF012345678 0x7ffecd9b3fb9 65 e [0x55a216e282ec]> afvd arg1 pf r (rdi) [0x55a216e282ec]> pf r (rdi) : rdi : 0x7ffecd9b3fb9 [0x55a216e282ec]> px 1 @ 0x7ffecd9b3fb9 - offset - B9BA BBBC BDBE BFC0 C1C2 C3C4 C5C6 C7C8 9ABCDEF012345678 0x7ffecd9b3fb9 65 e # ah this is actually a hardcoded character literal, no resolvable `rax2 -s 0x0000006c` [0x55a216e282ec]> pf r (rsi) : rsi : 0x0000006c","title":"General"},{"location":"radare2/general/#general","text":"","title":"General"},{"location":"radare2/general/#print-hex-value-of-character","text":"$ rax2 -S J 4a man rax2","title":"Print hex value of character"},{"location":"radare2/general/#print-hex-string-as-string","text":"$ rax2 -s 0x0000006c l","title":"Print hex string as string"},{"location":"radare2/general/#temporary-seek","text":"Do this pd @0x1234 instead of s 0x1234 pd 32","title":"Temporary seek"},{"location":"radare2/general/#disable-emulation","text":"Run native code instead of VM e asm.emu=false","title":"Disable emulation"},{"location":"radare2/general/#debugger-continue-debugger-stepping","text":"# single step instruction ds # step 10 instructions ds 10 # step over instruction (treat function calls as instructions) dso # step until address dsu <address> # continue until function start dcu <func-address>/<func-name> # continue until next breakpoint dc","title":"Debugger Continue / Debugger Stepping"},{"location":"radare2/general/#print-registers","text":"","title":"print registers"},{"location":"radare2/general/#show-general-purpose-registers","text":"dr","title":"show general purpose registers"},{"location":"radare2/general/#show-registers-related-to-conditionals","text":"drc ... for more information dr?","title":"show registers related to conditionals"},{"location":"radare2/general/#print-variables-print-vars","text":"https://book.rada.re/analysis/variables.html","title":"print variables / print vars"},{"location":"radare2/general/#radare-helpers-in-functions-example","text":"Show example [0x55a216e282ec]> afvf 0x00000024 var_1ch: int64_t 0x00000020 var_18h: int64_t 0x00000010 var_8h: int64_t 0xffffffffffffffee arg2: int64_t 0xfffffffffffffff2 arg1: int64_t [0x55a216e282ec]> afvd var_18h pf q @rbp-0x18 [0x55a216e282ec]> afvd var_8h pf q @rbp-0x8 [0x55a216e282ec]> afvd arg1 pf r (rdi) [0x55a216e282ec]> x/s @rdi 0x7ffecd9b3fb9 ex17.db.dat 0x7ffecd9b3fc4 l 0x7ffecd9b3fc6 /Users/florian.begusch/Desktop/c-exercises/a.out [0x55a216e282ec]> ps @rdi ex17.db.dat [0x55a216e282ec]> afvd arg2 pf r (rsi) [0x55a216e282ec]> ps @rsi \\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff [0x55a216e282ec]> px 1 @rsi - offset - 6C6D 6E6F 7071 7273 7475 7677 7879 7A7B CDEF0123456789AB 0x0000006c ff . [0x55a216e282ec]> px 1 @rdi - offset - B9BA BBBC BDBE BFC0 C1C2 C3C4 C5C6 C7C8 9ABCDEF012345678 0x7ffecd9b3fb9 65 e [0x55a216e282ec]> afvd arg1 pf r (rdi) [0x55a216e282ec]> pf r (rdi) : rdi : 0x7ffecd9b3fb9 [0x55a216e282ec]> px 1 @ 0x7ffecd9b3fb9 - offset - B9BA BBBC BDBE BFC0 C1C2 C3C4 C5C6 C7C8 9ABCDEF012345678 0x7ffecd9b3fb9 65 e # ah this is actually a hardcoded character literal, no resolvable `rax2 -s 0x0000006c` [0x55a216e282ec]> pf r (rsi) : rsi : 0x0000006c","title":"radare helpers in functions - example"},{"location":"radare2/print-memory/dereference-int-pointer/","text":"Dereference int pointer Setup update_integer does not do anything with its argument but it returns a pointer to a static integer in the function. integer_ptr is initialized with 1 . We want to see it change to 30 / 0x1e . int* update_integer(int new_int) { static int integer = 1; return &integer; } int* integer_ptr = update_integer(20); *integer_ptr = 30; Setup [0x7f4fffa2f2a0]> pd 1200 @ main | grep -C 5 update_integer 0x00201e48 00:0000 40 invalid 0x00201e49 00:0000 16 invalid 0x00201e4a 00:0000 488b4588 mov rax, qword [rbp - 0x78] ; ex22_main.c:0 ; rax=0xffffffffffffffff 0x00201e4e 00:0000 f20f1005e2e6. movsd xmm0, qword [0x00200538] ; ex22_main.c:62 *ratio_ptr = 123123123.0; ; [0x200538:8]=0x419d5ad6cc000000 0x00201e56 00:0000 f20f1100 movsd qword [rax], xmm0 0x00201e5a 00:0000 bf14000000 mov edi, 0x14 ; ex22_main.c:64 int* integer_ptr = update_integer(20); ; 20 ; rdi=0x14 0x00201e5f 00:0000 e85cfbffff call sym.update_integer ; rsp=0x7ffe469ccef8 ; rip=0x2019c0 ; sym.update_integer(0x0, 0x0, 0x0, 0x0) 0x00201e64 00:0000 488945e0 mov qword [rbp - 0x20], rax 0x00201e68 00:0000 488b4de0 mov rcx, qword [rbp - 0x20] ; ex22_main.c:65 *integer_ptr = 30; ; rcx=0xffffffffffffffff 0x00201e6c 00:0000 48894d80 mov qword [rbp - 0x80], rcx 0x00201e70 00:0000 4883f900 cmp rcx, 0 ; zf=0x0 ; cf=0x0 ; pf=0x1 ; sf=0x1 ; of=0x0 ; af=0x0 0x00201e74 00:0000 0f95c0 setne al ; al=0x1 [0x7f4fffa2f2a0]> dcu 0x00201e68 INFO: Continue until 0x00201e68 using 1 bpsize [INFO] (ex22_main.c:34:main()) My name: A Name, age: 37 [INFO] (ex22_main.c:41:main()) My age is now: 100 [INFO] (ex22_main.c:42:main()) My age is now: 123 [INFO] (ex22_main.c:46:main()) THE_SIZE is: 1000 [INFO] (ex22.c:33:print_size()) I think size is: 1000 [INFO] (ex22_main.c:51:main()) THE_SIZE is now: 9 [INFO] (ex22.c:33:print_size()) I think size is: 9 [INFO] (ex22_main.c:55:main()) Ratio at first: 1.000000 [INFO] (ex22_main.c:57:main()) Ratio again: 1.000000 [INFO] (ex22_main.c:58:main()) Ratio once more: 1.000000 INFO: hit breakpoint at: 0x201e68 [0x00201e68]> pd 20 ;-- rip: 0x00201e68 00:0000 488b4de0 mov rcx, qword [rbp - 0x20] ; ex22_main.c:65 *integer_ptr = 30; ; rcx=0x2041d8 rax 0x00201e6c 00:0000 48894d80 mov qword [rbp - 0x80], rcx 0x00201e70 00:0000 4883f900 cmp rcx, 0 ; zf=0x0 ; cf=0x0 ; pf=0x1 ; sf=0x0 ; of=0x0 ; af=0x0 0x00201e74 00:0000 0f95c0 setne al ; al=0x1 rcx 0x00201e77 00:0000 4883e103 and rcx, 3 ; rcx=0x0 ; zf=0x1 ; pf=0x1 ; sf=0x0 ; cf=0x0 ; of=0x0 0x00201e7b 00:0000 4883f900 cmp rcx, 0 ; zf=0x1 ; cf=0x0 ; pf=0x1 ; sf=0x0 ; of=0x0 ; af=0x0 0x00201e7f 00:0000 0f94c1 sete cl ; cl=0x1 rcx 0x00201e82 00:0000 20c8 and al, cl ; al=0x1 rcx ; zf=0x0 ; pf=0x0 ; sf=0x0 ; cf=0x0 ; of=0x0 0x00201e84 00:0000 a801 test al, 1 ; rcx ; zf=0x0 ; pf=0x0 ; sf=0x0 ; cf=0x0 ; of=0x0 \u250c\u2500< 0x00201e86 00:0000 0f8505000000 jne 0x201e91 ; rip=0x201e91 ; likely \u2502 0x00201e8c 00:0000 670fb9 ud2b \u2502 0x00201e8f 00:0000 40 invalid \u2502 0x00201e90 00:0000 16 invalid \u2514\u2500> 0x00201e91 00:0000 488b4580 mov rax, qword [rbp - 0x80] ; ex22_main.c:0 ; rax=0x0 0x00201e95 00:0000 c7001e000000 mov dword [rax], 0x1e ; ex22_main.c:65 *integer_ptr = 30; ; [0x1e:4]=-1 ; 30 0x00201e9b 00:0000 488b05fe1200. mov rax, qword [reloc.stderr] ; ex22_main.c:68 log_info(\"Ratio at the end: %f\", *update_ratio(300.0)); ; [0x2031a0:8]=0x7f4fff9eb6a0 ; rax=0x7f4fff9eb6a0 -> 0xfbad2887 0x00201ea2 00:0000 488b00 mov rax, qword [rax] ; rax=0x7f4fff9eb4e0 0x00201ea5 00:0000 48898570ffff. mov qword [rbp - 0x90], rax 0x00201eac 00:0000 f20f10057ce6. movsd xmm0, qword [0x00200530] ; [0x200530:8]=0x4072c00000000000 0x00201eb4 00:0000 e817fbffff call sym.update_ratio ; rsp=0x7ffe469cce38 -> 0xe0458948 ; rip=0x2019d0 ; sym.update_ratio(0x14, 0x7ffe469ccc90, 0x0, 0x1) [0x00201e68]> dcu 0x00201e9b INFO: Continue until 0x00201e9b using 1 bpsize INFO: hit breakpoint at: 0x201e9b Note : This is how a register is used to refer to a memory location (taken from above): \u2514\u2500> 0x00201e91 00:0000 488b4580 mov rax, qword [rbp - 0x80] ; ex22_main.c:0 ; rax=0x0 0x00201e95 00:0000 c7001e000000 mov dword [rax], 0x1e ; ex22_main.c:65 *integer_ptr = 30; ; [0x1e:4]=-1 ; 30 Dereference [0x00201e9b]> # show the current value for the rbp register [0x00201e9b]> dr rbp 0x7ffe469ccee0 [0x00201e9b]> pxq 4 @ rbp-0x80 0x7ffe469cce60 0x00000000002041d8 .A . [0x00201e9b]> pxq 4 @ 0x7ffe469ccee0-0x80 0x7ffe469cce60 0x00000000002041d8 .A . [0x00201e9b]> pxq 4 @ [0x7ffe469ccee0-0x80] 0x002041d8 0x000000000000001e .... [0x00201e9b]>","title":"Dereference int pointer"},{"location":"radare2/print-memory/dereference-int-pointer/#dereference-int-pointer","text":"","title":"Dereference int pointer"},{"location":"radare2/print-memory/dereference-int-pointer/#setup","text":"update_integer does not do anything with its argument but it returns a pointer to a static integer in the function. integer_ptr is initialized with 1 . We want to see it change to 30 / 0x1e . int* update_integer(int new_int) { static int integer = 1; return &integer; } int* integer_ptr = update_integer(20); *integer_ptr = 30; Setup [0x7f4fffa2f2a0]> pd 1200 @ main | grep -C 5 update_integer 0x00201e48 00:0000 40 invalid 0x00201e49 00:0000 16 invalid 0x00201e4a 00:0000 488b4588 mov rax, qword [rbp - 0x78] ; ex22_main.c:0 ; rax=0xffffffffffffffff 0x00201e4e 00:0000 f20f1005e2e6. movsd xmm0, qword [0x00200538] ; ex22_main.c:62 *ratio_ptr = 123123123.0; ; [0x200538:8]=0x419d5ad6cc000000 0x00201e56 00:0000 f20f1100 movsd qword [rax], xmm0 0x00201e5a 00:0000 bf14000000 mov edi, 0x14 ; ex22_main.c:64 int* integer_ptr = update_integer(20); ; 20 ; rdi=0x14 0x00201e5f 00:0000 e85cfbffff call sym.update_integer ; rsp=0x7ffe469ccef8 ; rip=0x2019c0 ; sym.update_integer(0x0, 0x0, 0x0, 0x0) 0x00201e64 00:0000 488945e0 mov qword [rbp - 0x20], rax 0x00201e68 00:0000 488b4de0 mov rcx, qword [rbp - 0x20] ; ex22_main.c:65 *integer_ptr = 30; ; rcx=0xffffffffffffffff 0x00201e6c 00:0000 48894d80 mov qword [rbp - 0x80], rcx 0x00201e70 00:0000 4883f900 cmp rcx, 0 ; zf=0x0 ; cf=0x0 ; pf=0x1 ; sf=0x1 ; of=0x0 ; af=0x0 0x00201e74 00:0000 0f95c0 setne al ; al=0x1 [0x7f4fffa2f2a0]> dcu 0x00201e68 INFO: Continue until 0x00201e68 using 1 bpsize [INFO] (ex22_main.c:34:main()) My name: A Name, age: 37 [INFO] (ex22_main.c:41:main()) My age is now: 100 [INFO] (ex22_main.c:42:main()) My age is now: 123 [INFO] (ex22_main.c:46:main()) THE_SIZE is: 1000 [INFO] (ex22.c:33:print_size()) I think size is: 1000 [INFO] (ex22_main.c:51:main()) THE_SIZE is now: 9 [INFO] (ex22.c:33:print_size()) I think size is: 9 [INFO] (ex22_main.c:55:main()) Ratio at first: 1.000000 [INFO] (ex22_main.c:57:main()) Ratio again: 1.000000 [INFO] (ex22_main.c:58:main()) Ratio once more: 1.000000 INFO: hit breakpoint at: 0x201e68 [0x00201e68]> pd 20 ;-- rip: 0x00201e68 00:0000 488b4de0 mov rcx, qword [rbp - 0x20] ; ex22_main.c:65 *integer_ptr = 30; ; rcx=0x2041d8 rax 0x00201e6c 00:0000 48894d80 mov qword [rbp - 0x80], rcx 0x00201e70 00:0000 4883f900 cmp rcx, 0 ; zf=0x0 ; cf=0x0 ; pf=0x1 ; sf=0x0 ; of=0x0 ; af=0x0 0x00201e74 00:0000 0f95c0 setne al ; al=0x1 rcx 0x00201e77 00:0000 4883e103 and rcx, 3 ; rcx=0x0 ; zf=0x1 ; pf=0x1 ; sf=0x0 ; cf=0x0 ; of=0x0 0x00201e7b 00:0000 4883f900 cmp rcx, 0 ; zf=0x1 ; cf=0x0 ; pf=0x1 ; sf=0x0 ; of=0x0 ; af=0x0 0x00201e7f 00:0000 0f94c1 sete cl ; cl=0x1 rcx 0x00201e82 00:0000 20c8 and al, cl ; al=0x1 rcx ; zf=0x0 ; pf=0x0 ; sf=0x0 ; cf=0x0 ; of=0x0 0x00201e84 00:0000 a801 test al, 1 ; rcx ; zf=0x0 ; pf=0x0 ; sf=0x0 ; cf=0x0 ; of=0x0 \u250c\u2500< 0x00201e86 00:0000 0f8505000000 jne 0x201e91 ; rip=0x201e91 ; likely \u2502 0x00201e8c 00:0000 670fb9 ud2b \u2502 0x00201e8f 00:0000 40 invalid \u2502 0x00201e90 00:0000 16 invalid \u2514\u2500> 0x00201e91 00:0000 488b4580 mov rax, qword [rbp - 0x80] ; ex22_main.c:0 ; rax=0x0 0x00201e95 00:0000 c7001e000000 mov dword [rax], 0x1e ; ex22_main.c:65 *integer_ptr = 30; ; [0x1e:4]=-1 ; 30 0x00201e9b 00:0000 488b05fe1200. mov rax, qword [reloc.stderr] ; ex22_main.c:68 log_info(\"Ratio at the end: %f\", *update_ratio(300.0)); ; [0x2031a0:8]=0x7f4fff9eb6a0 ; rax=0x7f4fff9eb6a0 -> 0xfbad2887 0x00201ea2 00:0000 488b00 mov rax, qword [rax] ; rax=0x7f4fff9eb4e0 0x00201ea5 00:0000 48898570ffff. mov qword [rbp - 0x90], rax 0x00201eac 00:0000 f20f10057ce6. movsd xmm0, qword [0x00200530] ; [0x200530:8]=0x4072c00000000000 0x00201eb4 00:0000 e817fbffff call sym.update_ratio ; rsp=0x7ffe469cce38 -> 0xe0458948 ; rip=0x2019d0 ; sym.update_ratio(0x14, 0x7ffe469ccc90, 0x0, 0x1) [0x00201e68]> dcu 0x00201e9b INFO: Continue until 0x00201e9b using 1 bpsize INFO: hit breakpoint at: 0x201e9b Note : This is how a register is used to refer to a memory location (taken from above): \u2514\u2500> 0x00201e91 00:0000 488b4580 mov rax, qword [rbp - 0x80] ; ex22_main.c:0 ; rax=0x0 0x00201e95 00:0000 c7001e000000 mov dword [rax], 0x1e ; ex22_main.c:65 *integer_ptr = 30; ; [0x1e:4]=-1 ; 30","title":"Setup"},{"location":"radare2/print-memory/dereference-int-pointer/#dereference","text":"[0x00201e9b]> # show the current value for the rbp register [0x00201e9b]> dr rbp 0x7ffe469ccee0 [0x00201e9b]> pxq 4 @ rbp-0x80 0x7ffe469cce60 0x00000000002041d8 .A . [0x00201e9b]> pxq 4 @ 0x7ffe469ccee0-0x80 0x7ffe469cce60 0x00000000002041d8 .A . [0x00201e9b]> pxq 4 @ [0x7ffe469ccee0-0x80] 0x002041d8 0x000000000000001e .... [0x00201e9b]>","title":"Dereference"},{"location":"radare2/print-memory/func-arg-is-just-int/","text":"Print printf argument if it is just an INT ................> pd 50 @ main ... 0x5585e1d801f1 00:0000 mov edx, dword [rbp - 0x2c] 0x5585e1d801f4 00:0000 mov eax, dword [rbp - 0x30] 0x5585e1d801f7 00:0000 mov esi, eax 0x5585e1d801f9 00:0000 b lea rax, str.The_first_area_is__d__the_2nd__d. ; 0x5585e1d81070 ; \"The first area is %d, the 2nd %d.\\n\" 0x5585e1d80200 00:0000 mov rdi, rax 0x5585e1d80203 00:0000 mov eax, 0 0x5585e1d80208 00:0000 call sym.imp.printf ... [0x7f8399f08730]> db @ 0x5585e1d801f1 [0x7f8399f08730]> dc [+] SIGNAL 28 errno=0 addr=0x00000000 code=128 si_pid=0 ret=0 [0x7f8399f08730]> dc The size of an int: 4 The size of areas (int[]): 20 The number of ints in areas: 5 hit breakpoint at: 0x5585e1d801f1 [0x5585e1d801f1]> pd 2 ;-- rip: 0x5585e1d801f1 00:0000 b mov edx, dword [rbp - 0x2c] 0x5585e1d801f4 00:0000 mov eax, dword [rbp - 0x30] [0x5585e1d801f1]> ds [0x5585e1d801f1]> pfb @ edx 0x0000000c = 0xff [0x5585e1d801f1]> pfb @ [rbp-0x2c] 0xd0000000c = 0xff [0x5585e1d801f1]> $ qalc 0xc 12 = 12 Sidenote : gdb shows that it cannot read memory, radare2 implicitly maps it to 0xff gef\u27a4 x/s $edx 0xc: <error: Cannot access memory at address 0xc> gef\u27a4 x/x $edx 0xc: Cannot access memory at address 0xc gef\u27a4 print $edx $1 = 0xc","title":"Print `printf` argument if it is just an INT"},{"location":"radare2/print-memory/func-arg-is-just-int/#print-printf-argument-if-it-is-just-an-int","text":"................> pd 50 @ main ... 0x5585e1d801f1 00:0000 mov edx, dword [rbp - 0x2c] 0x5585e1d801f4 00:0000 mov eax, dword [rbp - 0x30] 0x5585e1d801f7 00:0000 mov esi, eax 0x5585e1d801f9 00:0000 b lea rax, str.The_first_area_is__d__the_2nd__d. ; 0x5585e1d81070 ; \"The first area is %d, the 2nd %d.\\n\" 0x5585e1d80200 00:0000 mov rdi, rax 0x5585e1d80203 00:0000 mov eax, 0 0x5585e1d80208 00:0000 call sym.imp.printf ... [0x7f8399f08730]> db @ 0x5585e1d801f1 [0x7f8399f08730]> dc [+] SIGNAL 28 errno=0 addr=0x00000000 code=128 si_pid=0 ret=0 [0x7f8399f08730]> dc The size of an int: 4 The size of areas (int[]): 20 The number of ints in areas: 5 hit breakpoint at: 0x5585e1d801f1 [0x5585e1d801f1]> pd 2 ;-- rip: 0x5585e1d801f1 00:0000 b mov edx, dword [rbp - 0x2c] 0x5585e1d801f4 00:0000 mov eax, dword [rbp - 0x30] [0x5585e1d801f1]> ds [0x5585e1d801f1]> pfb @ edx 0x0000000c = 0xff [0x5585e1d801f1]> pfb @ [rbp-0x2c] 0xd0000000c = 0xff [0x5585e1d801f1]> $ qalc 0xc 12 = 12 Sidenote : gdb shows that it cannot read memory, radare2 implicitly maps it to 0xff gef\u27a4 x/s $edx 0xc: <error: Cannot access memory at address 0xc> gef\u27a4 x/x $edx 0xc: Cannot access memory at address 0xc gef\u27a4 print $edx $1 = 0xc","title":"Print printf argument if it is just an INT"},{"location":"radare2/print-memory/func-show-arguments-before-entering/","text":"Show function arguments before entering function [0x558cc804b852]> pd -10 @ rip 0x558cc804b830 00:0000 488945f0 mov qword [rbp - 0x10], rax 0x558cc804b834 00:0000 488b45d0 mov rax, qword [rbp - 0x30] ; rax=0x7ffec4c8c2f8 (pstr 0x7ffec4c8dfda) \"./a.out\" rbx 0x558cc804b838 00:0000 4883c010 add rax, 0x10 ; 16 ; rax=0x7ffec4c8c308 (pstr 0x7ffec4c8dfee) \"l\" ; of=0x0 ; sf=0x0 ; zf=0x0 ; cf=0x0 ; pf=0x0 ; af=0x0 0x558cc804b83c 00:0000 488b00 mov rax, qword [rax] ; rax=0x7ffec4c8dfee 0x558cc804b83f 00:0000 0fb600 movzx eax, byte [rax] ; rax=0x6c rsi 0x558cc804b842 00:0000 8845eb mov byte [rbp - 0x15], al 0x558cc804b845 00:0000 0fbe55eb movsx edx, byte [rbp - 0x15] ; rdx=0x6c rsi 0x558cc804b849 00:0000 488b45f0 mov rax, qword [rbp - 0x10] ; rax=0x7ffec4c8dfe2 rdi 0x558cc804b84d 00:0000 89d6 mov esi, edx ; rsi=0x6c rsi 0x558cc804b84f 00:0000 4889c7 mov rdi, rax ; rdi=0x7ffec4c8dfe2 [0x558cc804b852]> pd 3 @ rip ;-- rip: 0x558cc804b852 00:0000 e895faffff call sym.Database_open ; rsp=0x7ffec4c8c1a8 ; rip=0x558cc804b2ec ; sym.Database_open(0x7ffec4c8dfe2, 0x6c, 0x6c, 0x558cc804ddd8) 0x558cc804b857 00:0000 488945f8 mov qword [rbp - 8], rax 0x558cc804b85b 00:0000 c745ec000000. mov dword [rbp - 0x14], 0 [0x558cc804b852]> # print all argv [0x558cc804b852]> ps 30 @ [ rbp - 0x10 ] ex17.db.dat\\x00l\\x00./a.out\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00 # same as rdi if you take a look at the assembly above # null terminated after `...dat`, so arg is `ex17.db.dat` [0x558cc804b852]> ps 30 @ rdi ex17.db.dat\\x00l\\x00./a.out\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00 # second arg `mode` to `Database_open` is just a character literal. what is its value? # check the memory location -> 0x6c -> character `l` [0x558cc804b852]> px 1 @ rdx - offset - 6C6D 6E6F 7071 7273 7475 7677 7879 7A7B CDEF0123456789AB 0x0000006c ff $ rax2 -s 0x0000006c l","title":"Show function arguments before entering function"},{"location":"radare2/print-memory/func-show-arguments-before-entering/#show-function-arguments-before-entering-function","text":"[0x558cc804b852]> pd -10 @ rip 0x558cc804b830 00:0000 488945f0 mov qword [rbp - 0x10], rax 0x558cc804b834 00:0000 488b45d0 mov rax, qword [rbp - 0x30] ; rax=0x7ffec4c8c2f8 (pstr 0x7ffec4c8dfda) \"./a.out\" rbx 0x558cc804b838 00:0000 4883c010 add rax, 0x10 ; 16 ; rax=0x7ffec4c8c308 (pstr 0x7ffec4c8dfee) \"l\" ; of=0x0 ; sf=0x0 ; zf=0x0 ; cf=0x0 ; pf=0x0 ; af=0x0 0x558cc804b83c 00:0000 488b00 mov rax, qword [rax] ; rax=0x7ffec4c8dfee 0x558cc804b83f 00:0000 0fb600 movzx eax, byte [rax] ; rax=0x6c rsi 0x558cc804b842 00:0000 8845eb mov byte [rbp - 0x15], al 0x558cc804b845 00:0000 0fbe55eb movsx edx, byte [rbp - 0x15] ; rdx=0x6c rsi 0x558cc804b849 00:0000 488b45f0 mov rax, qword [rbp - 0x10] ; rax=0x7ffec4c8dfe2 rdi 0x558cc804b84d 00:0000 89d6 mov esi, edx ; rsi=0x6c rsi 0x558cc804b84f 00:0000 4889c7 mov rdi, rax ; rdi=0x7ffec4c8dfe2 [0x558cc804b852]> pd 3 @ rip ;-- rip: 0x558cc804b852 00:0000 e895faffff call sym.Database_open ; rsp=0x7ffec4c8c1a8 ; rip=0x558cc804b2ec ; sym.Database_open(0x7ffec4c8dfe2, 0x6c, 0x6c, 0x558cc804ddd8) 0x558cc804b857 00:0000 488945f8 mov qword [rbp - 8], rax 0x558cc804b85b 00:0000 c745ec000000. mov dword [rbp - 0x14], 0 [0x558cc804b852]> # print all argv [0x558cc804b852]> ps 30 @ [ rbp - 0x10 ] ex17.db.dat\\x00l\\x00./a.out\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00 # same as rdi if you take a look at the assembly above # null terminated after `...dat`, so arg is `ex17.db.dat` [0x558cc804b852]> ps 30 @ rdi ex17.db.dat\\x00l\\x00./a.out\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00 # second arg `mode` to `Database_open` is just a character literal. what is its value? # check the memory location -> 0x6c -> character `l` [0x558cc804b852]> px 1 @ rdx - offset - 6C6D 6E6F 7071 7273 7475 7677 7879 7A7B CDEF0123456789AB 0x0000006c ff $ rax2 -s 0x0000006c l","title":"Show function arguments before entering function"},{"location":"radare2/print-memory/print-struct-contents/","text":"Print struct contents (argument to func call) C struct to print -> Database* (FILE* ... address of FILE -> 8 byte address -> rdi+8) struct Connection { FILE *file; struct Database *db; }; void Database_load(struct Connection *conn) { } $ r2 -r ex17.profile -d a.out [0x5632901196b0]> px 8 @ rdi # FILE* - offset - B0B1 B2B3 B4B5 B6B7 B8B9 BABB BCBD BEBF 0123456789ABCDEF 0x564eda6f06b0 009a 70da 4e56 0000 ..p.NV.. [0x5632901196b0]> px 8 @ rdi+8 # Database* - offset - B8B9 BABB BCBD BEBF C0C1 C2C3 C4C5 C6C7 89ABCDEF01234567 0x564eda6f06b8 d006 6fda 4e56 0000 ..o.NV.. [0x5632901196b0]> px 16 @ rdi - offset - B0B1 B2B3 B4B5 B6B7 B8B9 BABB BCBD BEBF 0123456789ABCDEF 0x564eda6f06b0 009a 70da 4e56 0000 d006 6fda 4e56 0000 ..p.NV....o.NV.. [0x5632901196b0]> # flip endianness of memory address [0x5632901196b0]> !rax2 =16 -e 0xd0066fda4e560000 0x564eda6f06d0 [0x5632901196b0]> # Database contents [0x5632901196b0]> px 20 @ 0x564eda6f06d0 - offset - D0D1 D2D3 D4D5 D6D7 D8D9 DADB DCDD DEDF 0123456789ABCDEF 0x564eda6f06d0 0000 0000 0000 0000 0000 0000 0000 0000 ................ 0x564eda6f06e0 0000 0000 ....","title":"Print struct contents (argument to func call)"},{"location":"radare2/print-memory/print-struct-contents/#print-struct-contents-argument-to-func-call","text":"C struct to print -> Database* (FILE* ... address of FILE -> 8 byte address -> rdi+8) struct Connection { FILE *file; struct Database *db; }; void Database_load(struct Connection *conn) { } $ r2 -r ex17.profile -d a.out [0x5632901196b0]> px 8 @ rdi # FILE* - offset - B0B1 B2B3 B4B5 B6B7 B8B9 BABB BCBD BEBF 0123456789ABCDEF 0x564eda6f06b0 009a 70da 4e56 0000 ..p.NV.. [0x5632901196b0]> px 8 @ rdi+8 # Database* - offset - B8B9 BABB BCBD BEBF C0C1 C2C3 C4C5 C6C7 89ABCDEF01234567 0x564eda6f06b8 d006 6fda 4e56 0000 ..o.NV.. [0x5632901196b0]> px 16 @ rdi - offset - B0B1 B2B3 B4B5 B6B7 B8B9 BABB BCBD BEBF 0123456789ABCDEF 0x564eda6f06b0 009a 70da 4e56 0000 d006 6fda 4e56 0000 ..p.NV....o.NV.. [0x5632901196b0]> # flip endianness of memory address [0x5632901196b0]> !rax2 =16 -e 0xd0066fda4e560000 0x564eda6f06d0 [0x5632901196b0]> # Database contents [0x5632901196b0]> px 20 @ 0x564eda6f06d0 - offset - D0D1 D2D3 D4D5 D6D7 D8D9 DADB DCDD DEDF 0123456789ABCDEF 0x564eda6f06d0 0000 0000 0000 0000 0000 0000 0000 0000 ................ 0x564eda6f06e0 0000 0000 ....","title":"Print struct contents (argument to func call)"},{"location":"shells/bash/complete/","text":"bash completion basic $ blub() { COMPREPLY=(); COMPREPLY+=('asdf3'); COMPREPLY+=(3424); compopt -o nospace; } $ complete -o filenames -F blub test $ test 3424 asdf3 find which function is registered for completion https://stackoverflow.com/a/31073384 $ complete -p yay complete yay $ complete -p yay-all complete -F _yay-all_completions yay-all","title":"bash completion"},{"location":"shells/bash/complete/#bash-completion","text":"","title":"bash completion"},{"location":"shells/bash/complete/#basic","text":"$ blub() { COMPREPLY=(); COMPREPLY+=('asdf3'); COMPREPLY+=(3424); compopt -o nospace; } $ complete -o filenames -F blub test $ test 3424 asdf3","title":"basic"},{"location":"shells/bash/complete/#find-which-function-is-registered-for-completion","text":"https://stackoverflow.com/a/31073384 $ complete -p yay complete yay $ complete -p yay-all complete -F _yay-all_completions yay-all","title":"find which function is registered for completion"},{"location":"shells/bash/escapes/","text":"Bash escapes Bash how to escape a single quote in a single quoted string Here is how not to do it: $ echo 'Don\\'t do it' > Here is how to do it $ echo 'Don'\"'\"'t do it' Don't do it These amount to not one but several strings, so my title is wrong. 1st string: Don 2nd: \"'\" which outputs ' 3rd string: t do it","title":"Bash escapes"},{"location":"shells/bash/escapes/#bash-escapes","text":"","title":"Bash escapes"},{"location":"shells/bash/escapes/#bash-how-to-escape-a-single-quote-in-a-single-quoted-string","text":"","title":"Bash how to escape a single quote in a single quoted string"},{"location":"shells/bash/escapes/#here-is-how-not-to-do-it","text":"$ echo 'Don\\'t do it' >","title":"Here is how not to do it:"},{"location":"shells/bash/escapes/#here-is-how-to-do-it","text":"$ echo 'Don'\"'\"'t do it' Don't do it These amount to not one but several strings, so my title is wrong. 1st string: Don 2nd: \"'\" which outputs ' 3rd string: t do it","title":"Here is how to do it"},{"location":"shells/bash/keybindings/","text":"Bash keybindings keybinds to readline functions $ bind -p | grep beginning \"\\e<\": beginning-of-history \"\\C-a\": beginning-of-line \"\\eOH\": beginning-of-line \"\\e[1~\": beginning-of-line \"\\e[H\": beginning-of-line ... $ bind -P abort can be found on \"\\C-g\", \"\\C-x\\C-g\", \"\\e\\C-g\". accept-line can be found on \"\\C-j\", \"\\C-m\". alias-expand-line is not bound to any keys arrow-key-prefix is not bound to any keys backward-byte is not bound to any keys ... readline macros $ bind -S \\C-r outputs \\C-x1\\e^\\er $ bind -s \"\\C-r\": \"\\C-x1\\e^\\er\" bindings to shell commands $ bind -X \"\\C-x1\": \"__fzf_history\"","title":"Bash keybindings"},{"location":"shells/bash/keybindings/#bash-keybindings","text":"","title":"Bash keybindings"},{"location":"shells/bash/keybindings/#keybinds-to-readline-functions","text":"$ bind -p | grep beginning \"\\e<\": beginning-of-history \"\\C-a\": beginning-of-line \"\\eOH\": beginning-of-line \"\\e[1~\": beginning-of-line \"\\e[H\": beginning-of-line ... $ bind -P abort can be found on \"\\C-g\", \"\\C-x\\C-g\", \"\\e\\C-g\". accept-line can be found on \"\\C-j\", \"\\C-m\". alias-expand-line is not bound to any keys arrow-key-prefix is not bound to any keys backward-byte is not bound to any keys ...","title":"keybinds to readline functions"},{"location":"shells/bash/keybindings/#readline-macros","text":"$ bind -S \\C-r outputs \\C-x1\\e^\\er $ bind -s \"\\C-r\": \"\\C-x1\\e^\\er\"","title":"readline macros"},{"location":"shells/bash/keybindings/#bindings-to-shell-commands","text":"$ bind -X \"\\C-x1\": \"__fzf_history\"","title":"bindings to shell commands"},{"location":"shells/zsh/keybindings/","text":"ZSH key bindings Get current key binds $ bindkey \"^A\"-\"^C\" self-insert \"^D\" list-choices \"^E\"-\"^F\" self-insert \"^G\" list-expand ...","title":"ZSH key bindings"},{"location":"shells/zsh/keybindings/#zsh-key-bindings","text":"","title":"ZSH key bindings"},{"location":"shells/zsh/keybindings/#get-current-key-binds","text":"$ bindkey \"^A\"-\"^C\" self-insert \"^D\" list-choices \"^E\"-\"^F\" self-insert \"^G\" list-expand ...","title":"Get current key binds"},{"location":"sql/","text":"SQL Postgres List structures in Postgres \\dt ... list tables \\df ... list functions \\ds ... list sequences \\dn ... list schemas Run statements from a file while in prompt \\i /path/to/file If you want to redirect stdout (e.g. so you can save generated statements): \\o /path/to/drop.sql \\i /path/to/gen-drop.sql Drop all tables snatched parts from https://stackoverflow.com/a/3327326 $ cat /tmp/gen-drop.sql select 'drop table if exists \"' || tablename || '\" cascade;' from pg_tables; $ psql -p PORT -U USERNAME --dbname DB_NAME -hHOSTNAME < /tmp/gen-drop.sql > /tmp/drop.sql $ psql -p PORT -U USERNAME --dbname DB_NAME -hHOSTNAME < /tmp/drop.sql Run sql query on kubernetes pod And then fetch the result 1. echo 'SELECT ... ' > /tmp/my-query.sql # -c is not required, it is just to show case how to specify both path and container 2. kubectl cp -n namespace -c container /tmp/my-query.sql pod:/tmp/my-query 3. kubectl exec -it -n namespace pod -- bash 4. psql -p 5432 --username dbusername --dbname whatevername -h thehost.com < /tmp/my-query > /tmp/query_output.txt 5. kubectl cp -n namespace -c container pod:/tmp/query_output.txt /tmp/query_output.txt Drop by user drops schemas and tables -> do not do this if you need some of the schemas DROP OWNED by <username>; Drop Schema drop SCHEMA <name> cascade; Create Schema create SCHEMA <schema_name>; GRANT USAGE ON SCHEMA <schema_name> to <user>;","title":"SQL"},{"location":"sql/#sql","text":"","title":"SQL"},{"location":"sql/#postgres","text":"","title":"Postgres"},{"location":"sql/#list-structures-in-postgres","text":"\\dt ... list tables \\df ... list functions \\ds ... list sequences \\dn ... list schemas","title":"List structures in Postgres"},{"location":"sql/#run-statements-from-a-file-while-in-prompt","text":"\\i /path/to/file If you want to redirect stdout (e.g. so you can save generated statements): \\o /path/to/drop.sql \\i /path/to/gen-drop.sql","title":"Run statements from a file while in prompt"},{"location":"sql/#drop-all-tables","text":"snatched parts from https://stackoverflow.com/a/3327326 $ cat /tmp/gen-drop.sql select 'drop table if exists \"' || tablename || '\" cascade;' from pg_tables; $ psql -p PORT -U USERNAME --dbname DB_NAME -hHOSTNAME < /tmp/gen-drop.sql > /tmp/drop.sql $ psql -p PORT -U USERNAME --dbname DB_NAME -hHOSTNAME < /tmp/drop.sql","title":"Drop all tables"},{"location":"sql/#run-sql-query-on-kubernetes-pod","text":"And then fetch the result 1. echo 'SELECT ... ' > /tmp/my-query.sql # -c is not required, it is just to show case how to specify both path and container 2. kubectl cp -n namespace -c container /tmp/my-query.sql pod:/tmp/my-query 3. kubectl exec -it -n namespace pod -- bash 4. psql -p 5432 --username dbusername --dbname whatevername -h thehost.com < /tmp/my-query > /tmp/query_output.txt 5. kubectl cp -n namespace -c container pod:/tmp/query_output.txt /tmp/query_output.txt","title":"Run sql query on kubernetes pod"},{"location":"sql/#drop-by-user","text":"drops schemas and tables -> do not do this if you need some of the schemas DROP OWNED by <username>;","title":"Drop by user"},{"location":"sql/#drop-schema","text":"drop SCHEMA <name> cascade;","title":"Drop Schema"},{"location":"sql/#create-schema","text":"create SCHEMA <schema_name>; GRANT USAGE ON SCHEMA <schema_name> to <user>;","title":"Create Schema"},{"location":"ssh/","text":"SSH Options Disable strict host checking command line options ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null ... ssh config options Host somehost HostName localhost User ... Port ... StrictHostKeyChecking no UserKnownHostsFile=/dev/null IdentityFile ... ssh jump through bastion host first ssh <user>@<ip address> -J <jump host ip> More in the gentoo wiki ssh local port forward Forward connections on IP to localhost via the host localhost via port 60906 (this is actually the lima vm). Why? --> expose container in lima vm to local network of Mac. ssh -p 60906 -NT -L 10.157.80.56:8080:localhost:8080 localhost ssh dynamic port forward | ssh socks5 proxy # -D ... dynamic # -T ... no pseudo terminal allocation # -N ... do not execute remote command (just forward ports) # -f ... in background ssh -D 5555 -TN <ip-or-hostname> -f","title":"SSH"},{"location":"ssh/#ssh","text":"","title":"SSH"},{"location":"ssh/#options","text":"","title":"Options"},{"location":"ssh/#disable-strict-host-checking","text":"command line options ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null ... ssh config options Host somehost HostName localhost User ... Port ... StrictHostKeyChecking no UserKnownHostsFile=/dev/null IdentityFile ...","title":"Disable strict host checking"},{"location":"ssh/#ssh-jump-through-bastion-host-first","text":"ssh <user>@<ip address> -J <jump host ip> More in the gentoo wiki","title":"ssh jump through bastion host first"},{"location":"ssh/#ssh-local-port-forward","text":"Forward connections on IP to localhost via the host localhost via port 60906 (this is actually the lima vm). Why? --> expose container in lima vm to local network of Mac. ssh -p 60906 -NT -L 10.157.80.56:8080:localhost:8080 localhost","title":"ssh local port forward"},{"location":"ssh/#ssh-dynamic-port-forward-ssh-socks5-proxy","text":"# -D ... dynamic # -T ... no pseudo terminal allocation # -N ... do not execute remote command (just forward ports) # -f ... in background ssh -D 5555 -TN <ip-or-hostname> -f","title":"ssh dynamic port forward | ssh socks5 proxy"},{"location":"ssh/ssh-escape-sequences/","text":"SSH escape sequences [rootless@podman-remote ~]$ <return>~? Supported escape sequences: ~. - terminate connection (and any multiplexed sessions) ~B - send a BREAK to the remote system ~C - open a command line ~R - request rekey ~V/v - decrease/increase verbosity (LogLevel) ~^Z - suspend ssh ~# - list forwarded connections ~& - background ssh (when waiting for connections to terminate) ~? - this message ~~ - send the escape character by typing it twice","title":"SSH escape sequences"},{"location":"ssh/ssh-escape-sequences/#ssh-escape-sequences","text":"[rootless@podman-remote ~]$ <return>~? Supported escape sequences: ~. - terminate connection (and any multiplexed sessions) ~B - send a BREAK to the remote system ~C - open a command line ~R - request rekey ~V/v - decrease/increase verbosity (LogLevel) ~^Z - suspend ssh ~# - list forwarded connections ~& - background ssh (when waiting for connections to terminate) ~? - this message ~~ - send the escape character by typing it twice","title":"SSH escape sequences"},{"location":"storage/zfs/","text":"ZFS How to create a ZFS raidz2 sudo zpool create -f test-pool raidz2 ada1 ada2 ada3 vtbd0 How to simulate a ZFS failure https://wiki.archlinux.org/title/ZFS/Virtual_disks#Simulate_a_disk_failure_and_rebuild_the_Zpool Sidenote: Did this in the test below: DD drives in the raidz, scrub, show status, replace, show status. Raidz2 test 2024-03-24 raidz2 on freebsd. use 4 disks simulate failure: use the arch documentation as a reference qemu-img create -f qcow2 mfsbsd-raidz2-disk1.qcow2 5G ... qemu-system-x86_64 -smp 2 -m 4096 -hda mfsbsd-root-disk.qcow2 -nic user,hostfwd=tcp::10022-:22 -hdb mfsbsd-raidz2-disk1.qcow2 -hdc mfsbsd-raidz2-disk2.qcow2 -hdd mfsbsd-raidz2-disk3.qcow2 -drive file=mfsbsd-raidz2-disk4.qcow2,if=virtio,index=4,format=qcow2 -drive file=mfsbsd-raidz2-disk5.qcow2,if=virtio,index=5,format=qcow2 -drive file=mfsbsd-raidz2-disk6.qcow2,if=virtio,index=6,format=qcow2 sudo zpool create -f test-pool raidz2 ada1 ada2 ada3 vtbd0 sudo zpool status test-pool dd if=/dev/zero of=mfsbsd-raidz2-disk1.qcow2 bs=4M count=1 dd if=/dev/zero of=mfsbsd-raidz2-disk2.qcow2 bs=4M count=1 sudo zpool scrub test-pool sudo zpool status test-pool --- https://mfsbsd.vx.sk/ freebsd change keyboard layout: kbdcontrol -l de start install: bsdinstall basic admin setup pkg install bash sudo visudo jack ALL=(ALL) ALL","title":"ZFS"},{"location":"storage/zfs/#zfs","text":"","title":"ZFS"},{"location":"storage/zfs/#how-to-create-a-zfs-raidz2","text":"sudo zpool create -f test-pool raidz2 ada1 ada2 ada3 vtbd0","title":"How to create a ZFS raidz2"},{"location":"storage/zfs/#how-to-simulate-a-zfs-failure","text":"https://wiki.archlinux.org/title/ZFS/Virtual_disks#Simulate_a_disk_failure_and_rebuild_the_Zpool Sidenote: Did this in the test below: DD drives in the raidz, scrub, show status, replace, show status.","title":"How to simulate a ZFS failure"},{"location":"storage/zfs/#raidz2-test-2024-03-24","text":"raidz2 on freebsd. use 4 disks simulate failure: use the arch documentation as a reference qemu-img create -f qcow2 mfsbsd-raidz2-disk1.qcow2 5G ... qemu-system-x86_64 -smp 2 -m 4096 -hda mfsbsd-root-disk.qcow2 -nic user,hostfwd=tcp::10022-:22 -hdb mfsbsd-raidz2-disk1.qcow2 -hdc mfsbsd-raidz2-disk2.qcow2 -hdd mfsbsd-raidz2-disk3.qcow2 -drive file=mfsbsd-raidz2-disk4.qcow2,if=virtio,index=4,format=qcow2 -drive file=mfsbsd-raidz2-disk5.qcow2,if=virtio,index=5,format=qcow2 -drive file=mfsbsd-raidz2-disk6.qcow2,if=virtio,index=6,format=qcow2 sudo zpool create -f test-pool raidz2 ada1 ada2 ada3 vtbd0 sudo zpool status test-pool dd if=/dev/zero of=mfsbsd-raidz2-disk1.qcow2 bs=4M count=1 dd if=/dev/zero of=mfsbsd-raidz2-disk2.qcow2 bs=4M count=1 sudo zpool scrub test-pool sudo zpool status test-pool --- https://mfsbsd.vx.sk/ freebsd change keyboard layout: kbdcontrol -l de start install: bsdinstall basic admin setup pkg install bash sudo visudo jack ALL=(ALL) ALL","title":"Raidz2 test 2024-03-24"},{"location":"text-manipulation/awk/","text":"awk environment variables read -rp 'Enter a search value: ' value ((${#value} <= 1000)) || die \"No, I don't think so\" search=\"$value\" awk '$0 ~ ENVIRON[\"search\"] {print $1}' \"$file\" replace every newline character with a space except for every third remove new line characters but keep every third: $ printf '1\\n2\\n3\\n4\\n5\\n6\\n7' | awk 'NR %3 != 0 {printf \"%s \", $0; next} 1' 1 2 3 4 5 6 7 replace the first newline character with a hyphen/minus $ printf '1\\n2\\n3\\n4\\n5\\n6\\n7' | awk '{ if (NR == 1) { printf(\"%s - \", $0); } else { print $0 } }' 1 - 2 3 4 5 6 7 replace cut -d | custom field widths awk 'BEGIN{FIELDWIDTHS = \"10 25 9\"}; {print $3 $2 $1}' file Print column n to last | Print all but column x Snatched from https://stackoverflow.com/a/2961994 e.g. Remove first three columns awk '{$1=$2=$3=\"\"; print $0 }' <file>","title":"awk"},{"location":"text-manipulation/awk/#awk","text":"","title":"awk"},{"location":"text-manipulation/awk/#environment-variables","text":"read -rp 'Enter a search value: ' value ((${#value} <= 1000)) || die \"No, I don't think so\" search=\"$value\" awk '$0 ~ ENVIRON[\"search\"] {print $1}' \"$file\"","title":"environment variables"},{"location":"text-manipulation/awk/#replace-every-newline-character-with-a-space-except-for-every-third","text":"remove new line characters but keep every third: $ printf '1\\n2\\n3\\n4\\n5\\n6\\n7' | awk 'NR %3 != 0 {printf \"%s \", $0; next} 1' 1 2 3 4 5 6 7","title":"replace every newline character with a space except for every third"},{"location":"text-manipulation/awk/#replace-the-first-newline-character-with-a-hyphenminus","text":"$ printf '1\\n2\\n3\\n4\\n5\\n6\\n7' | awk '{ if (NR == 1) { printf(\"%s - \", $0); } else { print $0 } }' 1 - 2 3 4 5 6 7","title":"replace the first newline character with a hyphen/minus"},{"location":"text-manipulation/awk/#replace-cut-d-custom-field-widths","text":"awk 'BEGIN{FIELDWIDTHS = \"10 25 9\"}; {print $3 $2 $1}' file","title":"replace cut -d | custom field widths"},{"location":"text-manipulation/awk/#print-column-n-to-last-print-all-but-column-x","text":"Snatched from https://stackoverflow.com/a/2961994 e.g. Remove first three columns awk '{$1=$2=$3=\"\"; print $0 }' <file>","title":"Print column n to last | Print all but column x"},{"location":"text-manipulation/ed/","text":"Ed text editor | vim's built-in regex engine remove lines containing a pattern ed ~/.npmrc < <(echo 'g/subdomain.domain.some.where/d'; echo w)","title":"Ed text editor | vim's built-in regex engine"},{"location":"text-manipulation/ed/#ed-text-editor-vims-built-in-regex-engine","text":"","title":"Ed text editor | vim's built-in regex engine"},{"location":"text-manipulation/ed/#remove-lines-containing-a-pattern","text":"ed ~/.npmrc < <(echo 'g/subdomain.domain.some.where/d'; echo w)","title":"remove lines containing a pattern"},{"location":"text-manipulation/grep/","text":"grep -o print only matching characters $ ip addr | grep -o 'inet6\\? \\(addr:\\)\\?\\s\\?\\(\\(\\([0-9]\\+\\.\\)\\{3\\}[0-9]\\+\\)\\|[a-fA-F0-9:]\\+\\)' inet 127.0.0.1 inet 192.168.0.126 inet 10.17.0.7","title":"grep"},{"location":"text-manipulation/grep/#grep","text":"","title":"grep"},{"location":"text-manipulation/grep/#-o-print-only-matching-characters","text":"$ ip addr | grep -o 'inet6\\? \\(addr:\\)\\?\\s\\?\\(\\(\\([0-9]\\+\\.\\)\\{3\\}[0-9]\\+\\)\\|[a-fA-F0-9:]\\+\\)' inet 127.0.0.1 inet 192.168.0.126 inet 10.17.0.7","title":"-o  print only matching characters"},{"location":"text-manipulation/sed/","text":"Sed Substitute replace n-th occurrence of a pattern in a line - replace first occurrence of a pattern in a line $ echo 'otherotherotherother' | sed 's#other#()#1' other()otherother replace n-th occurrence in the entire file only - replace first occurrence of a pattern in the entire file snatched from https://stackoverflow.com/a/148473 sed -i '0,/PATTERN/s/PATTERN/REPLACEMENT/' \"$tmp_f\" multi-line replacement use backslashes to indicate input continues (new lines). echo '.Ah \"Major Heading\"' | sed ' /^\\.Ah/{ s#\\.Ah *#\\ \\ @A HEAD = # s/\"//g s/$/\\ / }' Insert inserted content will not be affected by subsequent commands $ echo -e 'something\\nother bli bla blub\\n\\n\\nasdf' \\ | sed -r '/other/i\\ 4700 Cross Court\\ French Lick, IN s#French#NOT IT# s#other#OTHER# ' something 4700 Cross Court French Lick, IN OTHER bli bla blub asdf Append appended content will not be affected by subsequent commands $ echo -e 'something\\nother bli bla blub\\n\\n\\nasdf' \\ | sed -r '/other/a\\ 4700 Cross Court\\ French Lick, IN s#French#NOT IT# s#other#OTHER# ' something OTHER bli bla blub 4700 Cross Court French Lick, IN asdf Change The change command replaces the contents of the pattern space with the text you provide. In effect, it deletes the current line and puts the supplied text in its place. It can be used when you want to match a line and replace it entirely. $ echo -e 'something\\nother bli bla blub\\n\\n\\nasdf' \\ | sed -r '/other/c\\ 4700 Cross Court\\ French Lick, IN s#French#NOT IT# s#other#OTHER# ' something 4700 Cross Court French Lick, IN asdf List The list command (l) displays the contents of the pattern space, showing non- printing characters as two-digit ASCII codes. Transform Think of it as translate char to char. $ echo -e 'something\\nother bli bla blub\\n\\n\\nasdf' | sed 'y/abc/xyz/' something other yli ylx yluy xsdf Print The print command (p) causes the contents of the pattern space to be output. It does not clear the pattern space nor does it change the flow of control in the script. However, it is frequently used before commands (d, N, b) that do change flow control. Unless the default output is suppressed (-n), the print command will cause duplicate copies of a line to be output Print line number $ echo -e 'something\\n\\tif\\nother bli bla blubr\\n\\n\\nasdf' | sed \"/$(echo -n -e '\\t')if/{ = p }\" something 2 if if other bli bla blubr asdf","title":"Sed"},{"location":"text-manipulation/sed/#sed","text":"","title":"Sed"},{"location":"text-manipulation/sed/#substitute","text":"replace n-th occurrence of a pattern in a line - replace first occurrence of a pattern in a line $ echo 'otherotherotherother' | sed 's#other#()#1' other()otherother replace n-th occurrence in the entire file only - replace first occurrence of a pattern in the entire file snatched from https://stackoverflow.com/a/148473 sed -i '0,/PATTERN/s/PATTERN/REPLACEMENT/' \"$tmp_f\" multi-line replacement use backslashes to indicate input continues (new lines). echo '.Ah \"Major Heading\"' | sed ' /^\\.Ah/{ s#\\.Ah *#\\ \\ @A HEAD = # s/\"//g s/$/\\ / }'","title":"Substitute"},{"location":"text-manipulation/sed/#insert","text":"inserted content will not be affected by subsequent commands $ echo -e 'something\\nother bli bla blub\\n\\n\\nasdf' \\ | sed -r '/other/i\\ 4700 Cross Court\\ French Lick, IN s#French#NOT IT# s#other#OTHER# ' something 4700 Cross Court French Lick, IN OTHER bli bla blub asdf","title":"Insert"},{"location":"text-manipulation/sed/#append","text":"appended content will not be affected by subsequent commands $ echo -e 'something\\nother bli bla blub\\n\\n\\nasdf' \\ | sed -r '/other/a\\ 4700 Cross Court\\ French Lick, IN s#French#NOT IT# s#other#OTHER# ' something OTHER bli bla blub 4700 Cross Court French Lick, IN asdf","title":"Append"},{"location":"text-manipulation/sed/#change","text":"The change command replaces the contents of the pattern space with the text you provide. In effect, it deletes the current line and puts the supplied text in its place. It can be used when you want to match a line and replace it entirely. $ echo -e 'something\\nother bli bla blub\\n\\n\\nasdf' \\ | sed -r '/other/c\\ 4700 Cross Court\\ French Lick, IN s#French#NOT IT# s#other#OTHER# ' something 4700 Cross Court French Lick, IN asdf","title":"Change"},{"location":"text-manipulation/sed/#list","text":"The list command (l) displays the contents of the pattern space, showing non- printing characters as two-digit ASCII codes.","title":"List"},{"location":"text-manipulation/sed/#transform","text":"Think of it as translate char to char. $ echo -e 'something\\nother bli bla blub\\n\\n\\nasdf' | sed 'y/abc/xyz/' something other yli ylx yluy xsdf","title":"Transform"},{"location":"text-manipulation/sed/#print","text":"The print command (p) causes the contents of the pattern space to be output. It does not clear the pattern space nor does it change the flow of control in the script. However, it is frequently used before commands (d, N, b) that do change flow control. Unless the default output is suppressed (-n), the print command will cause duplicate copies of a line to be output","title":"Print"},{"location":"text-manipulation/sed/#print-line-number","text":"$ echo -e 'something\\n\\tif\\nother bli bla blubr\\n\\n\\nasdf' | sed \"/$(echo -n -e '\\t')if/{ = p }\" something 2 if if other bli bla blubr asdf","title":"Print line number"},{"location":"text-manipulation/tr/","text":"tr remove non-letter characters # remove non-letter characters (excluding dashes) # (except for \"-\") $ echo 'catalin\u00f643a-' | tr -cd '[:alpha:]-'; echo -e \"\\n$?\" catalina- 0 remove non-printable characters (ASCII) tr -cd '[:print:]\\n' keep control sequences and printable characters (ASCII) $ tr -cd '[:print:][:cntrl:]' < <(echo -e 'asdf\\n 34j3 . -- dsf') asdf 34j3 . -- dsf","title":"tr"},{"location":"text-manipulation/tr/#tr","text":"","title":"tr"},{"location":"text-manipulation/tr/#remove-non-letter-characters","text":"# remove non-letter characters (excluding dashes) # (except for \"-\") $ echo 'catalin\u00f643a-' | tr -cd '[:alpha:]-'; echo -e \"\\n$?\" catalina- 0","title":"remove non-letter characters"},{"location":"text-manipulation/tr/#remove-non-printable-characters-ascii","text":"tr -cd '[:print:]\\n'","title":"remove non-printable characters (ASCII)"},{"location":"text-manipulation/tr/#keep-control-sequences-and-printable-characters-ascii","text":"$ tr -cd '[:print:][:cntrl:]' < <(echo -e 'asdf\\n 34j3 . -- dsf') asdf 34j3 . -- dsf","title":"keep control sequences and printable characters (ASCII)"},{"location":"tmux/general/","text":"tmux cheat sheet (C-x means ctrl+x, M-x means alt+x) save pane history to file - save current buffer to file - write pane history to file snatched from https://unix.stackexchange.com/questions/26548/write-all-tmux-scrollback-to-a-file/236845#236845 You may want to use tmux-save-pane-history # `-S -` b ... entire history # `-p` ... write to stdout # `-t %num` ... choose alternate pane [default: current pane] tmux capture-pane [-t %xy] -S - -p > /tmp/log.txt Prefix key The default prefix is C-b. If you (or your muscle memory) prefer C-a, you need to add this to ~/.tmux.conf : # remap prefix to Control + a set -g prefix C-a # bind 'C-a C-a' to type 'C-a' bind C-a send-prefix unbind C-b I'm going to assume that C-a is your prefix. Sessions, windows, panes Session is a set of windows, plus a notion of which window is current. Window is a single screen covered with panes. (Once might compare it to a \u2018virtual desktop\u2019 or a \u2018space\u2019.) Pane is a rectangular part of a window that runs a specific command, e.g. a shell. Getting help Display a list of keyboard shortcuts: C-a ? Navigate using Vim or Emacs shortcuts, depending on the value of mode-keys . Emacs is the default, and if you want Vim shortcuts for help and copy modes (e.g. j, k, C-u, C-d), add the following line to ~/.tmux.conf : setw -g mode-keys vi Any command mentioned in this list can be executed as tmux something or C-a :something (or added to ~/.tmux.conf ). Managing sessions Creating a session: tmux new-session -s work Create a new session that shares all windows with an existing session, but has its own separate notion of which window is current: tmux new-session -s work2 -t work Attach to a session: tmux attach -t work Detach from a session: C-a d . Switch between sessions: C-a ( previous session C-a ) next session C-a L \u2018last\u2019 (previously used) session C-a s choose a session from a list Other: C-a $ rename the current session C-a Managing windows Create a window: C-a c create a new window Switch between windows: C-a 1 ... switch to window 1, ..., 9, 0 C-a 9 C-a 0 C-a p previous window C-a n next window C-a l \u2018last\u2019 (previously used) window C-a w choose window from a list Switch between windows with a twist: C-a M-n next window with a bell, activity or content alert C-a M-p previous such window Other: C-a , rename the current window C-a & kill the current window Move window to different session # source: # -s <session>:<window-id> # destination: # -t <session>:<window-id> tmux move-window -s work:7 -t private:7 Managing split panes Creating a new pane by splitting an existing one: C-a \" split vertically (top/bottom) C-a % split horizontally (left/right) Switching between panes: C-a left go to the next pane on the left C-a right (or one of these other directions) C-a up C-a down C-a o go to the next pane (cycle through all of them) C-a ; go to the \u2018last\u2019 (previously used) pane Moving panes around: C-a { move the current pane to the previous position C-a } move the current pane to the next position C-a C-o rotate window \u2018up\u2019 (i.e. move all panes) C-a M-o rotate window \u2018down\u2019 C-a ! move the current pane into a new separate window (\u2018break pane\u2019) C-a :move-pane -t :3.2 split window 3's pane 2 and move the current pane there Resizing panes: C-a M-up, C-a M-down, C-a M-left, C-a M-right resize by 5 rows/columns C-a C-up, C-a C-down, C-a C-left, C-a C-right resize by 1 row/column Applying predefined layouts: C-a M-1 switch to even-horizontal layout C-a M-2 switch to even-vertical layout C-a M-3 switch to main-horizontal layout C-a M-4 switch to main-vertical layout C-a M-5 switch to tiled layout C-a space switch to the next layout Other: C-a x kill the current pane C-a q display pane numbers for a short while Other config file settings Force a reload of the config file on C-a r: unbind r bind r source-file ~/.tmux.conf Some other settings that I use: setw -g xterm-keys on","title":"tmux cheat sheet"},{"location":"tmux/general/#tmux-cheat-sheet","text":"(C-x means ctrl+x, M-x means alt+x)","title":"tmux cheat sheet"},{"location":"tmux/general/#save-pane-history-to-file-save-current-buffer-to-file-write-pane-history-to-file","text":"snatched from https://unix.stackexchange.com/questions/26548/write-all-tmux-scrollback-to-a-file/236845#236845 You may want to use tmux-save-pane-history # `-S -` b ... entire history # `-p` ... write to stdout # `-t %num` ... choose alternate pane [default: current pane] tmux capture-pane [-t %xy] -S - -p > /tmp/log.txt","title":"save pane history to file - save current buffer to file - write pane history to file"},{"location":"tmux/general/#prefix-key","text":"The default prefix is C-b. If you (or your muscle memory) prefer C-a, you need to add this to ~/.tmux.conf : # remap prefix to Control + a set -g prefix C-a # bind 'C-a C-a' to type 'C-a' bind C-a send-prefix unbind C-b I'm going to assume that C-a is your prefix.","title":"Prefix key"},{"location":"tmux/general/#sessions-windows-panes","text":"Session is a set of windows, plus a notion of which window is current. Window is a single screen covered with panes. (Once might compare it to a \u2018virtual desktop\u2019 or a \u2018space\u2019.) Pane is a rectangular part of a window that runs a specific command, e.g. a shell.","title":"Sessions, windows, panes"},{"location":"tmux/general/#getting-help","text":"Display a list of keyboard shortcuts: C-a ? Navigate using Vim or Emacs shortcuts, depending on the value of mode-keys . Emacs is the default, and if you want Vim shortcuts for help and copy modes (e.g. j, k, C-u, C-d), add the following line to ~/.tmux.conf : setw -g mode-keys vi Any command mentioned in this list can be executed as tmux something or C-a :something (or added to ~/.tmux.conf ).","title":"Getting help"},{"location":"tmux/general/#managing-sessions","text":"Creating a session: tmux new-session -s work Create a new session that shares all windows with an existing session, but has its own separate notion of which window is current: tmux new-session -s work2 -t work Attach to a session: tmux attach -t work Detach from a session: C-a d . Switch between sessions: C-a ( previous session C-a ) next session C-a L \u2018last\u2019 (previously used) session C-a s choose a session from a list Other: C-a $ rename the current session C-a","title":"Managing sessions"},{"location":"tmux/general/#managing-windows","text":"Create a window: C-a c create a new window Switch between windows: C-a 1 ... switch to window 1, ..., 9, 0 C-a 9 C-a 0 C-a p previous window C-a n next window C-a l \u2018last\u2019 (previously used) window C-a w choose window from a list Switch between windows with a twist: C-a M-n next window with a bell, activity or content alert C-a M-p previous such window Other: C-a , rename the current window C-a & kill the current window","title":"Managing windows"},{"location":"tmux/general/#move-window-to-different-session","text":"# source: # -s <session>:<window-id> # destination: # -t <session>:<window-id> tmux move-window -s work:7 -t private:7","title":"Move window to different session"},{"location":"tmux/general/#managing-split-panes","text":"Creating a new pane by splitting an existing one: C-a \" split vertically (top/bottom) C-a % split horizontally (left/right) Switching between panes: C-a left go to the next pane on the left C-a right (or one of these other directions) C-a up C-a down C-a o go to the next pane (cycle through all of them) C-a ; go to the \u2018last\u2019 (previously used) pane Moving panes around: C-a { move the current pane to the previous position C-a } move the current pane to the next position C-a C-o rotate window \u2018up\u2019 (i.e. move all panes) C-a M-o rotate window \u2018down\u2019 C-a ! move the current pane into a new separate window (\u2018break pane\u2019) C-a :move-pane -t :3.2 split window 3's pane 2 and move the current pane there Resizing panes: C-a M-up, C-a M-down, C-a M-left, C-a M-right resize by 5 rows/columns C-a C-up, C-a C-down, C-a C-left, C-a C-right resize by 1 row/column Applying predefined layouts: C-a M-1 switch to even-horizontal layout C-a M-2 switch to even-vertical layout C-a M-3 switch to main-horizontal layout C-a M-4 switch to main-vertical layout C-a M-5 switch to tiled layout C-a space switch to the next layout Other: C-a x kill the current pane C-a q display pane numbers for a short while","title":"Managing split panes"},{"location":"tmux/general/#other-config-file-settings","text":"Force a reload of the config file on C-a r: unbind r bind r source-file ~/.tmux.conf Some other settings that I use: setw -g xterm-keys on","title":"Other config file settings"},{"location":"tmux/options_and_keys/","text":"Tmux options and keys tmux show-options -g tmux list-keys","title":"Tmux options and keys"},{"location":"tmux/options_and_keys/#tmux-options-and-keys","text":"tmux show-options -g tmux list-keys","title":"Tmux options and keys"},{"location":"tmux/scripting/","text":"Tmux scripting Information gathered from https://unix.stackexchange.com/a/649752 Important comment. Quote: Careful with using a for loop with the output of all. Would recommend including #{pane_active} in your format, then sort on that column. This way the last pane to be closed will be the active one you are on. If you dont do this the for loop will work though every entry in the list provided from the output of tmux list-panes -a -F \"#D\", and if your script is in the middle it will stop before the rest of the entries are complete. \u2013 Dave Aug 4, 2022 at 14:28 set pane title CAREFUL : for some reason this breaks CWD (resets it) if you use tmux-resurrect while read -r pane; do tmux select-pane -t \"$pane\" -T ''; done < <(tmux list-panes -a -F \"#{pane_active} #{window_active} #{pane_id}\" | sort | awk '{print $3}') respawn all panes currently focused pane will respawn last while read -r pane; do tmux respawn-pane -k -t \"$pane\"; done < <(tmux list-panes -a -F \"#{pane_active} #{window_active} #{pane_id}\" | sort | awk '{print $3}')","title":"Tmux scripting"},{"location":"tmux/scripting/#tmux-scripting","text":"Information gathered from https://unix.stackexchange.com/a/649752 Important comment. Quote: Careful with using a for loop with the output of all. Would recommend including #{pane_active} in your format, then sort on that column. This way the last pane to be closed will be the active one you are on. If you dont do this the for loop will work though every entry in the list provided from the output of tmux list-panes -a -F \"#D\", and if your script is in the middle it will stop before the rest of the entries are complete. \u2013 Dave Aug 4, 2022 at 14:28","title":"Tmux scripting"},{"location":"tmux/scripting/#set-pane-title","text":"CAREFUL : for some reason this breaks CWD (resets it) if you use tmux-resurrect while read -r pane; do tmux select-pane -t \"$pane\" -T ''; done < <(tmux list-panes -a -F \"#{pane_active} #{window_active} #{pane_id}\" | sort | awk '{print $3}')","title":"set pane title"},{"location":"tmux/scripting/#respawn-all-panes","text":"currently focused pane will respawn last while read -r pane; do tmux respawn-pane -k -t \"$pane\"; done < <(tmux list-panes -a -F \"#{pane_active} #{window_active} #{pane_id}\" | sort | awk '{print $3}')","title":"respawn all panes"},{"location":"tmux/ssh-or-kubectl-exec/","text":"Tmux and ssh | Tmux and ssh Kubectl exec multiple pods simultaneoulsy exits shell window in which this command is run add ; bash after kubectl exec command if you do not want the pane to be closed on pod exit counts down available space in terminal emulator to be able to open as many panes as possible -> available_horizontally available_horizontally=\"$(tmux display -p -t . '#{pane_width}')\"; pod_ids=(0 1 2 3 4 5 6 7); for pod_id in \"${pod_ids[@]}\"; do tmux split-window -v -p \"$available_horizontally\" bash -i -c \"set-kubecontext <filename>; kubectl exec -it -n <NAMESPACE> <sts-name->$pod_id -- sh\"; available_horizontally=$(( $available_horizontally - 5 )); done ; tmux select-layout even-vertical; exit","title":"Tmux and ssh | Tmux and ssh"},{"location":"tmux/ssh-or-kubectl-exec/#tmux-and-ssh-tmux-and-ssh","text":"","title":"Tmux and ssh | Tmux and ssh"},{"location":"tmux/ssh-or-kubectl-exec/#kubectl-exec-multiple-pods-simultaneoulsy","text":"exits shell window in which this command is run add ; bash after kubectl exec command if you do not want the pane to be closed on pod exit counts down available space in terminal emulator to be able to open as many panes as possible -> available_horizontally available_horizontally=\"$(tmux display -p -t . '#{pane_width}')\"; pod_ids=(0 1 2 3 4 5 6 7); for pod_id in \"${pod_ids[@]}\"; do tmux split-window -v -p \"$available_horizontally\" bash -i -c \"set-kubecontext <filename>; kubectl exec -it -n <NAMESPACE> <sts-name->$pod_id -- sh\"; available_horizontally=$(( $available_horizontally - 5 )); done ; tmux select-layout even-vertical; exit","title":"Kubectl exec multiple pods simultaneoulsy"},{"location":"tmux/tmux_copycat/","text":"Predefined searches prefix + ctrl-f - simple f ile search prefix + ctrl-g - jumping over g it status files (best used after git status command) prefix + ctrl-h - jumping over SHA-1/SHA-256 hashes (best used after git log command) prefix + ctrl-u - u rl search (http, ftp and git urls) prefix + ctrl-d - number search (mnemonic d, as digit) prefix + ctrl-i - i p address search These start \"copycat mode\" and jump to first match.","title":"Predefined searches"},{"location":"tmux/tmux_copycat/#predefined-searches","text":"prefix + ctrl-f - simple f ile search prefix + ctrl-g - jumping over g it status files (best used after git status command) prefix + ctrl-h - jumping over SHA-1/SHA-256 hashes (best used after git log command) prefix + ctrl-u - u rl search (http, ftp and git urls) prefix + ctrl-d - number search (mnemonic d, as digit) prefix + ctrl-i - i p address search These start \"copycat mode\" and jump to first match.","title":"Predefined searches"},{"location":"tracing/dtrace/","text":"Darwin Dtrace objects Based on Dtrace Dynamic Tracing in Oracle Solaris, Mac OS X, And FreeBSD Brendan Gregg, Jim Mauro Get type of object Any translation should be defined in this directory /usr/lib/dtrace/ . Examples below. curthread struct curthread is defined as a struct thread . How do I know? $ sudo dtrace -n 'profile-997hz { @[curthread->invalid_member] = count(); }' dtrace: invalid probe specifier profile-997hz { @[curthread->invalid_member] = count(); }: in action list: invalid_member is not a member of struct thread proc struct $ sudo dtrace -n 'profile-997hz { @[(curthread->t_tro->tro_proc)->invalid_member] = count(); }' Password: dtrace: invalid probe specifier profile-997hz { @[(curthread->t_tro->tro_proc)->invalid_member] = count(); }: in action list: invalid_member is not a member of struct proc Find type defintion/Find dtrace type tranlator Examples below curthread translator Hint : I added grep translator to show less output. I know about translators in dtrace now. I did not when I was looking for curthread . Hint : I assumed thread is the same as thread_t . $ grep -r thread /usr/lib/dtrace/ | grep translator /usr/lib/dtrace/darwin.d: * kthread_t-to-psinfo_t translator, below. /usr/lib/dtrace/darwin.d:translator psinfo_t < thread_t T > { /usr/lib/dtrace/darwin.d:translator lwpsinfo_t < thread_t T > { $ grep -rFA 25 'translator lwpsinfo_t < thread_t T >' /usr/lib/dtrace/ /usr/lib/dtrace/darwin.d:translator lwpsinfo_t < thread_t T > { /usr/lib/dtrace/darwin.d- pr_flag = 0; /* lwp flags (DEPRECATED; do not use) */ /usr/lib/dtrace/darwin.d- pr_lwpid = (id_t)T->thread_id; /usr/lib/dtrace/darwin.d- pr_addr = (uintptr_t)T; /usr/lib/dtrace/darwin.d- pr_wchan = (uintptr_t)(((uthread_t)&T[1])->uu_wchan); /usr/lib/dtrace/darwin.d- /usr/lib/dtrace/darwin.d- pr_stype = SOBJ_NONE; /* XXX Undefined synch object (or none) XXX */ /usr/lib/dtrace/darwin.d- pr_state = curproc->p_stat; /usr/lib/dtrace/darwin.d- pr_sname = (curproc->p_stat == SIDL) ? 'I' : /usr/lib/dtrace/darwin.d- (curproc->p_stat == SRUN) ? 'R' : /usr/lib/dtrace/darwin.d- (curproc->p_stat == SSLEEP) ? 'S' : /usr/lib/dtrace/darwin.d- (curproc->p_stat == SSTOP) ? 'T' : /usr/lib/dtrace/darwin.d- (curproc->p_stat == SZOMB) ? 'Z' : '?'; /usr/lib/dtrace/darwin.d- /usr/lib/dtrace/darwin.d- pr_syscall = ((uthread_t)&T[1])->uu_code; /usr/lib/dtrace/darwin.d- pr_pri = T->sched_pri; /usr/lib/dtrace/darwin.d- /usr/lib/dtrace/darwin.d- pr_clname = (T->sched_mode & 0x0001) ? \"RT\" : /usr/lib/dtrace/darwin.d- (T->sched_mode & 0x0002) ? \"TS\" : \"SYS\"; /usr/lib/dtrace/darwin.d- /usr/lib/dtrace/darwin.d- pr_onpro = (T->last_processor == PROCESSOR_NULL) ? -1 : T->last_processor->cpu_id; /usr/lib/dtrace/darwin.d- pr_bindpro = -1; /* Darwin does not bind threads to processors. */ /usr/lib/dtrace/darwin.d- pr_bindpset = -1; /* Darwin does not partition processors. */ /usr/lib/dtrace/darwin.d- pr_thstate = T->state; /usr/lib/dtrace/darwin.d-}; Check if this translator is the one we are looking for $ sudo dtrace -n 'profile-997hz { @[curthread->last_processor] = count(); }' dtrace: description 'profile-997hz ' matched 1 probe ^C -549391900872 210 -45001752392 210 -45001741232 210 -45001730072 210 -45001718912 210 -45001707752 210 -45001696592 210 -45001685432 210 -45001674272 210 -45001663112 210 -45001651952 210 -45001640792 210 $ sudo dtrace -n 'profile-997hz { @[curthread->state] = count(); }' dtrace: description 'profile-997hz ' matched 1 probe ^C 13 1 4 657 132 1166 $ sudo dtrace -n 'profile-997hz { @[curthread->thread_id] = count(); }' dtrace: description 'profile-997hz ' matched 1 probe ^C 853 1 8793325 76 8793464 78 102 87 173 104 ... proc struct translator $ grep -r 'proc ' /usr/lib/dtrace/ /usr/lib/dtrace/darwin.d:inline struct proc * curproc = /usr/lib/dtrace/darwin.d: ((struct proc *)(curthread->t_tro->tro_proc)) != NULL ? ((struct proc *)(curthread->t_tro->tro_proc)) : /usr/lib/dtrace/darwin.d:translator psinfo_t < struct proc * P > { translator psinfo_t < struct proc * P > { pr_nlwp = ((struct task *)(P->task))->thread_count; pr_pid = P->p_pid; pr_ppid = P->p_ppid; pr_pgid = P->p_pgrp.__hazard_ptr->pg_id; ... }; Resolve something in the proc struct Get thread_count for the task of the process curthread is running in Hint : task in tro_proc has to be casted, otherwise the task member will be void * . Dtrace requires type info to access members of objects. Hint : This is how I knew how to cast the the task object: text $ grep -rF 'task ' /usr/lib/dtrace/ /usr/lib/dtrace/darwin.d: taskid_t pr_taskid; /* task id */ /usr/lib/dtrace/darwin.d: pr_nlwp = ((struct task *)(P->task))->thread_count; Cast to struct task pointer sudo dtrace -n 'profile-997hz { @[((struct task *)curthread->t_tro->tro_proc->task)->thread_count] = count(); }' Cast dtrace object | Casting dtrace object Example Find origin of read system call in mpv on Darwin Check if there is a read system call + get PID probefunc = syscall in this case sudo dtrace -n 'syscall:::entry /execname == \"mpv\"/ { @[pid, probefunc] = count(); }' List functions to trace for read Checked if syscall::*read*:entry would find more read syscalls for this process. It did not. sudo dtrace -n 'syscall::read:entry /execname == \"mpv\"/ { @[ustack()] = count(); }' libsystem_kernel.dylib`read+0xa mpv`stream_read_unbuffered+0x41 mpv`stream_read_more+0xe5 mpv`stream_read_partial+0x91 mpv`mp_read+0x2e libavformat.58.dylib`0x000000010d4e5f5d+0x13 2 We will take a look at where stream_read_unbuffered leads us. What does stream_read_unbuffered do? Based on Dtrace Review by Brian Cantrill https://www.youtube.com/watch?v=TgmA48fILq8 The pid provider traces every instruction in a given PID. We filter by function. Detect every function entry: sudo dtrace -n 'pid56141::stream_read_unbuffered:entry' Show timestamp for function entry: sudo dtrace -n 'pid56141::stream_read_unbuffered:entry { printf(\"Called stream_read_unbuffered at %Y\", walltimestamp); }' CPU ID FUNCTION:NAME 6 2099 stream_read_unbuffered:entry Called stream_read_unbuffered at 2022 Sep 5 03:36:32 8 2099 stream_read_unbuffered:entry Called stream_read_unbuffered at 2022 Sep 5 03:36:33 2 2099 stream_read_unbuffered:entry Called stream_read_unbuffered at 2022 Sep 5 03:36:34 5 2099 stream_read_unbuffered:entry Called stream_read_unbuffered at 2022 Sep 5 03:36:35 ^C Follow all instructions in the process after they passed through stream_read_unbuffered ( mpv-trace-stream_read_unbuffered ): dtrace: script './mpv-trace-stream_read_unbuffered.d' matched 67031 ([] probes CPU FUNCTION 0 -> stream_read_unbuffered 0 -> mp_cancel_test 0 <- mp_cancel_test 0 -> read 0 <- read 0 <- stream_read_unbuffered 4 -> stream_read_unbuffered 4 -> mp_cancel_test 4 <- mp_cancel_test 4 -> read 4 <- read 4 <- stream_read_unbuffered 6 -> stream_read_unbuffered 6 -> mp_cancel_test 6 <- mp_cancel_test 6 -> read 6 <- read 6 <- stream_read_unbuffered Follow every action stream_read_unbuffered triggered in the kernel ( mpv-trace-stream_read_unbuffered-in-the-kernel ): dtrace: script './mpv-trace-stream_read_unbuffered.d' matched 193402 probes 10 -> lck_rw_done 10 <- lck_rw_done 10 <- user_trap 10 -> unix_syscall64 10 -> proc_ucred 10 <- proc_ucred 10 -> audit_syscall_enter 10 <- audit_syscall_enter 10 -> read 10 -> lck_mtx_unlock_slow 10 <- lck_mtx_unlock_slow 10 -> vfs_context_current 10 <- vfs_context_current 10 -> uio_addiov 10 <- uio_addiov 10 -> lck_mtx_unlock_slow 10 <- lck_mtx_unlock_slow 10 -> vnode_getiocount 10 <- vnode_getiocount 10 -> lck_mtx_unlock_slow 10 <- lck_mtx_unlock_slow 10 -> mac_vnode_check_read 10 <- mac_vnode_check_read 10 -> apfs_vnop_read 10 -> uio_resid 10 <- uio_resid 10 -> uio_offset 10 <- uio_offset 10 -> vnode_mount 10 <- vnode_mount 10 -> vfs_fsprivate 10 <- vfs_fsprivate 10 -> vnode_fsnode 10 <- vnode_fsnode 10 -> _ZN18APFSOSNumberAtomic8addValueEx 10 <- _ZN18APFSOSNumberAtomic8addValueEx 10 -> is_operation_allowed 10 <- is_operation_allowed 10 -> apfs_decmpfs_file_is_compressed 10 <- apfs_decmpfs_file_is_compressed 10 -> apfs_should_scan_for_fragmentation 10 <- apfs_should_scan_for_fragmentation 10 -> lck_rw_lock_shared 10 <- lck_rw_lock_shared 10 -> lck_rw_lock_shared 10 <- lck_rw_lock_shared 10 -> apfs_get_file_size 10 <- apfs_get_file_size 10 -> lck_rw_unlock_shared 10 -> lck_rw_done 10 <- lck_rw_done 10 <- lck_rw_unlock_shared 10 -> cluster_read 10 <- cluster_read 10 -> cluster_read_ext 10 -> lck_mtx_try_lock 10 <- lck_mtx_try_lock 10 -> memory_object_control_uiomove 10 -> vm_object_lock 10 <- vm_object_lock 10 -> lck_rw_lock_exclusive 10 <- lck_rw_lock_exclusive 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> lck_rw_done 10 <- lck_rw_done 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> vm_object_lock 10 <- vm_object_lock 10 -> lck_rw_lock_exclusive 10 <- lck_rw_lock_exclusive 10 -> vm_page_lru 10 <- vm_page_lru 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> lck_mtx_unlock_slow 10 <- lck_mtx_unlock_slow 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> task_update_logical_writes 10 <- task_update_logical_writes 10 -> lck_rw_done 10 <- lck_rw_done 10 <- memory_object_control_uiomove 10 -> vm_object_range_op 10 -> lck_rw_lock_exclusive 10 <- lck_rw_lock_exclusive 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> lck_rw_done 10 <- lck_rw_done 10 <- vm_object_range_op 10 <- cluster_read_ext 10 -> lck_rw_lock_shared 10 <- lck_rw_lock_shared 10 -> update_atime 10 -> vfs_flags 10 <- vfs_flags 10 -> vnode_israge 10 <- vnode_israge 10 -> vfs_ctx_skipatime 10 -> get_bsdthreadtask_info 10 <- get_bsdthreadtask_info 10 <- vfs_ctx_skipatime 10 -> vfs_flags 10 <- vfs_flags 10 <- update_atime 10 -> uio_resid 10 <- uio_resid 10 -> _ZN18APFSOSNumberAtomic8addValueEx 10 <- _ZN18APFSOSNumberAtomic8addValueEx 10 -> _ZN18APFSOSNumberAtomic8addValueEx 10 <- _ZN18APFSOSNumberAtomic8addValueEx 10 -> lck_rw_unlock_shared 10 -> lck_rw_done 10 <- lck_rw_done 10 <- lck_rw_unlock_shared 10 -> lck_rw_unlock_shared 10 -> lck_rw_done 10 <- lck_rw_done 10 <- lck_rw_unlock_shared 10 <- apfs_vnop_read 10 -> lck_mtx_unlock_slow 10 <- lck_mtx_unlock_slow 10 -> lck_mtx_unlock_slow 10 <- lck_mtx_unlock_slow 10 -> lck_mtx_unlock_slow 10 <- lck_mtx_unlock_slow 10 <- read 10 -> user_trap 10 -> proc_ucred 10 <- proc_ucred 10 -> lck_rw_lock_shared 10 <- lck_rw_lock_shared Which files are read by the read syscall requested by mpv ? $ sudo dtrace -n 'syscall::read:entry /execname == \"mpv\"/ { @[fds[3].fi_pathname] = count(); @[fds[4].fi_pathname] = count(); }' dtrace: description 'syscall::read:entry ' matched 1 probe ^C ??/Logs/mpv.log 1 ??/Movies/Dtrace Review [TgmA48fILq8].mp4 1 $ sudo dtrace -n 'syscall::read:entry /execname == \"mpv\"/ { @[fds[arg0].fi_pathname] = count(); }' ^C ??/Logs/mpv.log 1 ??/Movies/Dtrace Review [TgmA48fILq8].mp4 1 Which libraries does mpv load (well this shows more -> any mmap file)? $ sudo dtrace -n 'syscall::mmap:entry /execname == \"mpv\"/ { @[fds[arg4].fi_pathname] = count(); }' dtrace: description 'syscall::mmap:entry ' matched 1 probe ^C ??/16777237_9765376/functions.data 1 ??/31001/libraries.data 1 ??/AppExceptions.bundle/Exceptions.plist 1 ??/C/com.apple.IntlDataCache.le.kbdx 1 ??/Fonts/Helvetica.ttc 1 ??/Fonts/SFCompact.ttf 1 ??/Fonts/SFNS.ttf 1 ??/Resources/AppleKeyboardLayouts-L.dat 1 ??/Resources/Aqua.car 1 ??/Resources/Assets.car 1 ??/Resources/Exceptions.plist 1 ??/Resources/Extras2.rsrc 1 ??/Resources/FauxVibrantLight.car 1 ??/Resources/FunctionRowAppearance.car 1 ??/Resources/SystemAppearance.car 1 ??/Resources/VibrantDark.car 1 ??/Resources/VibrantLight.car 1 ??/icu/icudt70l.dat 1 ??/io.mpv.savedState/window_1.data 1 ??/lib/libobjc-trampolines.dylib 3 <unknown (not a vnode)> 4 ??/DisplayVendorID-610/DisplayProductID-a044 4 ??/Overrides/Icons.plist 4 ??/lib/libarchive.13.dylib 4 ??/lib/libass.9.dylib 4 ??/lib/libavcodec.58.dylib 4 ??/lib/libavdevice.58.dylib 4 ??/lib/libavfilter.7.dylib 4 ??/lib/libavformat.58.dylib 4 ??/lib/libavresample.4.dylib 4 ??/lib/libavutil.56.dylib 4 ??/lib/libb2.1.dylib 4 ??/lib/libcrypto.1.1.dylib 4 ??/lib/libdav1d.5.dylib 4 ??/lib/libfontconfig.1.dylib 4 ??/lib/libfreetype.6.dylib 4 ??/lib/libfribidi.0.dylib 4 ??/lib/libglib-2.0.0.dylib 4 ??/lib/libgraphite2.3.dylib 4 ??/lib/libharfbuzz.0.dylib 4 ??/lib/libintl.8.dylib 4 ??/lib/liblcms2.2.dylib 4 ??/lib/liblua.5.1.dylib 4 ??/lib/liblz4.1.dylib 4 ??/lib/liblzma.5.dylib 4 ??/lib/libmujs.so 4 ??/lib/libogg.0.dylib 4 ??/lib/libopenjp2.7.dylib 4 ??/lib/libopus.0.dylib 4 ??/lib/libpcre.1.dylib 4 ??/lib/libpng16.16.dylib 4 ??/lib/libpostproc.55.dylib 4 ??/lib/librubberband.2.dylib 4 ??/lib/libsamplerate.0.dylib 4 ??/lib/libsoxr.0.dylib 4 ??/lib/libsrt.1.4.dylib 4 ??/lib/libssh.4.dylib 4 ??/lib/libssl.1.1.dylib 4 ??/lib/libswresample.3.dylib 4 ??/lib/libswscale.5.dylib 4 ??/lib/libtheoradec.1.dylib 4 ??/lib/libtheoraenc.1.dylib 4 ??/lib/libuchardet.0.dylib 4 ??/lib/libvorbis.0.dylib 4 ??/lib/libvorbisenc.2.dylib 4 ??/lib/libvpx.7.dylib 4 ??/lib/libzimg.2.dylib 4 ??/lib/libzstd.1.dylib 4 ??/MacOS/AMDRadeonX6000GLDriver 5 ??/MacOS/CoreAudio 5 <none> 137 python provider Taken from Dtrace Review by Brian Cantrill https://www.youtube.com/watch?v=TgmA48fILq8 List probes $ sudo dtrace -l -P pyth\\* ID PROVIDER MODULE FUNCTION NAME 16797 python14473 Python sys_audit audit 16798 python14473 Python sys_audit_tstate audit 16799 python14473 Python _PyEval_EvalFrameDefault function-entry 16800 python14473 Python dtrace_function_entry function-entry 16801 python14473 Python _PyEval_EvalFrameDefault function-return 16802 python14473 Python dtrace_function_return function-return 16803 python14473 Python gc_collect_main gc-done 16804 python14473 Python gc_collect_main gc-start 16805 python14473 Python PyImport_ImportModuleLevelObject import-find-load-done 16806 python14473 Python PyImport_ImportModuleLevelObject import-find-load-start 16807 python14473 Python _PyEval_EvalFrameDefault line 16808 python14473 Python maybe_dtrace_line line 16929 python14419 Python sys_audit audit 16930 python14419 Python sys_audit_tstate audit 16931 python14419 Python _PyEval_EvalFrameDefault function-entry 16932 python14419 Python dtrace_function_entry function-entry 16933 python14419 Python _PyEval_EvalFrameDefault function-return 16934 python14419 Python dtrace_function_return function-return 16935 python14419 Python gc_collect_main gc-done 16936 python14419 Python gc_collect_main gc-start 16937 python14419 Python PyImport_ImportModuleLevelObject import-find-load-done 16938 python14419 Python PyImport_ImportModuleLevelObject import-find-load-start 16939 python14419 Python _PyEval_EvalFrameDefault line 16940 python14419 Python maybe_dtrace_line line 71546 python94111 Python sys_audit audit 71547 python94111 Python sys_audit_tstate audit 71548 python94111 Python _PyEval_EvalFrameDefault function-entry 71549 python94111 Python dtrace_function_entry function-entry 71550 python94111 Python _PyEval_EvalFrameDefault function-return 71551 python94111 Python dtrace_function_return function-return 71552 python94111 Python gc_collect_main gc-done 71553 python94111 Python gc_collect_main gc-start 71554 python94111 Python PyImport_ImportModuleLevelObject import-find-load-done 71555 python94111 Python PyImport_ImportModuleLevelObject import-find-load-start 71556 python94111 Python _PyEval_EvalFrameDefault line 71557 python94111 Python maybe_dtrace_line line 71678 python94025 Python sys_audit audit 71679 python94025 Python sys_audit_tstate audit 71680 python94025 Python _PyEval_EvalFrameDefault function-entry 71681 python94025 Python dtrace_function_entry function-entry 71682 python94025 Python _PyEval_EvalFrameDefault function-return 71683 python94025 Python dtrace_function_return function-return 71684 python94025 Python gc_collect_main gc-done 71685 python94025 Python gc_collect_main gc-start 71686 python94025 Python PyImport_ImportModuleLevelObject import-find-load-done 71687 python94025 Python PyImport_ImportModuleLevelObject import-find-load-start 71688 python94025 Python _PyEval_EvalFrameDefault line 71689 python94025 Python maybe_dtrace_line line show module name & function name for Python $ sudo dtrace -n 'python*:::function-entry { printf(\"%s %s\\n\", copyinstr(arg0), copyinstr(arg1)) }' 10 2911 dtrace_function_entry:function-entry /tmp/test-signal.py run_default_behavior 6 2911 dtrace_function_entry:function-entry /tmp/test-signal.py sigint_handler Pre-written dtrace scripts/Pre-provided dtrace scripts Where to find them on Mac OS $ find / -executable -type f -exec sh -c 'grep -m 1 -H -F \"/usr/sbin/dtrace\" \"$0\" 2>/dev/null' {} \\; 2>/dev/null /usr/bin/loads.d:#!/usr/sbin/dtrace -s /usr/bin/syscallbypid.d:#!/usr/sbin/dtrace -s /usr/bin/fddist:/usr/sbin/dtrace -n ' /usr/bin/iofileb.d:#!/usr/sbin/dtrace -s /usr/bin/errinfo:/usr/sbin/dtrace -n ' /usr/bin/topsyscall:/usr/sbin/dtrace -n ' /usr/bin/iofile.d:#!/usr/sbin/dtrace -s /usr/bin/iotop:/usr/sbin/dtrace -n ' /usr/bin/cpuwalk.d:#!/usr/sbin/dtrace -s /usr/bin/dispqlen.d:#!/usr/sbin/dtrace -s /usr/bin/lastwords:/usr/sbin/dtrace -n ' /usr/bin/syscallbyproc.d:#!/usr/sbin/dtrace -s /usr/bin/timer_analyser.d:/usr/sbin/dtrace -n \"$dtrace\" $1 /usr/bin/execsnoop:/usr/sbin/dtrace -n ' /usr/bin/opensnoop:/usr/sbin/dtrace -n ' /usr/bin/newproc.d:#!/usr/sbin/dtrace -s /usr/bin/syscallbysysc.d:#!/usr/sbin/dtrace -s /usr/bin/pathopens.d:#!/usr/sbin/dtrace -s /usr/bin/rwbytype.d:#!/usr/sbin/dtrace -s /usr/bin/timerfires: /usr/sbin/dtrace -xdisallow_dsym -Cqn \"$dtrace\" | /usr/bin/perl -w -e \"$aggregator\" /usr/bin/dtruss:# /usr/sbin/dtrace -x dynvarsize=$buf -x evaltime=postinit -n \"$dtrace\" \\ /usr/bin/kill.d:#!/usr/sbin/dtrace -qs /usr/bin/imptrace: /usr/sbin/dtrace -s $SCRIPTFILE /usr/bin/priclass.d:#!/usr/sbin/dtrace -s /usr/bin/topsysproc:/usr/sbin/dtrace -n ' /usr/bin/seeksize.d:#!/usr/sbin/dtrace -s /usr/bin/setuids.d:#!/usr/sbin/dtrace -s /usr/bin/bitesize.d:#!/usr/sbin/dtrace -s /usr/bin/iosnoop:/usr/sbin/dtrace -n ' /usr/bin/iopending:/usr/sbin/dtrace -n ' /usr/bin/rwbypid.d:#!/usr/sbin/dtrace -s /usr/bin/procsystime: /usr/sbin/dtrace -n \"$dtrace\" -x evaltime=exec -c \"$command\" >&2 /usr/bin/pridist.d:#!/usr/sbin/dtrace -s /usr/bin/sigdist.d:#!/usr/sbin/dtrace -s /usr/bin/dappprof: /usr/sbin/dtrace -x dynvarsize=$buf -x evaltime=preinit -Z -n \"$dtrace\" \\ /usr/bin/rwsnoop:/usr/sbin/dtrace -n ' /usr/bin/creatbyproc.d:#!/usr/sbin/dtrace -s /usr/bin/pidpersec.d:#!/usr/sbin/dtrace -s /usr/bin/sampleproc:/usr/sbin/dtrace -n ' /usr/bin/filebyproc.d:#!/usr/sbin/dtrace -s /usr/bin/cpu_profiler.d:/usr/sbin/dtrace -n \"$dtrace\" /usr/bin/iopattern:/usr/sbin/dtrace -n ' /usr/bin/hotspot.d:#!/usr/sbin/dtrace -s /usr/bin/dapptrace: /usr/sbin/dtrace -x dynvarsize=$buf -x evaltime=preinit -Z -n \"$dtrace\" \\ /usr/libexec/dtrace/vm_map_delete_permanent_deny.d:#!/usr/sbin/dtrace -s /usr/libexec/dtrace/log_unnest_badness.d:#!/usr/sbin/dtrace -s /usr/libexec/dtrace/vm_object_ownership.d:#!/usr/sbin/dtrace -s /usr/libexec/dtrace/vm_map_delete_permanent.d:#!/usr/sbin/dtrace -s /usr/libexec/dtrace/vm_map_delete_permanent_prot_none.d:#!/usr/sbin/dtrace -s /usr/libexec/dtrace/smbtrace.d:#! /usr/sbin/dtrace -C -s /usr/libexec/dtrace/suspicious_task_vm_info_count.d:#!/usr/sbin/dtrace -s /System/Library/Extensions/autofs.kext/Contents/Resources/watch_for_automounts:#!/usr/sbin/dtrace -s /System/Library/Extensions/IOHIDFamily.kext/Contents/PlugIns/IOHIDLib.plugin/Contents/Resources/hiddtraceutil:validEventProbe=$(echo $(/usr/sbin/dtrace -l | grep $grepStrEvent | cut -d' ' -f 2) | cut -d' ' -f 1) Show files openend by process $ sudo opensnoop -p 63183 Password: UID PID COMM FD PATH 501 63183 rsync 0 Compiler programming livestreams/53 Scope speedup, part 1-RsuZx8TxCpk.mp4 501 63183 rsync 0 Compiler programming livestreams/54 Scope speedup, part 2-Jc1X3sdv9-k.mp4 Display network activity via read and write system calls Note: Obviously these calls can be either local or remote write/reads. This only works if you know the applications talks to the network. Otherwise you need to also display the path it is reading from or writing to. Show last 20 syscalls in the last 10 seconds including the buffer size they operated on $ sudo dtrace -p \"$(ps -ef | grep -v grep | grep kubectl | awk '{ print $2 }')\" -n 'syscall::read:entry,syscall::write:entry /pid == $target/ { @iosize[probefunc, timestamp] = sum(arg2); } tick-10sec { trunc(@iosize, 20); printa(@iosize); }' dtrace: description 'syscall::read:entry,syscall::write:entry ' matched 3 probes CPU ID FUNCTION:NAME 0 500833 :tick-10sec read 414573712695 40870 read 414574224934 40870 read 413613772247 40872 read 413614178744 40872 read 420176099965 40872 read 420177271532 40872 read 416930462730 40930 read 416931065835 40930 read 416473476100 40932 read 416474150262 40932 read 415871678372 40934 read 415872751171 40934 read 415369604460 40936 read 415370663830 40936 read 414513020823 40938 read 414514626577 40938 read 413516276239 40940 read 413516325316 40940 read 420070217621 40940 read 420070275581 40940 write 420972849369 23 write 420972858378 9569 write 420959001064 24576 write 420342166732 32768 write 420395788760 32768 write 420466818116 32768 write 420496814581 32768 write 420546572194 32768 write 420594005810 32768 write 420626161704 32768 write 420680709445 32768 write 420726899148 32768 write 420791960338 32768 write 420864622197 32768 write 420929456447 32768","title":"Darwin"},{"location":"tracing/dtrace/#darwin","text":"","title":"Darwin"},{"location":"tracing/dtrace/#dtrace-objects","text":"Based on Dtrace Dynamic Tracing in Oracle Solaris, Mac OS X, And FreeBSD Brendan Gregg, Jim Mauro","title":"Dtrace objects"},{"location":"tracing/dtrace/#get-type-of-object","text":"Any translation should be defined in this directory /usr/lib/dtrace/ . Examples below.","title":"Get type of object"},{"location":"tracing/dtrace/#curthread-struct","text":"curthread is defined as a struct thread . How do I know? $ sudo dtrace -n 'profile-997hz { @[curthread->invalid_member] = count(); }' dtrace: invalid probe specifier profile-997hz { @[curthread->invalid_member] = count(); }: in action list: invalid_member is not a member of struct thread","title":"curthread struct"},{"location":"tracing/dtrace/#proc-struct","text":"$ sudo dtrace -n 'profile-997hz { @[(curthread->t_tro->tro_proc)->invalid_member] = count(); }' Password: dtrace: invalid probe specifier profile-997hz { @[(curthread->t_tro->tro_proc)->invalid_member] = count(); }: in action list: invalid_member is not a member of struct proc","title":"proc struct"},{"location":"tracing/dtrace/#find-type-defintionfind-dtrace-type-tranlator","text":"Examples below","title":"Find type defintion/Find dtrace type tranlator"},{"location":"tracing/dtrace/#curthread-translator","text":"Hint : I added grep translator to show less output. I know about translators in dtrace now. I did not when I was looking for curthread . Hint : I assumed thread is the same as thread_t . $ grep -r thread /usr/lib/dtrace/ | grep translator /usr/lib/dtrace/darwin.d: * kthread_t-to-psinfo_t translator, below. /usr/lib/dtrace/darwin.d:translator psinfo_t < thread_t T > { /usr/lib/dtrace/darwin.d:translator lwpsinfo_t < thread_t T > { $ grep -rFA 25 'translator lwpsinfo_t < thread_t T >' /usr/lib/dtrace/ /usr/lib/dtrace/darwin.d:translator lwpsinfo_t < thread_t T > { /usr/lib/dtrace/darwin.d- pr_flag = 0; /* lwp flags (DEPRECATED; do not use) */ /usr/lib/dtrace/darwin.d- pr_lwpid = (id_t)T->thread_id; /usr/lib/dtrace/darwin.d- pr_addr = (uintptr_t)T; /usr/lib/dtrace/darwin.d- pr_wchan = (uintptr_t)(((uthread_t)&T[1])->uu_wchan); /usr/lib/dtrace/darwin.d- /usr/lib/dtrace/darwin.d- pr_stype = SOBJ_NONE; /* XXX Undefined synch object (or none) XXX */ /usr/lib/dtrace/darwin.d- pr_state = curproc->p_stat; /usr/lib/dtrace/darwin.d- pr_sname = (curproc->p_stat == SIDL) ? 'I' : /usr/lib/dtrace/darwin.d- (curproc->p_stat == SRUN) ? 'R' : /usr/lib/dtrace/darwin.d- (curproc->p_stat == SSLEEP) ? 'S' : /usr/lib/dtrace/darwin.d- (curproc->p_stat == SSTOP) ? 'T' : /usr/lib/dtrace/darwin.d- (curproc->p_stat == SZOMB) ? 'Z' : '?'; /usr/lib/dtrace/darwin.d- /usr/lib/dtrace/darwin.d- pr_syscall = ((uthread_t)&T[1])->uu_code; /usr/lib/dtrace/darwin.d- pr_pri = T->sched_pri; /usr/lib/dtrace/darwin.d- /usr/lib/dtrace/darwin.d- pr_clname = (T->sched_mode & 0x0001) ? \"RT\" : /usr/lib/dtrace/darwin.d- (T->sched_mode & 0x0002) ? \"TS\" : \"SYS\"; /usr/lib/dtrace/darwin.d- /usr/lib/dtrace/darwin.d- pr_onpro = (T->last_processor == PROCESSOR_NULL) ? -1 : T->last_processor->cpu_id; /usr/lib/dtrace/darwin.d- pr_bindpro = -1; /* Darwin does not bind threads to processors. */ /usr/lib/dtrace/darwin.d- pr_bindpset = -1; /* Darwin does not partition processors. */ /usr/lib/dtrace/darwin.d- pr_thstate = T->state; /usr/lib/dtrace/darwin.d-};","title":"curthread translator"},{"location":"tracing/dtrace/#check-if-this-translator-is-the-one-we-are-looking-for","text":"$ sudo dtrace -n 'profile-997hz { @[curthread->last_processor] = count(); }' dtrace: description 'profile-997hz ' matched 1 probe ^C -549391900872 210 -45001752392 210 -45001741232 210 -45001730072 210 -45001718912 210 -45001707752 210 -45001696592 210 -45001685432 210 -45001674272 210 -45001663112 210 -45001651952 210 -45001640792 210 $ sudo dtrace -n 'profile-997hz { @[curthread->state] = count(); }' dtrace: description 'profile-997hz ' matched 1 probe ^C 13 1 4 657 132 1166 $ sudo dtrace -n 'profile-997hz { @[curthread->thread_id] = count(); }' dtrace: description 'profile-997hz ' matched 1 probe ^C 853 1 8793325 76 8793464 78 102 87 173 104 ...","title":"Check if this translator is the one we are looking for"},{"location":"tracing/dtrace/#proc-struct-translator","text":"$ grep -r 'proc ' /usr/lib/dtrace/ /usr/lib/dtrace/darwin.d:inline struct proc * curproc = /usr/lib/dtrace/darwin.d: ((struct proc *)(curthread->t_tro->tro_proc)) != NULL ? ((struct proc *)(curthread->t_tro->tro_proc)) : /usr/lib/dtrace/darwin.d:translator psinfo_t < struct proc * P > { translator psinfo_t < struct proc * P > { pr_nlwp = ((struct task *)(P->task))->thread_count; pr_pid = P->p_pid; pr_ppid = P->p_ppid; pr_pgid = P->p_pgrp.__hazard_ptr->pg_id; ... };","title":"proc struct translator"},{"location":"tracing/dtrace/#resolve-something-in-the-proc-struct","text":"Get thread_count for the task of the process curthread is running in Hint : task in tro_proc has to be casted, otherwise the task member will be void * . Dtrace requires type info to access members of objects. Hint : This is how I knew how to cast the the task object: text $ grep -rF 'task ' /usr/lib/dtrace/ /usr/lib/dtrace/darwin.d: taskid_t pr_taskid; /* task id */ /usr/lib/dtrace/darwin.d: pr_nlwp = ((struct task *)(P->task))->thread_count;","title":"Resolve something in the proc struct"},{"location":"tracing/dtrace/#cast-to-struct-task-pointer","text":"sudo dtrace -n 'profile-997hz { @[((struct task *)curthread->t_tro->tro_proc->task)->thread_count] = count(); }'","title":"Cast to struct task pointer"},{"location":"tracing/dtrace/#cast-dtrace-object-casting-dtrace-object","text":"Example","title":"Cast dtrace object | Casting dtrace object"},{"location":"tracing/dtrace/#find-origin-of-read-system-call-in-mpv-on-darwin","text":"","title":"Find origin of read system call in mpv on Darwin"},{"location":"tracing/dtrace/#check-if-there-is-a-read-system-call-get-pid","text":"probefunc = syscall in this case sudo dtrace -n 'syscall:::entry /execname == \"mpv\"/ { @[pid, probefunc] = count(); }'","title":"Check if there is a read system call + get PID"},{"location":"tracing/dtrace/#list-functions-to-trace-for-read","text":"Checked if syscall::*read*:entry would find more read syscalls for this process. It did not. sudo dtrace -n 'syscall::read:entry /execname == \"mpv\"/ { @[ustack()] = count(); }' libsystem_kernel.dylib`read+0xa mpv`stream_read_unbuffered+0x41 mpv`stream_read_more+0xe5 mpv`stream_read_partial+0x91 mpv`mp_read+0x2e libavformat.58.dylib`0x000000010d4e5f5d+0x13 2 We will take a look at where stream_read_unbuffered leads us.","title":"List functions to trace for read"},{"location":"tracing/dtrace/#what-does-stream_read_unbuffered-do","text":"Based on Dtrace Review by Brian Cantrill https://www.youtube.com/watch?v=TgmA48fILq8 The pid provider traces every instruction in a given PID. We filter by function. Detect every function entry: sudo dtrace -n 'pid56141::stream_read_unbuffered:entry' Show timestamp for function entry: sudo dtrace -n 'pid56141::stream_read_unbuffered:entry { printf(\"Called stream_read_unbuffered at %Y\", walltimestamp); }' CPU ID FUNCTION:NAME 6 2099 stream_read_unbuffered:entry Called stream_read_unbuffered at 2022 Sep 5 03:36:32 8 2099 stream_read_unbuffered:entry Called stream_read_unbuffered at 2022 Sep 5 03:36:33 2 2099 stream_read_unbuffered:entry Called stream_read_unbuffered at 2022 Sep 5 03:36:34 5 2099 stream_read_unbuffered:entry Called stream_read_unbuffered at 2022 Sep 5 03:36:35 ^C Follow all instructions in the process after they passed through stream_read_unbuffered ( mpv-trace-stream_read_unbuffered ): dtrace: script './mpv-trace-stream_read_unbuffered.d' matched 67031 ([] probes CPU FUNCTION 0 -> stream_read_unbuffered 0 -> mp_cancel_test 0 <- mp_cancel_test 0 -> read 0 <- read 0 <- stream_read_unbuffered 4 -> stream_read_unbuffered 4 -> mp_cancel_test 4 <- mp_cancel_test 4 -> read 4 <- read 4 <- stream_read_unbuffered 6 -> stream_read_unbuffered 6 -> mp_cancel_test 6 <- mp_cancel_test 6 -> read 6 <- read 6 <- stream_read_unbuffered Follow every action stream_read_unbuffered triggered in the kernel ( mpv-trace-stream_read_unbuffered-in-the-kernel ): dtrace: script './mpv-trace-stream_read_unbuffered.d' matched 193402 probes 10 -> lck_rw_done 10 <- lck_rw_done 10 <- user_trap 10 -> unix_syscall64 10 -> proc_ucred 10 <- proc_ucred 10 -> audit_syscall_enter 10 <- audit_syscall_enter 10 -> read 10 -> lck_mtx_unlock_slow 10 <- lck_mtx_unlock_slow 10 -> vfs_context_current 10 <- vfs_context_current 10 -> uio_addiov 10 <- uio_addiov 10 -> lck_mtx_unlock_slow 10 <- lck_mtx_unlock_slow 10 -> vnode_getiocount 10 <- vnode_getiocount 10 -> lck_mtx_unlock_slow 10 <- lck_mtx_unlock_slow 10 -> mac_vnode_check_read 10 <- mac_vnode_check_read 10 -> apfs_vnop_read 10 -> uio_resid 10 <- uio_resid 10 -> uio_offset 10 <- uio_offset 10 -> vnode_mount 10 <- vnode_mount 10 -> vfs_fsprivate 10 <- vfs_fsprivate 10 -> vnode_fsnode 10 <- vnode_fsnode 10 -> _ZN18APFSOSNumberAtomic8addValueEx 10 <- _ZN18APFSOSNumberAtomic8addValueEx 10 -> is_operation_allowed 10 <- is_operation_allowed 10 -> apfs_decmpfs_file_is_compressed 10 <- apfs_decmpfs_file_is_compressed 10 -> apfs_should_scan_for_fragmentation 10 <- apfs_should_scan_for_fragmentation 10 -> lck_rw_lock_shared 10 <- lck_rw_lock_shared 10 -> lck_rw_lock_shared 10 <- lck_rw_lock_shared 10 -> apfs_get_file_size 10 <- apfs_get_file_size 10 -> lck_rw_unlock_shared 10 -> lck_rw_done 10 <- lck_rw_done 10 <- lck_rw_unlock_shared 10 -> cluster_read 10 <- cluster_read 10 -> cluster_read_ext 10 -> lck_mtx_try_lock 10 <- lck_mtx_try_lock 10 -> memory_object_control_uiomove 10 -> vm_object_lock 10 <- vm_object_lock 10 -> lck_rw_lock_exclusive 10 <- lck_rw_lock_exclusive 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> lck_rw_done 10 <- lck_rw_done 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> uiomove64 10 -> uio_update 10 <- uio_update 10 <- uiomove64 10 -> vm_object_lock 10 <- vm_object_lock 10 -> lck_rw_lock_exclusive 10 <- lck_rw_lock_exclusive 10 -> vm_page_lru 10 <- vm_page_lru 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> vm_page_lru 10 -> vm_page_queues_remove 10 -> vm_page_balance_inactive 10 <- vm_page_balance_inactive 10 <- vm_page_queues_remove 10 <- vm_page_lru 10 -> vm_page_enqueue_inactive 10 <- vm_page_enqueue_inactive 10 -> lck_mtx_unlock_slow 10 <- lck_mtx_unlock_slow 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> pmap_lock_phys_page 10 <- pmap_lock_phys_page 10 -> pmap_unlock_phys_page 10 <- pmap_unlock_phys_page 10 -> task_update_logical_writes 10 <- task_update_logical_writes 10 -> lck_rw_done 10 <- lck_rw_done 10 <- memory_object_control_uiomove 10 -> vm_object_range_op 10 -> lck_rw_lock_exclusive 10 <- lck_rw_lock_exclusive 10 -> vm_page_lookup 10 <- vm_page_lookup 10 -> lck_rw_done 10 <- lck_rw_done 10 <- vm_object_range_op 10 <- cluster_read_ext 10 -> lck_rw_lock_shared 10 <- lck_rw_lock_shared 10 -> update_atime 10 -> vfs_flags 10 <- vfs_flags 10 -> vnode_israge 10 <- vnode_israge 10 -> vfs_ctx_skipatime 10 -> get_bsdthreadtask_info 10 <- get_bsdthreadtask_info 10 <- vfs_ctx_skipatime 10 -> vfs_flags 10 <- vfs_flags 10 <- update_atime 10 -> uio_resid 10 <- uio_resid 10 -> _ZN18APFSOSNumberAtomic8addValueEx 10 <- _ZN18APFSOSNumberAtomic8addValueEx 10 -> _ZN18APFSOSNumberAtomic8addValueEx 10 <- _ZN18APFSOSNumberAtomic8addValueEx 10 -> lck_rw_unlock_shared 10 -> lck_rw_done 10 <- lck_rw_done 10 <- lck_rw_unlock_shared 10 -> lck_rw_unlock_shared 10 -> lck_rw_done 10 <- lck_rw_done 10 <- lck_rw_unlock_shared 10 <- apfs_vnop_read 10 -> lck_mtx_unlock_slow 10 <- lck_mtx_unlock_slow 10 -> lck_mtx_unlock_slow 10 <- lck_mtx_unlock_slow 10 -> lck_mtx_unlock_slow 10 <- lck_mtx_unlock_slow 10 <- read 10 -> user_trap 10 -> proc_ucred 10 <- proc_ucred 10 -> lck_rw_lock_shared 10 <- lck_rw_lock_shared Which files are read by the read syscall requested by mpv ? $ sudo dtrace -n 'syscall::read:entry /execname == \"mpv\"/ { @[fds[3].fi_pathname] = count(); @[fds[4].fi_pathname] = count(); }' dtrace: description 'syscall::read:entry ' matched 1 probe ^C ??/Logs/mpv.log 1 ??/Movies/Dtrace Review [TgmA48fILq8].mp4 1 $ sudo dtrace -n 'syscall::read:entry /execname == \"mpv\"/ { @[fds[arg0].fi_pathname] = count(); }' ^C ??/Logs/mpv.log 1 ??/Movies/Dtrace Review [TgmA48fILq8].mp4 1 Which libraries does mpv load (well this shows more -> any mmap file)? $ sudo dtrace -n 'syscall::mmap:entry /execname == \"mpv\"/ { @[fds[arg4].fi_pathname] = count(); }' dtrace: description 'syscall::mmap:entry ' matched 1 probe ^C ??/16777237_9765376/functions.data 1 ??/31001/libraries.data 1 ??/AppExceptions.bundle/Exceptions.plist 1 ??/C/com.apple.IntlDataCache.le.kbdx 1 ??/Fonts/Helvetica.ttc 1 ??/Fonts/SFCompact.ttf 1 ??/Fonts/SFNS.ttf 1 ??/Resources/AppleKeyboardLayouts-L.dat 1 ??/Resources/Aqua.car 1 ??/Resources/Assets.car 1 ??/Resources/Exceptions.plist 1 ??/Resources/Extras2.rsrc 1 ??/Resources/FauxVibrantLight.car 1 ??/Resources/FunctionRowAppearance.car 1 ??/Resources/SystemAppearance.car 1 ??/Resources/VibrantDark.car 1 ??/Resources/VibrantLight.car 1 ??/icu/icudt70l.dat 1 ??/io.mpv.savedState/window_1.data 1 ??/lib/libobjc-trampolines.dylib 3 <unknown (not a vnode)> 4 ??/DisplayVendorID-610/DisplayProductID-a044 4 ??/Overrides/Icons.plist 4 ??/lib/libarchive.13.dylib 4 ??/lib/libass.9.dylib 4 ??/lib/libavcodec.58.dylib 4 ??/lib/libavdevice.58.dylib 4 ??/lib/libavfilter.7.dylib 4 ??/lib/libavformat.58.dylib 4 ??/lib/libavresample.4.dylib 4 ??/lib/libavutil.56.dylib 4 ??/lib/libb2.1.dylib 4 ??/lib/libcrypto.1.1.dylib 4 ??/lib/libdav1d.5.dylib 4 ??/lib/libfontconfig.1.dylib 4 ??/lib/libfreetype.6.dylib 4 ??/lib/libfribidi.0.dylib 4 ??/lib/libglib-2.0.0.dylib 4 ??/lib/libgraphite2.3.dylib 4 ??/lib/libharfbuzz.0.dylib 4 ??/lib/libintl.8.dylib 4 ??/lib/liblcms2.2.dylib 4 ??/lib/liblua.5.1.dylib 4 ??/lib/liblz4.1.dylib 4 ??/lib/liblzma.5.dylib 4 ??/lib/libmujs.so 4 ??/lib/libogg.0.dylib 4 ??/lib/libopenjp2.7.dylib 4 ??/lib/libopus.0.dylib 4 ??/lib/libpcre.1.dylib 4 ??/lib/libpng16.16.dylib 4 ??/lib/libpostproc.55.dylib 4 ??/lib/librubberband.2.dylib 4 ??/lib/libsamplerate.0.dylib 4 ??/lib/libsoxr.0.dylib 4 ??/lib/libsrt.1.4.dylib 4 ??/lib/libssh.4.dylib 4 ??/lib/libssl.1.1.dylib 4 ??/lib/libswresample.3.dylib 4 ??/lib/libswscale.5.dylib 4 ??/lib/libtheoradec.1.dylib 4 ??/lib/libtheoraenc.1.dylib 4 ??/lib/libuchardet.0.dylib 4 ??/lib/libvorbis.0.dylib 4 ??/lib/libvorbisenc.2.dylib 4 ??/lib/libvpx.7.dylib 4 ??/lib/libzimg.2.dylib 4 ??/lib/libzstd.1.dylib 4 ??/MacOS/AMDRadeonX6000GLDriver 5 ??/MacOS/CoreAudio 5 <none> 137","title":"What does stream_read_unbuffered do?"},{"location":"tracing/dtrace/#python-provider","text":"Taken from Dtrace Review by Brian Cantrill https://www.youtube.com/watch?v=TgmA48fILq8","title":"python provider"},{"location":"tracing/dtrace/#list-probes","text":"$ sudo dtrace -l -P pyth\\* ID PROVIDER MODULE FUNCTION NAME 16797 python14473 Python sys_audit audit 16798 python14473 Python sys_audit_tstate audit 16799 python14473 Python _PyEval_EvalFrameDefault function-entry 16800 python14473 Python dtrace_function_entry function-entry 16801 python14473 Python _PyEval_EvalFrameDefault function-return 16802 python14473 Python dtrace_function_return function-return 16803 python14473 Python gc_collect_main gc-done 16804 python14473 Python gc_collect_main gc-start 16805 python14473 Python PyImport_ImportModuleLevelObject import-find-load-done 16806 python14473 Python PyImport_ImportModuleLevelObject import-find-load-start 16807 python14473 Python _PyEval_EvalFrameDefault line 16808 python14473 Python maybe_dtrace_line line 16929 python14419 Python sys_audit audit 16930 python14419 Python sys_audit_tstate audit 16931 python14419 Python _PyEval_EvalFrameDefault function-entry 16932 python14419 Python dtrace_function_entry function-entry 16933 python14419 Python _PyEval_EvalFrameDefault function-return 16934 python14419 Python dtrace_function_return function-return 16935 python14419 Python gc_collect_main gc-done 16936 python14419 Python gc_collect_main gc-start 16937 python14419 Python PyImport_ImportModuleLevelObject import-find-load-done 16938 python14419 Python PyImport_ImportModuleLevelObject import-find-load-start 16939 python14419 Python _PyEval_EvalFrameDefault line 16940 python14419 Python maybe_dtrace_line line 71546 python94111 Python sys_audit audit 71547 python94111 Python sys_audit_tstate audit 71548 python94111 Python _PyEval_EvalFrameDefault function-entry 71549 python94111 Python dtrace_function_entry function-entry 71550 python94111 Python _PyEval_EvalFrameDefault function-return 71551 python94111 Python dtrace_function_return function-return 71552 python94111 Python gc_collect_main gc-done 71553 python94111 Python gc_collect_main gc-start 71554 python94111 Python PyImport_ImportModuleLevelObject import-find-load-done 71555 python94111 Python PyImport_ImportModuleLevelObject import-find-load-start 71556 python94111 Python _PyEval_EvalFrameDefault line 71557 python94111 Python maybe_dtrace_line line 71678 python94025 Python sys_audit audit 71679 python94025 Python sys_audit_tstate audit 71680 python94025 Python _PyEval_EvalFrameDefault function-entry 71681 python94025 Python dtrace_function_entry function-entry 71682 python94025 Python _PyEval_EvalFrameDefault function-return 71683 python94025 Python dtrace_function_return function-return 71684 python94025 Python gc_collect_main gc-done 71685 python94025 Python gc_collect_main gc-start 71686 python94025 Python PyImport_ImportModuleLevelObject import-find-load-done 71687 python94025 Python PyImport_ImportModuleLevelObject import-find-load-start 71688 python94025 Python _PyEval_EvalFrameDefault line 71689 python94025 Python maybe_dtrace_line line","title":"List probes"},{"location":"tracing/dtrace/#show-module-name-function-name-for-python","text":"$ sudo dtrace -n 'python*:::function-entry { printf(\"%s %s\\n\", copyinstr(arg0), copyinstr(arg1)) }' 10 2911 dtrace_function_entry:function-entry /tmp/test-signal.py run_default_behavior 6 2911 dtrace_function_entry:function-entry /tmp/test-signal.py sigint_handler","title":"show module name &amp; function name for Python"},{"location":"tracing/dtrace/#pre-written-dtrace-scriptspre-provided-dtrace-scripts","text":"","title":"Pre-written dtrace scripts/Pre-provided dtrace scripts"},{"location":"tracing/dtrace/#where-to-find-them-on-mac-os","text":"$ find / -executable -type f -exec sh -c 'grep -m 1 -H -F \"/usr/sbin/dtrace\" \"$0\" 2>/dev/null' {} \\; 2>/dev/null /usr/bin/loads.d:#!/usr/sbin/dtrace -s /usr/bin/syscallbypid.d:#!/usr/sbin/dtrace -s /usr/bin/fddist:/usr/sbin/dtrace -n ' /usr/bin/iofileb.d:#!/usr/sbin/dtrace -s /usr/bin/errinfo:/usr/sbin/dtrace -n ' /usr/bin/topsyscall:/usr/sbin/dtrace -n ' /usr/bin/iofile.d:#!/usr/sbin/dtrace -s /usr/bin/iotop:/usr/sbin/dtrace -n ' /usr/bin/cpuwalk.d:#!/usr/sbin/dtrace -s /usr/bin/dispqlen.d:#!/usr/sbin/dtrace -s /usr/bin/lastwords:/usr/sbin/dtrace -n ' /usr/bin/syscallbyproc.d:#!/usr/sbin/dtrace -s /usr/bin/timer_analyser.d:/usr/sbin/dtrace -n \"$dtrace\" $1 /usr/bin/execsnoop:/usr/sbin/dtrace -n ' /usr/bin/opensnoop:/usr/sbin/dtrace -n ' /usr/bin/newproc.d:#!/usr/sbin/dtrace -s /usr/bin/syscallbysysc.d:#!/usr/sbin/dtrace -s /usr/bin/pathopens.d:#!/usr/sbin/dtrace -s /usr/bin/rwbytype.d:#!/usr/sbin/dtrace -s /usr/bin/timerfires: /usr/sbin/dtrace -xdisallow_dsym -Cqn \"$dtrace\" | /usr/bin/perl -w -e \"$aggregator\" /usr/bin/dtruss:# /usr/sbin/dtrace -x dynvarsize=$buf -x evaltime=postinit -n \"$dtrace\" \\ /usr/bin/kill.d:#!/usr/sbin/dtrace -qs /usr/bin/imptrace: /usr/sbin/dtrace -s $SCRIPTFILE /usr/bin/priclass.d:#!/usr/sbin/dtrace -s /usr/bin/topsysproc:/usr/sbin/dtrace -n ' /usr/bin/seeksize.d:#!/usr/sbin/dtrace -s /usr/bin/setuids.d:#!/usr/sbin/dtrace -s /usr/bin/bitesize.d:#!/usr/sbin/dtrace -s /usr/bin/iosnoop:/usr/sbin/dtrace -n ' /usr/bin/iopending:/usr/sbin/dtrace -n ' /usr/bin/rwbypid.d:#!/usr/sbin/dtrace -s /usr/bin/procsystime: /usr/sbin/dtrace -n \"$dtrace\" -x evaltime=exec -c \"$command\" >&2 /usr/bin/pridist.d:#!/usr/sbin/dtrace -s /usr/bin/sigdist.d:#!/usr/sbin/dtrace -s /usr/bin/dappprof: /usr/sbin/dtrace -x dynvarsize=$buf -x evaltime=preinit -Z -n \"$dtrace\" \\ /usr/bin/rwsnoop:/usr/sbin/dtrace -n ' /usr/bin/creatbyproc.d:#!/usr/sbin/dtrace -s /usr/bin/pidpersec.d:#!/usr/sbin/dtrace -s /usr/bin/sampleproc:/usr/sbin/dtrace -n ' /usr/bin/filebyproc.d:#!/usr/sbin/dtrace -s /usr/bin/cpu_profiler.d:/usr/sbin/dtrace -n \"$dtrace\" /usr/bin/iopattern:/usr/sbin/dtrace -n ' /usr/bin/hotspot.d:#!/usr/sbin/dtrace -s /usr/bin/dapptrace: /usr/sbin/dtrace -x dynvarsize=$buf -x evaltime=preinit -Z -n \"$dtrace\" \\ /usr/libexec/dtrace/vm_map_delete_permanent_deny.d:#!/usr/sbin/dtrace -s /usr/libexec/dtrace/log_unnest_badness.d:#!/usr/sbin/dtrace -s /usr/libexec/dtrace/vm_object_ownership.d:#!/usr/sbin/dtrace -s /usr/libexec/dtrace/vm_map_delete_permanent.d:#!/usr/sbin/dtrace -s /usr/libexec/dtrace/vm_map_delete_permanent_prot_none.d:#!/usr/sbin/dtrace -s /usr/libexec/dtrace/smbtrace.d:#! /usr/sbin/dtrace -C -s /usr/libexec/dtrace/suspicious_task_vm_info_count.d:#!/usr/sbin/dtrace -s /System/Library/Extensions/autofs.kext/Contents/Resources/watch_for_automounts:#!/usr/sbin/dtrace -s /System/Library/Extensions/IOHIDFamily.kext/Contents/PlugIns/IOHIDLib.plugin/Contents/Resources/hiddtraceutil:validEventProbe=$(echo $(/usr/sbin/dtrace -l | grep $grepStrEvent | cut -d' ' -f 2) | cut -d' ' -f 1)","title":"Where to find them on Mac OS"},{"location":"tracing/dtrace/#show-files-openend-by-process","text":"$ sudo opensnoop -p 63183 Password: UID PID COMM FD PATH 501 63183 rsync 0 Compiler programming livestreams/53 Scope speedup, part 1-RsuZx8TxCpk.mp4 501 63183 rsync 0 Compiler programming livestreams/54 Scope speedup, part 2-Jc1X3sdv9-k.mp4","title":"Show files openend by process"},{"location":"tracing/dtrace/#display-network-activity-via-read-and-write-system-calls","text":"Note: Obviously these calls can be either local or remote write/reads. This only works if you know the applications talks to the network. Otherwise you need to also display the path it is reading from or writing to. Show last 20 syscalls in the last 10 seconds including the buffer size they operated on $ sudo dtrace -p \"$(ps -ef | grep -v grep | grep kubectl | awk '{ print $2 }')\" -n 'syscall::read:entry,syscall::write:entry /pid == $target/ { @iosize[probefunc, timestamp] = sum(arg2); } tick-10sec { trunc(@iosize, 20); printa(@iosize); }' dtrace: description 'syscall::read:entry,syscall::write:entry ' matched 3 probes CPU ID FUNCTION:NAME 0 500833 :tick-10sec read 414573712695 40870 read 414574224934 40870 read 413613772247 40872 read 413614178744 40872 read 420176099965 40872 read 420177271532 40872 read 416930462730 40930 read 416931065835 40930 read 416473476100 40932 read 416474150262 40932 read 415871678372 40934 read 415872751171 40934 read 415369604460 40936 read 415370663830 40936 read 414513020823 40938 read 414514626577 40938 read 413516276239 40940 read 413516325316 40940 read 420070217621 40940 read 420070275581 40940 write 420972849369 23 write 420972858378 9569 write 420959001064 24576 write 420342166732 32768 write 420395788760 32768 write 420466818116 32768 write 420496814581 32768 write 420546572194 32768 write 420594005810 32768 write 420626161704 32768 write 420680709445 32768 write 420726899148 32768 write 420791960338 32768 write 420864622197 32768 write 420929456447 32768","title":"Display network activity via read and write system calls"},{"location":"tracing/dtrace/special-types-of-tracing/","text":"Special types of tracing in Dtrace Anonymous Tracing Tracing at system boot https://illumos.org/books/dtrace/chp-anon.html Speculative Tracing Commits data to a buffer if a condition matches after a probe has fired. No post-processing required... https://illumos.org/books/dtrace/chp-spec.html","title":"Special types of tracing in Dtrace"},{"location":"tracing/dtrace/special-types-of-tracing/#special-types-of-tracing-in-dtrace","text":"","title":"Special types of tracing in Dtrace"},{"location":"tracing/dtrace/special-types-of-tracing/#anonymous-tracing","text":"Tracing at system boot https://illumos.org/books/dtrace/chp-anon.html","title":"Anonymous Tracing"},{"location":"tracing/dtrace/special-types-of-tracing/#speculative-tracing","text":"Commits data to a buffer if a condition matches after a probe has fired. No post-processing required... https://illumos.org/books/dtrace/chp-spec.html","title":"Speculative Tracing"},{"location":"vim/binds/","text":"Binds map.txt Stumbled upon this page after running :help noremap *map-overview* *map-modes* Overview of which map command works in which mode. More details below. COMMANDS MODES ~ :map :noremap :unmap Normal, Visual, Select, Operator-pending :nmap :nnoremap :nunmap Normal ...","title":"Binds"},{"location":"vim/binds/#binds","text":"","title":"Binds"},{"location":"vim/binds/#maptxt","text":"Stumbled upon this page after running :help noremap *map-overview* *map-modes* Overview of which map command works in which mode. More details below. COMMANDS MODES ~ :map :noremap :unmap Normal, Visual, Select, Operator-pending :nmap :nnoremap :nunmap Normal ...","title":"map.txt"},{"location":"vim/coc/","text":"Coc.nvim schema.json -> coc settings file template https://github.com/neoclide/coc.nvim/blob/master/data/schema.json","title":"Coc.nvim"},{"location":"vim/coc/#cocnvim","text":"","title":"Coc.nvim"},{"location":"vim/coc/#schemajson-coc-settings-file-template","text":"https://github.com/neoclide/coc.nvim/blob/master/data/schema.json","title":"schema.json -&gt; coc settings file template"},{"location":"vim/fugitive/","text":"Fugitive.vim :Gedit branchname:/path/to/file \" autocompletion for branchname and fpath :Gedit SHA-hash (any git object, blob, tag, tree, \" hit enter on parent in tree --> goes to this commit \" git ls-tree sha-hash --> get version of file at the time of commit/tree object \" --> git show hash \" in fugitive on a tree press \"a\", toggles between git ls-tree and git show \" in ls-tree view we can go into each sub-tree or inspect blobsx \" go back to where we started :edit %:h \" :Gedit no arguments --> working tree version of the current file \" :0Glog --> quickfix window for all previous commits for the file \" working copy :Ggrep <pattern> \" different branch :Ggrep <pattern> <branch>","title":"Fugitive.vim"},{"location":"vim/fugitive/#fugitivevim","text":":Gedit branchname:/path/to/file \" autocompletion for branchname and fpath :Gedit SHA-hash (any git object, blob, tag, tree, \" hit enter on parent in tree --> goes to this commit \" git ls-tree sha-hash --> get version of file at the time of commit/tree object \" --> git show hash \" in fugitive on a tree press \"a\", toggles between git ls-tree and git show \" in ls-tree view we can go into each sub-tree or inspect blobsx \" go back to where we started :edit %:h \" :Gedit no arguments --> working tree version of the current file \" :0Glog --> quickfix window for all previous commits for the file \" working copy :Ggrep <pattern> \" different branch :Ggrep <pattern> <branch>","title":"Fugitive.vim"},{"location":"vim/general/","text":"General sort unique :sort u back to previous location <CTRL+O> back to last edit `. reset file :e! insert at start of line I append at end of line A insert new line above O insert new line below o move forward to start of a word w move forward to end of a word e move backward to start of a word b change word cw change 2 words c2w change to the end of the line c$ change to the beginning of the line c0 change rest of line C clear entire line and enter insert mode S clear entire line D overstrike mode R get back n-th deletion \"np, e.g. \"1p yank four lines 4yy/\"+4yy yank to end of line y join current and line below J character text object l copy 4 characters to clipboard 4yl delete 3 lines downwards d3d delete 3 lines upwards d3-d move two words forward 2w move two words backward 2b replace in selection :'<,'>s/regex/replacement/options replace start-of-line with '\"' for every line that contains FocusLost :g/FocusLost/s/^/\" replay a regex match :%s/child\\([\u25a1,.;:!?]\\)/children\\1/g delete blank lines :g/^$/d search forward/backward in line fx OR Fx search ...... (stop before char) tx OR Tx repeat search forward ; repeat search backward , substitute foo for bar between absolute lines :127,215 s/foo/bar substitute foo for bar between relative lines :+2,+4 s/foo/bar delete empty lines from current through the next 2 lines :.,+2g /^$/d delete empty lines from current to end of file :.,$g/^$/d delete non-empty lines from current to end of file :.,$v/^$/d move matching lines to end of file (*scratch space*) :% g/pattern/m$ Opens file at the first occurence of pattern $ vi +/pattern file Opens file at last line $ vi + file Read in the contents of a file :r <filename> Read the contents of a file at the top of the file (do not insert a new line) :0r <filename> :0r ! command There are 26 named buffers, not just vim's default and clipboard yank to buffer named \"a\" \"ay paste from buffer named \"a\" \"ap copy the contents of the b register to a: :let @a=@b indent a block >aB unindent a block <aB check who rebound your key https://stackoverflow.com/questions/11562654/vim-ctrl-keys-not-working :verbose nmap <leader>s :verbose <mode> <keys> yank inner big word yiW e.g. an ip address, yiw on 160.64.56.23 would yank 160 yiW will yank 160.64.56.23 unload multiple buffers listed by :ls :<start>,<end>bd unload current buffer :bd unload specific buffer :<buf_num>bd close all buffers except current :%bd | e# display all options :set all display specific option :set <option>? jump to the end of a search result /pattern/e restore visual selection (run in normal mode) gv redirect to stdout # https://superuser.com/a/1692033 nvim -e +\"redir>>/dev/stdout | echo &undodir | redir END\" -scq","title":"General"},{"location":"vim/general/#general","text":"sort unique :sort u back to previous location <CTRL+O> back to last edit `. reset file :e! insert at start of line I append at end of line A insert new line above O insert new line below o move forward to start of a word w move forward to end of a word e move backward to start of a word b change word cw change 2 words c2w change to the end of the line c$ change to the beginning of the line c0 change rest of line C clear entire line and enter insert mode S clear entire line D overstrike mode R get back n-th deletion \"np, e.g. \"1p yank four lines 4yy/\"+4yy yank to end of line y join current and line below J character text object l copy 4 characters to clipboard 4yl delete 3 lines downwards d3d delete 3 lines upwards d3-d move two words forward 2w move two words backward 2b replace in selection :'<,'>s/regex/replacement/options replace start-of-line with '\"' for every line that contains FocusLost :g/FocusLost/s/^/\" replay a regex match :%s/child\\([\u25a1,.;:!?]\\)/children\\1/g delete blank lines :g/^$/d search forward/backward in line fx OR Fx search ...... (stop before char) tx OR Tx repeat search forward ; repeat search backward , substitute foo for bar between absolute lines :127,215 s/foo/bar substitute foo for bar between relative lines :+2,+4 s/foo/bar delete empty lines from current through the next 2 lines :.,+2g /^$/d delete empty lines from current to end of file :.,$g/^$/d delete non-empty lines from current to end of file :.,$v/^$/d move matching lines to end of file (*scratch space*) :% g/pattern/m$ Opens file at the first occurence of pattern $ vi +/pattern file Opens file at last line $ vi + file Read in the contents of a file :r <filename> Read the contents of a file at the top of the file (do not insert a new line) :0r <filename> :0r ! command There are 26 named buffers, not just vim's default and clipboard yank to buffer named \"a\" \"ay paste from buffer named \"a\" \"ap copy the contents of the b register to a: :let @a=@b indent a block >aB unindent a block <aB check who rebound your key https://stackoverflow.com/questions/11562654/vim-ctrl-keys-not-working :verbose nmap <leader>s :verbose <mode> <keys> yank inner big word yiW e.g. an ip address, yiw on 160.64.56.23 would yank 160 yiW will yank 160.64.56.23 unload multiple buffers listed by :ls :<start>,<end>bd unload current buffer :bd unload specific buffer :<buf_num>bd close all buffers except current :%bd | e# display all options :set all display specific option :set <option>? jump to the end of a search result /pattern/e restore visual selection (run in normal mode) gv redirect to stdout # https://superuser.com/a/1692033 nvim -e +\"redir>>/dev/stdout | echo &undodir | redir END\" -scq","title":"General"},{"location":"vim/macro/","text":"Macros run macro across multiple lines -> snatched form https://stackoverflow.com/a/390194 :5,10 normal! @a Execute the macro stored in register a on lines 5 through the end of the file. :5,$ normal! @a Execute the macro stored in register a on all lines. :% normal! @a Execute the macro store in register a on all lines matching pattern. :g/pattern/ normal! @a To execute the macro on visually selected lines, press V and the j or k until the desired region is selected. Then type :normal! @a and observe the that following input line is shown. :'<,'> normal! @a","title":"Macros"},{"location":"vim/macro/#macros","text":"","title":"Macros"},{"location":"vim/macro/#run-macro-across-multiple-lines","text":"-> snatched form https://stackoverflow.com/a/390194 :5,10 normal! @a Execute the macro stored in register a on lines 5 through the end of the file. :5,$ normal! @a Execute the macro stored in register a on all lines. :% normal! @a Execute the macro store in register a on all lines matching pattern. :g/pattern/ normal! @a To execute the macro on visually selected lines, press V and the j or k until the desired region is selected. Then type :normal! @a and observe the that following input line is shown. :'<,'> normal! @a","title":"run macro across multiple lines"},{"location":"vim/magic/","text":"Magic Vim's default 'magic' setting makes characters have the same meaning as in grep, and \\v (very magic) makes them the same as the extended regular expressions used by egrep. Regular expressions in scripts should always specify one of \\v, \\m, \\M, or \\V, to make them immune to the user's 'magic' setting. The :substitute command has the :smagic and :snomagic alternate forms (the same as \\m and \\M), so you can search and replace with %sno/regex/new_text/g. Alternatively, you might find it helpful to refine your regular expression by searching with /\\v first , then you can insert your regular expression by typing: :s/<Ctrl-R>/ Sidenote: further info at https://vim.fandom.com/wiki/Simplifying_regular_expressions_using_magic_and_no-magic","title":"Magic"},{"location":"vim/magic/#magic","text":"Vim's default 'magic' setting makes characters have the same meaning as in grep, and \\v (very magic) makes them the same as the extended regular expressions used by egrep. Regular expressions in scripts should always specify one of \\v, \\m, \\M, or \\V, to make them immune to the user's 'magic' setting. The :substitute command has the :smagic and :snomagic alternate forms (the same as \\m and \\M), so you can search and replace with %sno/regex/new_text/g. Alternatively, you might find it helpful to refine your regular expression by searching with /\\v first , then you can insert your regular expression by typing: :s/<Ctrl-R>/ Sidenote: further info at https://vim.fandom.com/wiki/Simplifying_regular_expressions_using_magic_and_no-magic","title":"Magic"},{"location":"vim/movement-commands/","text":"Movement commands ge End of previous word gE End of previous WORD },{ Beginning of next, current paragraph num| Column num of current line g0,g$ First, last position of screen line * Search forward for word under cursor. Exact word # Search backward --- || -- g* Search forward for word unser cursor. Matches characters in this word when embedded in a longer word. g# Search backward for word -- || -- % Find match of current parenthesis, brace or bracket , Reverse search direction of last f,F,t or T ; Repeat last f,F,t or T `` Return to position before most recent jump `. Move to last change in file (for me it is '.) '0 Position where you last exited vim","title":"Movement commands"},{"location":"vim/movement-commands/#movement-commands","text":"ge End of previous word gE End of previous WORD },{ Beginning of next, current paragraph num| Column num of current line g0,g$ First, last position of screen line * Search forward for word under cursor. Exact word # Search backward --- || -- g* Search forward for word unser cursor. Matches characters in this word when embedded in a longer word. g# Search backward for word -- || -- % Find match of current parenthesis, brace or bracket , Reverse search direction of last f,F,t or T ; Repeat last f,F,t or T `` Return to position before most recent jump `. Move to last change in file (for me it is '.) '0 Position where you last exited vim","title":"Movement commands"},{"location":"vim/multitab/","text":"Multitab :e filename - edit another file :split filename - split window and load another file ctrl-w up arrow - move cursor up a window ctrl-w ctrl-w - move cursor to another window (cycle) ctrl-w_ - maximize current window ctrl-w= - make all equal size 10 ctrl-w+ - increase window size by 10 lines :vsplit file - vertical split :sview file - same as split, but readonly :hide - close current window :only - keep only this window open :ls - show current buffers :b 2 - open buffer #2 in this window","title":"Multitab"},{"location":"vim/multitab/#multitab","text":":e filename - edit another file :split filename - split window and load another file ctrl-w up arrow - move cursor up a window ctrl-w ctrl-w - move cursor to another window (cycle) ctrl-w_ - maximize current window ctrl-w= - make all equal size 10 ctrl-w+ - increase window size by 10 lines :vsplit file - vertical split :sview file - same as split, but readonly :hide - close current window :only - keep only this window open :ls - show current buffers :b 2 - open buffer #2 in this window","title":"Multitab"},{"location":"vim/quickfix/","text":"Quickfix vimgrep to quickfix list \" recursively search for pattern in .sh files in current project root \" :copen -> open in quickfix list :vimgrep /pattern/[gj] **.sh | :copen close quickfix windows location listing ... :lcl quickfix window ... :ccl","title":"Quickfix"},{"location":"vim/quickfix/#quickfix","text":"","title":"Quickfix"},{"location":"vim/quickfix/#vimgrep-to-quickfix-list","text":"\" recursively search for pattern in .sh files in current project root \" :copen -> open in quickfix list :vimgrep /pattern/[gj] **.sh | :copen","title":"vimgrep to quickfix list"},{"location":"vim/quickfix/#close-quickfix-windows","text":"location listing ... :lcl quickfix window ... :ccl","title":"close quickfix windows"},{"location":"vim/registers/","text":"Vim Registers \"manpage\" -> :help registers view current register values -> :registers change three words and put the previous three words into register c \"cc3w Append the current line to register a \"Ayy Blackhole register leave my unnamed register alone! \"_ e.g. delete current line \"_dd record macro then use it again qq -> do whatever -> q run macro :normal @q previous command register \": after running a substitution one can repeat it using :@:","title":"Vim Registers"},{"location":"vim/registers/#vim-registers","text":"\"manpage\" -> :help registers view current register values -> :registers","title":"Vim Registers"},{"location":"vim/registers/#change-three-words-and-put-the-previous-three-words-into-register-c","text":"\"cc3w","title":"change three words and put the previous three words into register c"},{"location":"vim/registers/#append-the-current-line-to-register-a","text":"\"Ayy","title":"Append the current line to register a"},{"location":"vim/registers/#blackhole-register","text":"leave my unnamed register alone! \"_ e.g. delete current line \"_dd","title":"Blackhole register"},{"location":"vim/registers/#record-macro-then-use-it-again","text":"qq -> do whatever -> q run macro :normal @q","title":"record macro then use it again"},{"location":"vim/registers/#previous-command-register","text":"\": after running a substitution one can repeat it using :@:","title":"previous command register"},{"location":"vim/tagbar_shortcuts/","text":"Tagbar shortcuts :ta :ta[g][!] {tag} jump to tag {tag} :ta :[count]ta[g][!] jump to [count]'th newer tag in tag list CTRL-] CTRL-] jump to the tag under cursor, unless changes CTRL-T N CTRL-T jump back from Nth older tag in tag list help --> F1 sidebar --> F8","title":"Tagbar shortcuts"},{"location":"vim/tagbar_shortcuts/#tagbar-shortcuts","text":":ta :ta[g][!] {tag} jump to tag {tag} :ta :[count]ta[g][!] jump to [count]'th newer tag in tag list CTRL-] CTRL-] jump to the tag under cursor, unless changes CTRL-T N CTRL-T jump back from Nth older tag in tag list help --> F1 sidebar --> F8","title":"Tagbar shortcuts"},{"location":"vim/window-movement/","text":"Vim window movement | vim window moving snatched from https://stackoverflow.com/a/4571319 :help window-moving C-w R - To rotate windows up/left. C-w r - To rotate windows down/right. C-w L - Move the current window to the \"far right\" C-w H - Move the current window to the \"far left\" C-w J - Move the current window to the \"very bottom\" C-w K - Move the current window to the \"very top\"","title":"Vim window movement | vim window moving"},{"location":"vim/window-movement/#vim-window-movement-vim-window-moving","text":"snatched from https://stackoverflow.com/a/4571319 :help window-moving C-w R - To rotate windows up/left. C-w r - To rotate windows down/right. C-w L - Move the current window to the \"far right\" C-w H - Move the current window to the \"far left\" C-w J - Move the current window to the \"very bottom\" C-w K - Move the current window to the \"very top\"","title":"Vim window movement | vim window moving"},{"location":"vlc/","text":"vlc fullscreen ... f cycle audio track ... b slower ... -","title":"vlc"},{"location":"vlc/#vlc","text":"fullscreen ... f cycle audio track ... b slower ... -","title":"vlc"},{"location":"web/favicons-for-search-engines/","text":"favicons for search engines etc https://www.google.com/s2/favicons?domain=DOMAIN","title":"favicons for search engines etc"},{"location":"web/favicons-for-search-engines/#favicons-for-search-engines-etc","text":"https://www.google.com/s2/favicons?domain=DOMAIN","title":"favicons for search engines etc"},{"location":"website-to/command-line-epub-reader/","text":"Command line epub reader https://lib.rs/crates/bk cargo install bk","title":"Command line epub reader"},{"location":"website-to/command-line-epub-reader/#command-line-epub-reader","text":"https://lib.rs/crates/bk cargo install bk","title":"Command line epub reader"},{"location":"website-to/website-to-epub/","text":"Website to epub Install paperoni via cargo Check Paperoni for installation instructions. run paperoni Single file $ paperoni -o /tmp 'https://jvns.ca/blog/2018/01/31/spying-on-a-ruby-process-s-memory-allocations/' Downloading article to /tmp [00:00:00] \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 link 1/1 Downloaded articles [00:00:00] \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 epub 1/1 Generated epubs Article downloaded successfully \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Downloaded articles \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550 Spying on a Ruby process's memory allocations with eBPF \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Batch file paperoni -o <output-dir> -f <file-containing-links> $ paperoni -o /tmp/paperoni-out/ -f /tmp/links.txt Downloading articles to /tmp/paperoni-out/ [00:00:01] \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 link 2/2 Downloaded articles [00:00:00] \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 epub 2/2 Generated epubs All articles downloaded successfully \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Downloaded articles \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550 Lorem ipsum \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Aasdf \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500","title":"Website to epub"},{"location":"website-to/website-to-epub/#website-to-epub","text":"","title":"Website to epub"},{"location":"website-to/website-to-epub/#install-paperoni-via-cargo","text":"Check Paperoni for installation instructions.","title":"Install paperoni via cargo"},{"location":"website-to/website-to-epub/#run-paperoni","text":"Single file $ paperoni -o /tmp 'https://jvns.ca/blog/2018/01/31/spying-on-a-ruby-process-s-memory-allocations/' Downloading article to /tmp [00:00:00] \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 link 1/1 Downloaded articles [00:00:00] \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 epub 1/1 Generated epubs Article downloaded successfully \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Downloaded articles \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550 Spying on a Ruby process's memory allocations with eBPF \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Batch file paperoni -o <output-dir> -f <file-containing-links> $ paperoni -o /tmp/paperoni-out/ -f /tmp/links.txt Downloading articles to /tmp/paperoni-out/ [00:00:01] \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 link 2/2 Downloaded articles [00:00:00] \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 epub 2/2 Generated epubs All articles downloaded successfully \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Downloaded articles \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550 Lorem ipsum \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Aasdf \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500","title":"run paperoni"},{"location":"website-to/website-to-pdf/","text":"Website to pdf by hand (deprecated) Save html as is -> https://github.com/gildas-lormeau/SingleFile Change layout via local browser page print page -> save as PDF Paperoni & Calibre fetch articles (writes links file) to epub use calibre to convert an epub into a pdf brew install calibre ebook-convert Spying\\ on\\ a\\ Ruby\\ process\\'s\\ memory\\ allocations\\ with\\ eBPF.epub Spying\\ on\\ a\\ Ruby\\ process\\'s\\ memory\\ allocations\\ with\\ eBPF.pdf batch conversion find . -name '*.epub' -exec sh -c 'b=\"$(basename \"$0\" | sed -r \"s#\\.epub\\$#\")\"; ebook-convert \"$0\" \"$b\".pdf' {} \\;","title":"Website to pdf"},{"location":"website-to/website-to-pdf/#website-to-pdf","text":"","title":"Website to pdf"},{"location":"website-to/website-to-pdf/#by-hand-deprecated","text":"Save html as is -> https://github.com/gildas-lormeau/SingleFile Change layout via local browser page print page -> save as PDF","title":"by hand (deprecated)"},{"location":"website-to/website-to-pdf/#paperoni-calibre","text":"fetch articles (writes links file) to epub use calibre to convert an epub into a pdf brew install calibre ebook-convert Spying\\ on\\ a\\ Ruby\\ process\\'s\\ memory\\ allocations\\ with\\ eBPF.epub Spying\\ on\\ a\\ Ruby\\ process\\'s\\ memory\\ allocations\\ with\\ eBPF.pdf","title":"Paperoni &amp; Calibre"},{"location":"website-to/website-to-pdf/#batch-conversion","text":"find . -name '*.epub' -exec sh -c 'b=\"$(basename \"$0\" | sed -r \"s#\\.epub\\$#\")\"; ebook-convert \"$0\" \"$b\".pdf' {} \\;","title":"batch conversion"},{"location":"windows/undeletable-folder-undeletable-directory/","text":"Remove undeletable folder # \\\\? signifies any network path rmdir /s /q \"\\\\?C:\\PATH\\TO\\DIRECTORY\"","title":"Remove undeletable folder"},{"location":"windows/undeletable-folder-undeletable-directory/#remove-undeletable-folder","text":"# \\\\? signifies any network path rmdir /s /q \"\\\\?C:\\PATH\\TO\\DIRECTORY\"","title":"Remove undeletable folder"},{"location":"zathura/bindings/","text":"Zathura key bindings General J, PgDn Go to the next page K, PgUp Go to the previous page h, k, j, l Scroll to the left, down, up or right direction Left, Down, Up, Right Scroll to the left, down, up or right direction ^t, ^d, ^u, ^y Scroll a half page left, down, up or right t, ^f, ^b, space, <S-space>, y Scroll a full page left, down, up or right gg, G, nG Goto to the first, the last or to the nth page H, L Goto top or bottom of the current page ^o, ^i Move backward and forward through the jump list ^j, ^k Bisect forward and backward between the last two jump points ^c, Escape Abort a, s Adjust window in best-fit or width mode /, ? Search for text n, N Search for the next or previous result o, O Open document f Follow links F Display link target \\: Enter command r Rotate by 90 degrees ^r Recolor (grayscale and invert colors) R Reload document Tab Show index and switch to **Index mode** d Toggle dual page view F5 Switch to presentation mode F11 Switch to fullscreen mode ^m Toggle inputbar ^n Toggle statusbar +, -, = Zoom in, out or to the original size zI, zO, z0 Zoom in, out or to the original size n= Zoom to size n mX Set a quickmark to a letter or number X 'X Goto quickmark saved at letter or number X q Quit Fullscreen mode J, K Go to the next or previous page space, <S-space>, <BackSpace> Scroll a full page down or up gg, G, nG Goto to the first, the last or to the nth page ^c, Escape Abort F11 Switch to normal mode +, -, = Zoom in, out or to the original size zI, zO, z0 Zoom in, out or to the original size n= Zoom to size n q Quit Presentation mode space, <S-space>, <BackSpace> Scroll a full page down or up ^c, Escape Abort F5 Switch to normal mode q Quit Index mode k, j Move to upper or lower entry l Expand entry L Expand all entries h Collapse entry H Collapse all entries space, Return Select and open entry Mouse bindings Scroll Scroll up or down ^Scroll Zoom in or out Hold Button2 Pan the document Button1 Follow link","title":"Zathura key bindings"},{"location":"zathura/bindings/#zathura-key-bindings","text":"General J, PgDn Go to the next page K, PgUp Go to the previous page h, k, j, l Scroll to the left, down, up or right direction Left, Down, Up, Right Scroll to the left, down, up or right direction ^t, ^d, ^u, ^y Scroll a half page left, down, up or right t, ^f, ^b, space, <S-space>, y Scroll a full page left, down, up or right gg, G, nG Goto to the first, the last or to the nth page H, L Goto top or bottom of the current page ^o, ^i Move backward and forward through the jump list ^j, ^k Bisect forward and backward between the last two jump points ^c, Escape Abort a, s Adjust window in best-fit or width mode /, ? Search for text n, N Search for the next or previous result o, O Open document f Follow links F Display link target \\: Enter command r Rotate by 90 degrees ^r Recolor (grayscale and invert colors) R Reload document Tab Show index and switch to **Index mode** d Toggle dual page view F5 Switch to presentation mode F11 Switch to fullscreen mode ^m Toggle inputbar ^n Toggle statusbar +, -, = Zoom in, out or to the original size zI, zO, z0 Zoom in, out or to the original size n= Zoom to size n mX Set a quickmark to a letter or number X 'X Goto quickmark saved at letter or number X q Quit Fullscreen mode J, K Go to the next or previous page space, <S-space>, <BackSpace> Scroll a full page down or up gg, G, nG Goto to the first, the last or to the nth page ^c, Escape Abort F11 Switch to normal mode +, -, = Zoom in, out or to the original size zI, zO, z0 Zoom in, out or to the original size n= Zoom to size n q Quit Presentation mode space, <S-space>, <BackSpace> Scroll a full page down or up ^c, Escape Abort F5 Switch to normal mode q Quit Index mode k, j Move to upper or lower entry l Expand entry L Expand all entries h Collapse entry H Collapse all entries space, Return Select and open entry Mouse bindings Scroll Scroll up or down ^Scroll Zoom in or out Hold Button2 Pan the document Button1 Follow link","title":"Zathura key bindings"}]}